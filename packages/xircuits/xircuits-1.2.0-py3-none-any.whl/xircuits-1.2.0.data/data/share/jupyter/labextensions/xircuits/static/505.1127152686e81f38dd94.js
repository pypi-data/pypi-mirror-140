"use strict";(self.webpackChunkxircuits=self.webpackChunkxircuits||[]).push([[505],{88048:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DagreEngine=void 0;const i=n(68251),r=n(73724),a=n(96486),s=n(81463);e.DagreEngine=class{constructor(t={}){this.options=t}redistribute(t){var e=new r.graphlib.Graph({multigraph:!0,compound:!0});e.setGraph(this.options.graph||{}),e.setDefaultEdgeLabel((function(){return{}})),a.forEach(t.getNodes(),(t=>{e.setNode(t.getID(),{width:t.width,height:t.height})})),a.forEach(t.getLinks(),(t=>{t.getSourcePort()&&t.getTargetPort()&&e.setEdge({v:t.getSourcePort().getNode().getID(),w:t.getTargetPort().getNode().getID(),name:t.getID()})})),r.layout(e),e.nodes().forEach((n=>{const i=e.node(n);t.getNode(n).setPosition(i.x-i.width/2,i.y-i.height/2)})),this.options.includeLinks&&e.edges().forEach((n=>{const r=e.edge(n),a=t.getLink(n.name),o=[a.getFirstPoint()];for(let t=1;t<r.points.length-1;t++)o.push(new i.PointModel({link:a,position:new s.Point(r.points[t].x,r.points[t].y)}));a.setPoints(o.concat(a.getLastPoint()))}))}}},88386:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathFinding=void 0;const i=n(84164),r=new i.JumpPointFinder({heuristic:i.Heuristic.manhattan,diagonalMovement:i.DiagonalMovement.Never});e.PathFinding=class{constructor(t){this.instance=r,this.factory=t}calculateDirectPath(t,e){const n=this.factory.getCanvasMatrix(),a=new i.Grid(n);return r.findPath(this.factory.translateRoutingX(Math.floor(t.getX()/this.factory.ROUTING_SCALING_FACTOR)),this.factory.translateRoutingY(Math.floor(t.getY()/this.factory.ROUTING_SCALING_FACTOR)),this.factory.translateRoutingX(Math.floor(e.getX()/this.factory.ROUTING_SCALING_FACTOR)),this.factory.translateRoutingY(Math.floor(e.getY()/this.factory.ROUTING_SCALING_FACTOR)),a)}calculateLinkStartEndCoords(t,e){const n=e.findIndex((e=>!!t[e[1]]&&0===t[e[1]][e[0]])),i=e.length-1-e.slice().reverse().findIndex((e=>!!t[e[1]]&&0===t[e[1]][e[0]]));if(-1===n||-1===i)return;const r=e.slice(0,n),a=e.slice(i);return{start:{x:e[n][0],y:e[n][1]},end:{x:e[i][0],y:e[i][1]},pathToStart:r,pathToEnd:a}}calculateDynamicPath(t,e,n,a,s){const o=new i.Grid(t),h=r.findPath(e.x,e.y,n.x,n.y,o),c=a.concat(h,s).map((t=>[this.factory.translateRoutingX(t[0],!0),this.factory.translateRoutingY(t[1],!0)]));return i.Util.compressPath(c)}}},83505:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(79974),e),r(n(91931),e),r(n(92356),e),r(n(70200),e),r(n(67687),e),r(n(8742),e),r(n(88386),e),r(n(88048),e)},79974:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathFindingLinkFactory=void 0;const i=n(56271),r=n(91931),a=n(92356),s=n(96486),o=n(23736),h=n(40354),c=n(90659);class l extends h.DefaultLinkFactory{constructor(){super(l.NAME),this.ROUTING_SCALING_FACTOR=5,this.canvasMatrix=[],this.routingMatrix=[],this.hAdjustmentFactor=0,this.vAdjustmentFactor=0,this.calculateMatrixDimensions=()=>{const t=s.values(this.engine.getModel().getNodes()).map((t=>({x:t.getX(),width:t.width,y:t.getY(),height:t.height}))),e=s.values(this.engine.getModel().getLinks()),n=s.flatMap(e.map((t=>[t.getSourcePort(),t.getTargetPort()]))).filter((t=>null!==t)).map((t=>({x:t.getX(),width:t.width,y:t.getY(),height:t.height}))),i=s.flatMap(e.map((t=>t.getPoints()))).map((t=>({x:t.getX(),width:0,y:t.getY(),height:0}))),r=(t,e)=>s.reduce(e,((e,n)=>e+s.get(t,n,0)),0),a=this.engine.getCanvas(),o=s.concat(t,n,i),h=Math.floor(Math.min(s.get(s.minBy(o,"x"),"x",0),0)/this.ROUTING_SCALING_FACTOR)*this.ROUTING_SCALING_FACTOR,c=s.maxBy(o,(t=>r(t,["x","width"]))),l=Math.max(r(c,["x","width"]),a.offsetWidth),u=s.minBy(o,"y"),g=Math.floor(Math.min(s.get(u,"y",0),0)/this.ROUTING_SCALING_FACTOR)*this.ROUTING_SCALING_FACTOR,d=s.maxBy(o,(t=>r(t,["y","height"]))),p=Math.max(r(d,["y","height"]),a.offsetHeight);return{width:Math.ceil(Math.abs(h)+l),hAdjustmentFactor:Math.abs(h)/this.ROUTING_SCALING_FACTOR+1,height:Math.ceil(Math.abs(g)+p),vAdjustmentFactor:Math.abs(g)/this.ROUTING_SCALING_FACTOR+1}},this.markNodes=t=>{s.values(this.engine.getModel().getNodes()).forEach((e=>{const n=Math.floor(e.getX()/this.ROUTING_SCALING_FACTOR),i=Math.ceil((e.getX()+e.width)/this.ROUTING_SCALING_FACTOR),r=Math.floor(e.getY()/this.ROUTING_SCALING_FACTOR),a=Math.ceil((e.getY()+e.height)/this.ROUTING_SCALING_FACTOR);for(let e=n-1;e<=i+1;e++)for(let n=r-1;n<a+1;n++)this.markMatrixPoint(t,this.translateRoutingX(e),this.translateRoutingY(n))}))},this.markPorts=t=>{s.flatMap(s.values(this.engine.getModel().getLinks()).map((t=>[].concat(t.getSourcePort(),t.getTargetPort())))).filter((t=>null!==t)).forEach((e=>{const n=Math.floor(e.x/this.ROUTING_SCALING_FACTOR),i=Math.ceil((e.x+e.width)/this.ROUTING_SCALING_FACTOR),r=Math.floor(e.y/this.ROUTING_SCALING_FACTOR),a=Math.ceil((e.y+e.height)/this.ROUTING_SCALING_FACTOR);for(let e=n-1;e<=i+1;e++)for(let n=r-1;n<a+1;n++)this.markMatrixPoint(t,this.translateRoutingX(e),this.translateRoutingY(n))}))},this.markMatrixPoint=(t,e,n)=>{void 0!==t[n]&&void 0!==t[n][e]&&(t[n][e]=1)}}setDiagramEngine(t){super.setDiagramEngine(t),t.getStateMachine().registerListener({stateChanged:e=>{if(e.newState instanceof c.AbstractDisplacementState){const e=t.getActionEventBus().registerAction(new c.Action({type:c.InputType.MOUSE_UP,fire:()=>{this.calculateRoutingMatrix(),t.repaintCanvas(),e()}}))}}}),this.listener=t.registerListener({canvasReady:()=>{s.defer((()=>{this.calculateRoutingMatrix(),t.repaintCanvas()}))}})}setFactoryBank(t){super.setFactoryBank(t),!t&&this.listener&&this.listener.deregister()}generateReactWidget(t){return i.createElement(a.PathFindingLinkWidget,{diagramEngine:this.engine,link:t.model,factory:this})}generateModel(t){return new r.PathFindingLinkModel}getCanvasMatrix(){return 0===this.canvasMatrix.length&&this.calculateCanvasMatrix(),this.canvasMatrix}calculateCanvasMatrix(){const{width:t,hAdjustmentFactor:e,height:n,vAdjustmentFactor:i}=this.calculateMatrixDimensions();this.hAdjustmentFactor=e,this.vAdjustmentFactor=i;const r=Math.ceil(t/this.ROUTING_SCALING_FACTOR),a=Math.ceil(n/this.ROUTING_SCALING_FACTOR);this.canvasMatrix=s.range(0,a).map((()=>new Array(r).fill(0)))}getRoutingMatrix(){return 0===this.routingMatrix.length&&this.calculateRoutingMatrix(),this.routingMatrix}calculateRoutingMatrix(){const t=s.cloneDeep(this.getCanvasMatrix());this.markNodes(t),this.markPorts(t),this.routingMatrix=t}translateRoutingX(t,e=!1){return t+this.hAdjustmentFactor*(e?-1:1)}translateRoutingY(t,e=!1){return t+this.vAdjustmentFactor*(e?-1:1)}generateDynamicPath(t){let e=o();return e=e.moveto(t[0][0]*this.ROUTING_SCALING_FACTOR,t[0][1]*this.ROUTING_SCALING_FACTOR),t.slice(1).forEach((t=>{e=e.lineto(t[0]*this.ROUTING_SCALING_FACTOR,t[1]*this.ROUTING_SCALING_FACTOR)})),e.print()}}e.PathFindingLinkFactory=l,l.NAME="pathfinding"},91931:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathFindingLinkModel=void 0;const i=n(79974),r=n(40354);class a extends r.DefaultLinkModel{constructor(t={}){super(Object.assign({type:i.PathFindingLinkFactory.NAME},t))}performanceTune(){return!1}}e.PathFindingLinkModel=a},92356:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathFindingLinkWidget=void 0;const i=n(56271),r=n(96486),a=n(88386),s=n(40354);class o extends i.Component{constructor(t){super(t),this.refPaths=[],this.state={selected:!1},this.pathFinding=new a.PathFinding(this.props.factory)}componentDidUpdate(){this.props.link.setRenderedPaths(this.refPaths.map((t=>t.current)))}componentDidMount(){this.props.link.setRenderedPaths(this.refPaths.map((t=>t.current)))}componentWillUnmount(){this.props.link.setRenderedPaths([])}generateLink(t,e){const n=i.createRef();return this.refPaths.push(n),i.createElement(s.DefaultLinkSegmentWidget,{key:`link-${e}`,path:t,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:n,onSelection:t=>{this.setState({selected:t})},extras:{}})}render(){this.refPaths=[];var t=this.props.link.getPoints(),e=[];const n=this.pathFinding.calculateDirectPath(r.first(t),r.last(t)),a=this.props.factory.getRoutingMatrix(),s=this.pathFinding.calculateLinkStartEndCoords(a,n);if(s){const{start:t,end:n,pathToStart:i,pathToEnd:r}=s,o=this.pathFinding.calculateDynamicPath(a,t,n,i,r);e.push(this.generateLink(this.props.factory.generateDynamicPath(o),"0"))}return i.createElement(i.Fragment,null,e)}}e.PathFindingLinkWidget=o},67687:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RightAngleLinkFactory=void 0;const i=n(56271),r=n(70200),a=n(40354),s=n(8742);class o extends a.DefaultLinkFactory{constructor(){super(o.NAME)}generateModel(t){return new s.RightAngleLinkModel}generateReactWidget(t){return i.createElement(r.RightAngleLinkWidget,{diagramEngine:this.engine,link:t.model,factory:this})}}e.RightAngleLinkFactory=o,o.NAME="rightAngle"},8742:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RightAngleLinkModel=void 0;const i=n(40354),r=n(67687);class a extends i.DefaultLinkModel{constructor(t={}){super(Object.assign({type:r.RightAngleLinkFactory.NAME},t)),this.lastHoverIndexOfPath=0,this._lastPathXdirection=!1,this._firstPathXdirection=!1}setFirstAndLastPathsDirection(){let t=this.getPoints();for(let e=1;e<t.length;e+=t.length-2){let n=Math.abs(t[e].getX()-t[e-1].getX()),i=Math.abs(t[e].getY()-t[e-1].getY());e-1==0?this._firstPathXdirection=n>i:this._lastPathXdirection=n>i}}addPoint(t,e=1){return super.addPoint(t,e),this.setFirstAndLastPathsDirection(),t}deserialize(t){super.deserialize(t),this.setFirstAndLastPathsDirection()}setManuallyFirstAndLastPathsDirection(t,e){this._firstPathXdirection=t,this._lastPathXdirection=e}getLastPathXdirection(){return this._lastPathXdirection}getFirstPathXdirection(){return this._firstPathXdirection}setWidth(t){this.options.width=t,this.fireEvent({width:t},"widthChanged")}setColor(t){this.options.color=t,this.fireEvent({color:t},"colorChanged")}}e.RightAngleLinkModel=a},70200:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RightAngleLinkWidget=void 0;const i=n(56271),r=n(68251),a=n(40354),s=n(81463);class o extends i.Component{constructor(t){super(t),this.handleMove=function(t){this.draggingEvent(t,this.dragging_index)}.bind(this),this.handleUp=function(t){this.setState({canDrag:!1,selected:!1}),window.removeEventListener("mousemove",this.handleMove),window.removeEventListener("mouseup",this.handleUp)}.bind(this),this.refPaths=[],this.state={selected:!1,canDrag:!1},this.dragging_index=0}componentDidUpdate(){this.props.link.setRenderedPaths(this.refPaths.map((t=>t.current)))}componentDidMount(){this.props.link.setRenderedPaths(this.refPaths.map((t=>t.current)))}componentWillUnmount(){this.props.link.setRenderedPaths([])}generateLink(t,e,n){const r=i.createRef();return this.refPaths.push(r),i.createElement(a.DefaultLinkSegmentWidget,{key:`link-${n}`,path:t,selected:this.state.selected,diagramEngine:this.props.diagramEngine,factory:this.props.diagramEngine.getFactoryForLink(this.props.link),link:this.props.link,forwardRef:r,onSelection:t=>{this.setState({selected:t})},extras:e})}calculatePositions(t,e,n,i){if(0===n){let e=new r.PointModel({link:this.props.link,position:new s.Point(t[n].getX(),t[n].getY())});return this.props.link.addPoint(e,n),void this.dragging_index++}if(n===t.length-2){let e=new r.PointModel({link:this.props.link,position:new s.Point(t[n+1].getX(),t[n+1].getY())});return void this.props.link.addPoint(e,n+1)}if(n-2>0){let r={[n-2]:t[n-2].getPosition(),[n+1]:t[n+1].getPosition(),[n-1]:t[n-1].getPosition()};if(Math.abs(r[n-1][i]-r[n+1][i])<5)return r[n-2][i]=this.props.diagramEngine.getRelativeMousePoint(e)[i],r[n+1][i]=this.props.diagramEngine.getRelativeMousePoint(e)[i],t[n-2].setPosition(r[n-2]),t[n+1].setPosition(r[n+1]),t[n-1].remove(),t[n-1].remove(),this.dragging_index--,void this.dragging_index--}if(n+2<t.length-2){let r={[n+3]:t[n+3].getPosition(),[n+2]:t[n+2].getPosition(),[n+1]:t[n+1].getPosition(),[n]:t[n].getPosition()};if(Math.abs(r[n+1][i]-r[n+2][i])<5)return r[n][i]=this.props.diagramEngine.getRelativeMousePoint(e)[i],r[n+3][i]=this.props.diagramEngine.getRelativeMousePoint(e)[i],t[n].setPosition(r[n]),t[n+3].setPosition(r[n+3]),t[n+1].remove(),void t[n+1].remove()}let a={[n]:t[n].getPosition(),[n+1]:t[n+1].getPosition()};a[n][i]=this.props.diagramEngine.getRelativeMousePoint(e)[i],a[n+1][i]=this.props.diagramEngine.getRelativeMousePoint(e)[i],t[n].setPosition(a[n]),t[n+1].setPosition(a[n+1])}draggingEvent(t,e){let n=this.props.link.getPoints(),i=Math.abs(n[e].getX()-n[e+1].getX()),r=Math.abs(n[e].getY()-n[e+1].getY());0===i?this.calculatePositions(n,t,e,"x"):0===r&&this.calculatePositions(n,t,e,"y"),this.props.link.setFirstAndLastPathsDirection()}render(){let t=this.props.link.getPoints(),e=[],n=t[0],a=t[t.length-1],o=!1;n.getX()>a.getX()&&(n=t[t.length-1],a=t[0],o=!0);let h=Math.abs(t[0].getY()-t[t.length-1].getY());if(null===this.props.link.getTargetPort()&&2===t.length)[...Array(2)].forEach((t=>{this.props.link.addPoint(new r.PointModel({link:this.props.link,position:new s.Point(n.getX(),a.getY())}),1)})),this.props.link.setManuallyFirstAndLastPathsDirection(!0,!0);else if(null===this.props.link.getTargetPort()&&null!==this.props.link.getSourcePort())t[1].setPosition(a.getX()+(n.getX()-a.getX())/2,o?a.getY():n.getY()),t[2].setPosition(a.getX()+(n.getX()-a.getX())/2,o?n.getY():a.getY());else if(!this.state.canDrag&&t.length>2)for(let e=1;e<t.length;e+=t.length-2)e-1==0?this.props.link.getFirstPathXdirection()?t[e].setPosition(t[e].getX(),t[e-1].getY()):t[e].setPosition(t[e-1].getX(),t[e].getY()):this.props.link.getLastPathXdirection()?t[e-1].setPosition(t[e-1].getX(),t[e].getY()):t[e-1].setPosition(t[e].getX(),t[e-1].getY());2!==t.length||0===h||this.state.canDrag||this.props.link.addPoint(new r.PointModel({link:this.props.link,position:new s.Point(n.getX(),a.getY())}));for(let n=0;n<t.length-1;n++)e.push(this.generateLink(r.LinkWidget.generateLinePath(t[n],t[n+1]),{"data-linkid":this.props.link.getID(),"data-point":n,onMouseDown:t=>{0===t.button&&(this.setState({canDrag:!0}),this.dragging_index=n,window.addEventListener("mousemove",this.handleMove),window.addEventListener("mouseup",this.handleUp))},onMouseEnter:t=>{this.setState({selected:!0}),this.props.link.lastHoverIndexOfPath=n}},n));return this.refPaths=[],i.createElement("g",{"data-default-link-test":this.props.link.getOptions().testName},e)}}e.RightAngleLinkWidget=o,o.defaultProps={color:"red",width:3,link:null,smooth:!1,diagramEngine:null,factory:null}},34284:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(t){return t*t},r=function(t,e){var r=n(t,2),a=r[0],s=r[1],o=n(e,2),h=o[0],c=o[1];return Math.sqrt(i(a-h)+i(s-c))};e.default={distPointToPoint:r,distPointToParabol:function(t,e){var n=r(t,e);return 0==n?1/0:i(n)/(2*Math.abs(t[1]-e[1]))},circumCenter:function(t,e,n){var i=(t[0]-n[0])*(e[1]-n[1])-(e[0]-n[0])*(t[1]-n[1]);return 0==i?[1/0,1/0]:[(((t[0]-n[0])*(t[0]+n[0])+(t[1]-n[1])*(t[1]+n[1]))/2*(e[1]-n[1])-((e[0]-n[0])*(e[0]+n[0])+(e[1]-n[1])*(e[1]+n[1]))/2*(t[1]-n[1]))/i,(((e[0]-n[0])*(e[0]+n[0])+(e[1]-n[1])*(e[1]+n[1]))/2*(t[0]-n[0])-((t[0]-n[0])*(t[0]+n[0])+(t[1]-n[1])*(t[1]+n[1]))/2*(e[0]-n[0]))/i]},parabolsCrossX:function(t,e,n){if(t[1]===e[1])return[(t[0]+e[0])/2,(t[0]+e[0])/2];var i=(t[1]*e[0]-t[0]*e[1]+t[0]*n-e[0]*n+Math.sqrt((t[0]*t[0]+t[1]*t[1]-2*t[0]*e[0]+e[0]*e[0]-2*t[1]*e[1]+e[1]*e[1])*(t[1]*e[1]-t[1]*n-e[1]*n+n*n)))/(t[1]-e[1]),r=(t[1]*e[0]-t[0]*e[1]+t[0]*n-e[0]*n-Math.sqrt((t[0]*t[0]+t[1]*t[1]-2*t[0]*e[0]+e[0]*e[0]-2*t[1]*e[1]+e[1]*e[1])*(t[1]*e[1]-t[1]*n-e[1]*n+n*n)))/(t[1]-e[1]);return i<r?[i,r]:[r,i]},doHalflinesCross:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?1e-10:arguments[2],i=e.ps[0]-t.ps[0],r=e.ps[1]-t.ps[1];if(t.m==1/0)return t.hp*(e.m*i-r)<=n&&e.vec[0]*i<=n;if(e.m==1/0)return e.hp*(t.m*i-r)>=-n&&t.vec[0]*i>=-n;var a=e.vec[0]*t.vec[1]-e.vec[1]*t.vec[0];if(0===a)return!1;var s=(r*e.vec[0]-i*e.vec[1])/a,o=(r*t.vec[0]-i*t.vec[1])/a;return s>=-n&&o>=n||s>=n&&o>=-n},matrixTransform:function(t,e){return t.map((function(t){return{x:t.x*e[0]+t.y*e[2]+e[4],y:t.x*e[1]+t.y*e[3]+e[5]}}))},transformEllipse:function(t,e,n,i){var r=Math.PI/180,a=1e-10,s=Math.cos(n*r),o=Math.sin(n*r),h=[t*(i[0]*s+i[2]*o),t*(i[1]*s+i[3]*o),e*(-i[0]*o+i[2]*s),e*(-i[1]*o+i[3]*s)],c=h[0]*h[0]+h[2]*h[2],l=h[1]*h[1]+h[3]*h[3],u=((h[0]-h[3])*(h[0]-h[3])+(h[2]+h[1])*(h[2]+h[1]))*((h[0]+h[3])*(h[0]+h[3])+(h[2]-h[1])*(h[2]-h[1])),g=(c+l)/2;if(u<a*g)return{rx:Math.sqrt(g),ry:Math.sqrt(g),ax:0,isDegenerate:!1};var d=h[0]*h[1]+h[2]*h[3],p=g+(u=Math.sqrt(u))/2,f=g-u/2,m=void 0,v=void 0,y=void 0;return(m=Math.abs(d)<a&&Math.abs(p-l)<a?90:180*Math.atan(Math.abs(d)>Math.abs(p-l)?(p-c)/d:d/(p-l))/Math.PI)>=0?(v=Math.sqrt(p),y=Math.sqrt(f)):(m+=90,v=Math.sqrt(f),y=Math.sqrt(p)),{rx:v,ry:y,ax:m,isDegenerate:v<a*y||y<a*v}}},t.exports=e.default},23736:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=n(34284),a=function t(e){var n=e||[],a=function(t){return t.command+" "+t.params.map((function(t){return 6,function(t,e){for(var n=t.length;"0"===t.charAt(n-1);)n-=1;return"."===t.charAt(n-1)&&(n-=1),t.substr(0,n)}(t.toFixed(6))})).join(" ")},s=function(t,e){var n=t.command,i=t.params;switch(n){case"M":case"L":case"T":return[i[0],i[1]];case"H":return[i[0],e[1]];case"V":return[e[0],i[0]];case"Z":return null;case"C":return[i[4],i[5]];case"S":case"Q":return[i[2],i[3]];case"A":return[i[5],i[6]]}},o=function(t,e,n){var i=t.params,a={V:function(t,e,n){var a=[{x:n[0],y:i[0]}],s=(0,r.matrixTransform)(a,e);return s[0].x===(0,r.matrixTransform)([{x:n[0],y:n[1]}],e)[0].x?{command:"V",params:[s[0].y]}:{command:"L",params:[s[0].x,s[0].y]}},H:function(t,e,n){var a=[{x:i[0],y:n[1]}],s=(0,r.matrixTransform)(a,e);return s[0].y===(0,r.matrixTransform)([{x:n[0],y:n[1]}],e)[0].y?{command:"H",params:[s[0].x]}:{command:"L",params:[s[0].x,s[0].y]}},A:function(t,e,n){var a=(0,r.transformEllipse)(i[0],i[1],i[2],e),s=i[4];e[0]*e[3]-e[1]*e[2]<0&&(s=s?"0":"1");var o=[{x:i[5],y:i[6]}],h=(0,r.matrixTransform)(o,e);return a.isDegenerate?{command:"L",params:[h[0].x,h[0].y]}:{command:"A",params:[a.rx,a.ry,a.ax,i[3],s,h[0].x,h[0].y]}},C:function(t,e,n){var a=[{x:i[0],y:i[1]},{x:i[2],y:i[3]},{x:i[4],y:i[5]}],s=(0,r.matrixTransform)(a,e);return{command:"C",params:[s[0].x,s[0].y,s[1].x,s[1].y,s[2].x,s[2].y]}},Z:function(t,e,n){return{command:"Z",params:[]}},default:function(t,e,n){var a=[{x:i[0],y:i[1]}],s=(0,r.matrixTransform)(a,e),o=t.params.slice(0,t.params.length);return o.splice(0,2,s[0].x,s[0].y),{command:t.command,params:o}}};return a[t.command]?a[t.command](t,e,n):a.default(t,e,n)},h=function(t,e){return function(n){var i="object"==typeof n?t.map((function(t){return n[t]})):arguments;return e.apply(null,i)}},c=function(e){return t((r=e,(a=(i=n).slice(0,i.length)).push(r),a));var i,r,a};return{moveto:h(["x","y"],(function(t,e){return c({command:"M",params:[t,e]})})),lineto:h(["x","y"],(function(t,e){return c({command:"L",params:[t,e]})})),hlineto:h(["x"],(function(t){return c({command:"H",params:[t]})})),vlineto:h(["y"],(function(t){return c({command:"V",params:[t]})})),closepath:function(){return c({command:"Z",params:[]})},curveto:h(["x1","y1","x2","y2","x","y"],(function(t,e,n,i,r,a){return c({command:"C",params:[t,e,n,i,r,a]})})),smoothcurveto:h(["x2","y2","x","y"],(function(t,e,n,i){return c({command:"S",params:[t,e,n,i]})})),qcurveto:h(["x1","y1","x","y"],(function(t,e,n,i){return c({command:"Q",params:[t,e,n,i]})})),smoothqcurveto:h(["x","y"],(function(t,e){return c({command:"T",params:[t,e]})})),arc:h(["rx","ry","xrot","largeArcFlag","sweepFlag","x","y"],(function(t,e,n,i,r,a,s){return c({command:"A",params:[t,e,n,i,r,a,s]})})),translate:h(["dx","dy"],(function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],i=arguments.length<=1||void 0===arguments[1]?0:arguments[1];if(0===e&&0===i)return t(n);var r,a,h,c=(r=[0,0],a=[1,0,0,1,e,i],h=n.map((function(t){var e=o(t,a,r);return r=s(t,r),e})),{v:t(h)});return"object"==typeof c?c.v:void 0})),rotate:h(["angle","rx","ry"],(function(e){var i=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2];if(0===e)return t(n);var a=function(){var a=void 0,h=void 0,c=n;0!==i&&0!==r&&(a=[0,0],h=[1,0,0,1,-i,-r],c=c.map((function(t){var e=o(t,h,a);return a=s(t,a),e})));var l=e*Math.PI/180,u=Math.cos(l),g=Math.sin(l);return a=[0,0],h=[u,g,-g,u,0,0],c=c.map((function(t){var e=o(t,h,a);return a=s(t,a),e})),0!==i&&0!==r&&(a=[0,0],h=[1,0,0,1,i,r],c=c.map((function(t){var e=o(t,h,a);return a=s(t,a),e}))),{v:t(c)}}();return"object"==typeof a?a.v:void 0})),scale:h(["sx","sy"],(function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],i=arguments.length<=1||void 0===arguments[1]?e:arguments[1];return function(){if(1===e&&1===i)return t(n);var r,a,h,c=(r=[0,0],a=[e,0,0,i,0,0],h=n.map((function(t){var e=o(t,a,r);return r=s(t,r),e})),{v:t(h)});return"object"==typeof c?c.v:void 0}()})),shearX:h(["angle"],(function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0];if(0===e)return t(n);var i,r,a,h=(i=[0,0],r=[1,0,Math.tan(e*Math.PI/180),1,0,0],a=n.map((function(t){var e=o(t,r,i);return i=s(t,i),e})),{v:t(a)});return"object"==typeof h?h.v:void 0})),shearY:h(["angle"],(function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0];if(0===e)return t(n);var i,r,a,h=(i=[0,0],r=[1,Math.tan(e*Math.PI/180),0,1,0,0],a=n.map((function(t){var e=o(t,r,i);return i=s(t,i),e})),{v:t(a)});return"object"==typeof h?h.v:void 0})),print:function(){return n.map(a).join(" ")},toString:function(){return(void 0).print()},points:function(){var t=[],e=[0,0],i=!0,r=!1,a=void 0;try{for(var o,h=n[Symbol.iterator]();!(i=(o=h.next()).done);i=!0){var c=o.value,l=s(c,e);e=l,l&&t.push(l)}}catch(t){r=!0,a=t}finally{try{!i&&h.return&&h.return()}finally{if(r)throw a}}return t},instructions:function(){return n.slice(0,n.length)},connect:function(e){var r,a,s,o,h,c,l,u=this.points(),g=u[u.length-1],d=e.points()[0],p=void 0;return"Z"!==n[n.length-1].command?(p=e.instructions().slice(1),r=d,s=(a=i(g,2))[0],o=a[1],c=(h=i(r,2))[0],l=h[1],(s!==c||o!==l)&&p.unshift({command:"L",params:d})):p=e.instructions(),t(this.instructions().concat(p))}}};e.default=function(){return a()},t.exports=e.default}}]);