{"version":3,"sources":["components/Home/index.js"],"names":["Home","useContext","StoreContext","state","actions","squeaks","session","useEffect","window","scrollTo","reloadSqueaks","clearSqueaks","getSqueaks","lastSqueak","className","map","t","squeak","key","getSqueakHash","id","user","getAuthor","length","loading","onClick","squeakLst","slice","getMoreSqueaks"],"mappings":"kJAAA,0FAmEeA,UAtDF,WAAO,IAAD,EACYC,qBAAWC,KAA9BC,EADO,EACPA,MAAOC,EADA,EACAA,QACPC,EAAqBF,EAArBE,QAASC,EAAYH,EAAZG,QACjBC,qBAAU,WACNC,OAAOC,SAAS,EAAG,GAEnBC,MACD,IAEH,IAcMA,EAAgB,WAClBN,EAAQO,eACRP,EAAQQ,WAAW,CAACC,WAAY,QAGpC,OACI,yBAAKC,UAAU,gBACX,yBAAKA,UAAU,uBACX,wBAAIA,UAAU,eAAd,mBAIHR,EAAU,kBAAC,IAAD,MAAiB,KAC5B,yBAAKQ,UAAU,yBACdT,EAAQU,KAAI,SAAAC,GACT,OAAO,kBAAC,IAAD,CAAYC,OAAQD,EAAGE,IAAKF,EAAEG,gBAAiBC,GAAIJ,EAAEG,gBAAiBE,KAAML,EAAEM,iBAIxFjB,EAAQkB,OAAS,GAChB,oCACCpB,EAAMqB,QAAU,kBAAC,IAAD,MAAa,yBAAKC,QAAS,kBA1B/B,WACnB,IAVmBC,EAUfb,EATW,OADIa,EAUYrB,IAPN,IAArBqB,EAAUH,OADP,KAIFG,EAAUC,OAAO,GAAG,GAKzBvB,EAAQQ,WAAW,CAACC,WAAYA,IAwBwBe,IAAkBd,UAAU,qCAAhD","file":"static/js/3.686cdeb7.chunk.js","sourcesContent":["import React, { useEffect, useState, useContext, useRef } from 'react'\r\nimport { StoreContext } from '../../store/store'\r\nimport './style.scss'\r\nimport axios from 'axios'\r\nimport ContentEditable from 'react-contenteditable'\r\nimport { ICON_IMGUPLOAD } from '../../Icons'\r\nimport { Link } from 'react-router-dom'\r\nimport { API_URL } from '../../config'\r\nimport Loader from '../Loader'\r\nimport SqueakCard from '../SqueakCard'\r\nimport MakeSqueak from '../MakeSqueak'\r\n\r\n\r\nconst Home = () => {\r\n    const { state, actions } = useContext(StoreContext)\r\n    const { squeaks, session } = state\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0)\r\n        // actions.getSqueaks({lastSqueak: null})\r\n        reloadSqueaks();\r\n    }, [])\r\n\r\n    const getLastSqueak = (squeakLst) => {\r\n      if (squeakLst == null) {\r\n        return null;\r\n      } if (squeakLst.length === 0) {\r\n        return null;\r\n      }\r\n      return squeakLst.slice(-1)[0];\r\n    };\r\n\r\n    const getMoreSqueaks = () => {\r\n        let lastSqueak = getLastSqueak(squeaks);\r\n        actions.getSqueaks({lastSqueak: lastSqueak});\r\n    }\r\n\r\n    const reloadSqueaks = () => {\r\n        actions.clearSqueaks();\r\n        actions.getSqueaks({lastSqueak: null});\r\n    }\r\n\r\n    return (\r\n        <div className=\"Home-wrapper\">\r\n            <div className=\"Home-header-wrapper\">\r\n                <h2 className=\"Home-header\">\r\n                    Latest Squeaks\r\n                </h2>\r\n            </div>\r\n            {session ? <MakeSqueak /> : null }\r\n            <div className=\"Squeak-input-divider\"></div>\r\n            {squeaks.map(t => {\r\n                return <SqueakCard squeak={t} key={t.getSqueakHash()} id={t.getSqueakHash()} user={t.getAuthor()} />\r\n            })}\r\n\r\n            {/* TODO: fix get loading state by doing this: https://medium.com/stashaway-engineering/react-redux-tips-better-way-to-handle-loading-flags-in-your-reducers-afda42a804c6 */}\r\n            {squeaks.length > 0 &&\r\n              <>\r\n              {state.loading ? <Loader /> : <div onClick={() => getMoreSqueaks()} className='squeak-btn-side squeak-btn-active'>\r\n                  Load more\r\n              </div>}\r\n              </>\r\n            }\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n"],"sourceRoot":""}