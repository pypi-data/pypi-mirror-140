"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[8579],{3694:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var o=n(36513),a=n(2484),r=n(15685),i=n(49748),s=n(41465),l=n(73112),d=n(47582),c=n(2361),p=n(7144),u=n(62562),m=n(18349),g=n(74547),b=n(18108),h=n(28877);const v=new RegExp("/(notebooks|edit)/(.*)"),x=/\.ipynb$/;var f;!function(e){e.toggleTop="application:toggle-top",e.toggleZen="application:toggle-zen",e.openLab="application:open-lab",e.openTree="application:open-tree",e.rename="application:rename",e.resolveTree="application:resolve-tree"}(f||(f={}));const w={id:"@retrolab/application-extension:dirty",autoStart:!0,requires:[o.ILabStatus,p.ITranslator],activate:(e,t,n)=>{if(!(e instanceof u.RetroApp))throw new Error(`${w.id} must be activated in RetroLab.`);const o=n.load("retrolab").__("Are you sure you want to exit RetroLab?\n\nAny unsaved changes will be lost.");window.addEventListener("beforeunload",(t=>{if(e.status.isDirty)return t.returnValue=o}))}},R={id:"@retrolab/application-extension:logo",autoStart:!0,activate:e=>{const t=i.PageConfig.getBaseUrl(),n=document.createElement("a");n.href=`${t}retro/tree`,n.target="_blank",n.rel="noopener noreferrer";const o=new h.Widget({node:n});m.jupyterIcon.element({container:n,elementPosition:"center",padding:"2px 2px 2px 8px",height:"28px",width:"auto"}),o.id="jp-RetroLogo",e.shell.add(o,"top",{rank:0})}},C={id:"@retrolab/application-extension:opener",autoStart:!0,requires:[o.IRouter,s.IDocumentManager],activate:(e,t,n)=>{const{commands:o}=e,a="router:tree";o.addCommand(a,{execute:t=>{var o;const a=null!==(o=t.path.match(v))&&void 0!==o?o:[],[,,r]=a;if(!r)return;const s=decodeURIComponent(r),l=i.PathExt.extname(s);e.restored.then((async()=>{".ipynb"===l?n.open(s,"Notebook",void 0,{ref:"_noref"}):n.open(s,"Editor",void 0,{ref:"_noref"})}))}}),t.register({command:a,pattern:v})}},I={id:"@retrolab/application-extension:menus",requires:[d.IMainMenu],autoStart:!0,activate:(e,t)=>{switch(t.tabsMenu.dispose(),i.PageConfig.getOption("retroPage")){case"consoles":case"terminals":case"tree":t.editMenu.dispose(),t.kernelMenu.dispose(),t.runMenu.dispose();break;case"edit":t.kernelMenu.dispose(),t.runMenu.dispose()}}},S={id:"@retrolab/application-extension:pages",autoStart:!0,requires:[p.ITranslator],optional:[a.ICommandPalette,d.IMainMenu],activate:(e,t,n,o)=>{const a=t.load("retrolab"),r=i.PageConfig.getBaseUrl();e.commands.addCommand(f.openLab,{label:a.__("Open JupyterLab"),execute:()=>{window.open(`${r}lab`)}}),e.commands.addCommand(f.openTree,{label:a.__("Open Files"),execute:()=>{window.open(`${r}retro/tree`)}}),n&&[f.openLab,f.openTree].forEach((e=>{n.addItem({command:e,category:"View"})})),o&&o.viewMenu.addGroup([{command:f.openLab},{command:f.openTree}],0)}},E={id:"@retrolab/application-extension:paths",autoStart:!0,provides:o.JupyterFrontEnd.IPaths,activate:e=>{if(!(e instanceof u.RetroApp))throw new Error(`${E.id} must be activated in RetroLab.`);return e.paths}},T={id:"@retrolab/application-extension:router",autoStart:!0,provides:o.IRouter,requires:[o.JupyterFrontEnd.IPaths],activate:(e,t)=>{const{commands:n}=e,a=t.urls.base,r=new o.Router({base:a,commands:n});return e.started.then((()=>{r.route(),window.addEventListener("popstate",(()=>{r.route()}))})),r}},P={id:"@retrolab/application-extension:session-dialogs",provides:a.ISessionContextDialogs,autoStart:!0,activate:()=>a.sessionContextDialogs},M={id:"@retrolab/application-extension:shell",activate:e=>{if(!(e.shell instanceof u.RetroShell))throw new Error(`${M.id} did not find a RetroShell instance.`);return e.shell},autoStart:!0,provides:u.IRetroShell},y={id:"@retrolab/application-extension:spacer",autoStart:!0,activate:e=>{const t=new h.Widget;t.id=a.DOMUtils.createDomID(),t.addClass("jp-RetroSpacer"),e.shell.add(t,"top",{rank:900});const n=new h.Widget;n.id=a.DOMUtils.createDomID(),n.addClass("jp-RetroSpacer"),e.shell.add(n,"menu",{rank:900})}},L={id:"@retrolab/application-extension:status",autoStart:!0,provides:o.ILabStatus,activate:e=>{if(!(e instanceof u.RetroApp))throw new Error(`${L.id} must be activated in RetroLab.`);return e.status}},_={id:"@retrolab/application-extension:tab-title",autoStart:!0,requires:[u.IRetroShell],activate:(e,t)=>{const n=()=>{const e=t.currentWidget;if(e instanceof r.ConsolePanel){const t=()=>{const t=e.sessionContext.path||e.sessionContext.name,n=i.PathExt.basename(t);document.title=n.replace(x,"")};return e.sessionContext.sessionChanged.connect(t),void t()}if(e instanceof l.DocumentWidget){const t=()=>{const t=i.PathExt.basename(e.context.path);document.title=t.replace(x,"")};e.context.pathChanged.connect(t),t()}};t.currentChanged.connect(n),n()}},D={id:"@retrolab/application-extension:title",autoStart:!0,requires:[u.IRetroShell,p.ITranslator],optional:[s.IDocumentManager,o.IRouter],activate:(e,t,n,o,a)=>{const{commands:r}=e,d=n.load("retrolab"),c=new h.Widget;c.id="jp-title",e.shell.add(c,"top",{rank:10});const p=async()=>{const e=t.currentWidget;if(!(e&&e instanceof l.DocumentWidget))return;if(c.node.children.length>0)return;const n=document.createElement("h1");if(n.textContent=e.title.label.replace(x,""),c.node.appendChild(n),c.node.style.marginLeft="10px",!o)return;const p=()=>{const{currentWidget:e}=t;return!(!e||!o.contextForWidget(e))};r.addCommand(f.rename,{label:()=>d.__("Renameâ€¦"),isEnabled:p,execute:async()=>{var t,r;if(!p())return;const l=await(0,s.renameDialog)(o,e.context.path);if(e&&e.activate(),null===l)return;const d=null!==(t=e.context.path)&&void 0!==t?t:l.path,c=i.PathExt.basename(d);if(n.textContent=c.replace(x,""),!a)return;const u=null!==(r=a.current.path.match(v))&&void 0!==r?r:[],[,m,g]=u;if(!m||!g)return;const b=encodeURIComponent(d);a.navigate(`/retro/${m}/${b}`,{skipRouting:!0})}}),c.node.onclick=async()=>{r.execute(f.rename)}};t.currentChanged.connect(p),p()}},k={id:"@retrolab/application-extension:top",requires:[u.IRetroShell,p.ITranslator],optional:[d.IMainMenu,c.ISettingRegistry],activate:(e,t,n,o,a)=>{const r=n.load("retrolab"),i=t.top,s=k.id;e.commands.addCommand(f.toggleTop,{label:r.__("Show Header"),execute:()=>{i.setHidden(i.isVisible),a&&a.set(s,"visible",i.isVisible)},isToggled:()=>i.isVisible}),o&&o.viewMenu.addGroup([{command:f.toggleTop}],2);let l=!1;if(a){const t=a.load(s),n=e=>{const t=e.get("visible").composite;void 0!==e.user.visible&&(l=!0,i.setHidden(!t))};Promise.all([t,e.restored]).then((([e])=>{n(e),e.changed.connect((e=>{n(e)}))})).catch((e=>{console.error(e.message)}))}e.formatChanged.connect((()=>{l||("desktop"===e.format?t.expandTop():t.collapseTop())}))},autoStart:!0},U={id:"@retrolab/application-extension:tree-resolver",autoStart:!0,requires:[o.IRouter],provides:o.JupyterFrontEnd.ITreeResolver,activate:(e,t)=>{const{commands:n}=e,o=new b.DisposableSet,a=new g.PromiseDelegate,r=new RegExp("/retro(/tree/.*)?");o.add(n.addCommand(f.resolveTree,{execute:async e=>{var t;if(o.isDisposed)return;const n=i.URLExt.queryStringToObject(null!==(t=e.search)&&void 0!==t?t:""),r=n["file-browser-path"]||"";delete n["file-browser-path"],o.dispose(),a.resolve({browser:r,file:i.PageConfig.getOption("treePath")})}})),o.add(t.register({command:f.resolveTree,pattern:r}));const s=()=>{o.isDisposed||(o.dispose(),a.resolve(null))};return t.routed.connect(s),o.add(new b.DisposableDelegate((()=>{t.routed.disconnect(s)}))),{paths:a.promise}}},O={id:"@retrolab/application-extension:tree-updater",requires:[o.IRouter],provides:o.ITreePathUpdater,activate:(e,t)=>function(e){if(e!==i.PageConfig.getOption("treePath")){const n=i.URLExt.join(i.PageConfig.getOption("baseUrl")||"/","retro","tree",i.URLExt.encodeParts(e));t.navigate(n,{skipRouting:!0}),i.PageConfig.setOption("treePath",e)}},autoStart:!0},q={id:"@retrolab/application-extension:zen",autoStart:!0,requires:[p.ITranslator],optional:[a.ICommandPalette,u.IRetroShell,d.IMainMenu],activate:(e,t,n,o,a)=>{const{commands:r}=e,i=document.documentElement,s=t.load("retrolab"),l=()=>{null==o||o.expandTop(),null==o||o.menu.setHidden(!1),d=!1};let d=!1;r.addCommand(f.toggleZen,{label:s.__("Toggle Zen Mode"),execute:()=>{d?(document.exitFullscreen(),l()):(i.requestFullscreen(),null==o||o.collapseTop(),null==o||o.menu.setHidden(!0),d=!0)}}),document.addEventListener("fullscreenchange",(()=>{document.fullscreenElement||l()})),n&&n.addItem({command:f.toggleZen,category:"Mode"}),a&&a.viewMenu.addGroup([{command:f.toggleZen}],3)}},W=[w,R,I,C,S,E,T,P,M,y,L,_,D,k,U,O,q]}}]);