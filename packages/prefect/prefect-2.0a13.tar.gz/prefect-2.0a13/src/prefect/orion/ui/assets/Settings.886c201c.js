var F=Object.defineProperty,B=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var O=(e,t,s)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,C=(e,t)=>{for(var s in t||(t={}))z.call(t,s)&&O(e,s,t[s]);if(I)for(var s of I(t))K.call(t,s)&&O(e,s,t[s]);return e},w=(e,t)=>B(e,U(t));var _=(e,t,s)=>(O(e,typeof t!="symbol"?t+"":t,s),s);import{O as x,V as R,r as S,o as r,h as P,w as y,d as o,t as p,c as l,C as g,E as A,F as b,p as E,b as q,a as $,i as N,I as v}from"./vendor.e30a69e6.js";import{_ as T,A as D,E as k}from"./index.e1930792.js";var G=Object.defineProperty,H=Object.getOwnPropertyDescriptor,J=(e,t,s,a)=>{for(var n=a>1?void 0:a?H(t,s):t,i=e.length-1,c;i>=0;i--)(c=e[i])&&(n=(a?c(t,s,n):c(n))||n);return a&&n&&G(t,s,n),n};const Q=["cancelled","completed","failed","pending","running","scheduled"],L="orion-color-mode";let j=class extends R{constructor(){super(...arguments);_(this,"colorMode",localStorage.getItem(L)||"Default");_(this,"colorModes",["Default","Achromatomaly","Achromatopsia","Protanomaly","Protaponia","Deuteranomaly","Deuteranopia","Tritanomaly","Tritanopia"]);_(this,"colorMap",{})}showToast(e){this.$toast(w(C({},e),{timeout:1e4}))}mounted(){const e=window.getComputedStyle(document.documentElement);this.colorModes.forEach(t=>{const s=t.toLowerCase();this.colorMap[t]=[],Q.forEach(a=>{const n=`--${a}-${s}`,i=e.getPropertyValue(n);i&&this.colorMap[t].push(i)})})}};j=J([x({components:{},watch:{colorMode(e){localStorage.setItem(L,e),document.body.classList.forEach(s=>{s.includes("-color-mode")&&document.body.classList.remove(s)}),document.body.classList.add(`${e.toLowerCase()}-color-mode`),this.showToast({type:"success",message:"Color theme saved"})}}})],j);const W=j,X=e=>(E("data-v-ed8cfeba"),e=e(),q(),e),Y={class:"theme-option d-flex align-center"},Z=X(()=>o("i",{class:"pi pi-palette-line mr-1"},null,-1)),ee={class:"theme-option__label"},te={class:"theme-palette ml-auto"},se={class:"theme-option d-flex align-center"},oe={class:"theme-option__label"},ne={class:"theme-palette ml-auto"};function ae(e,t,s,a,n,i){const c=S("m-simple-select");return r(),P(c,{modelValue:e.colorMode,"onUpdate:modelValue":t[0]||(t[0]=d=>e.colorMode=d),options:e.colorModes,search:""},{"selected-option-label":y(({label:d})=>[o("div",Y,[Z,o("span",ee,p(d),1),o("div",te,[(r(!0),l(b,null,g(e.colorMap[e.colorMode],u=>(r(),l("div",{key:u,class:"palette-option",style:A({"background-color":u})},null,4))),128))])])]),"option-label":y(({label:d})=>[o("div",se,[o("span",oe,p(d),1),o("div",ne,[(r(!0),l(b,null,g(e.colorMap[d],u=>(r(),l("div",{key:u,class:"palette-option",style:A({"background-color":u})},null,4))),128))])])]),_:1},8,["modelValue","options"])}var re=T(W,[["render",ae],["__scopeId","data-v-ed8cfeba"]]);var le=Object.defineProperty,ie=Object.getOwnPropertyDescriptor,ce=(e,t,s,a)=>{for(var n=a>1?void 0:a?ie(t,s):t,i=e.length-1,c;i>=0;i--)(c=e[i])&&(n=(a?c(t,s,n):c(n))||n);return a&&n&&le(t,s,n),n};let V=class extends R{constructor(){super(...arguments);_(this,"queries",{settings:D.query({endpoint:k.settings}),version:D.query({endpoint:k.version})});_(this,"resetDatabaseConfirmation","");_(this,"showResetSection",!1)}get settings(){return this.queries.settings.response}get version(){return this.queries.version.response}get settingsSections(){if(!this.settings)return[];const e=w(C({},this.settings),{base:{}});return Object.entries(e).forEach(([t,s])=>{this.objectCheck(s)?e[t]=s:(e.base[t]=s,delete e[t])}),this.flatten(Object.entries(e)).sort((t,s)=>t.key.toUpperCase().localeCompare(s.key.toUpperCase()))}async resetDatabase(){const e=await D.query({endpoint:k.database_clear,body:{confirm:!0}}).fetch();this.showToast({type:e.error?"error":"success",message:e.error?e.error:"Database reset"})}showToast(e){this.$toast(w(C({},e),{timeout:5e3}))}objectCheck(e){return e&&typeof e=="object"&&!Array.isArray(e)}flatten(e){return e.reduce((t,[s,a])=>{const n={key:s,content:void 0};return this.objectCheck(a)?n.content=this.flatten(Object.entries(a)):n.content=a,t.push(n),t},[])}};V=ce([x({components:{StateColorModeSelector:re}})],V);const de=V,h=e=>(E("data-v-4ff04c1c"),e=e(),q(),e),pe={class:"d-flex align-center justify-space-between mt-2"},ue=h(()=>o("span",{class:"d-flex align-center"},[o("i",{class:"pi pi-settings-3-line pi-2x text--grey-40"}),o("h1",{class:"ml-1"},"Settings")],-1)),me={class:"font-weight-semibold"},_e=h(()=>o("span",{class:"text--grey-40"},"Orion Version:",-1)),he={class:"ml-1"},fe={class:"mt-4"},ye=h(()=>o("h3",{class:"font-weight-semibold my-1"}," Color theme ",-1)),ge={class:"font-weight-semibold setting--section-title my-1"},be={class:"setting--section-content font--secondary caption"},ve={class:"pa-2"},Ce={key:0},we={class:"ml-1"},Se={key:1},$e={class:"ml-1"},Me={class:"my-4"},Oe=h(()=>o("h3",{class:"font-weight-semibold"}," Reset database ",-1)),De=h(()=>o("div",{class:"d-flex align-end my-1 text--error"},[o("i",{class:"pi pi-error-warning-line pi-lg"}),o("span",{class:"ml-1"}," Resetting the database will permanently delete all data stored in Orion ")],-1)),ke=v(" Reset "),je={key:1},Ve=h(()=>o("div",null," Are you sure you want to permanently delete your data? ",-1)),Ie=h(()=>o("div",null,[v(" If so, type the word "),o("span",{class:"text--error"},"CONFIRM"),v(" to proceed. ")],-1)),xe=v(" Reset Database "),Re=v(" Cancel ");function Pe(e,t,s,a,n,i){const c=S("StateColorModeSelector"),d=S("m-button"),u=S("m-input");return r(),l("div",null,[o("header",pe,[ue,o("span",me,[_e,o("span",he,p(e.version),1)])]),o("section",fe,[ye,$(c)]),(r(!0),l(b,null,g(e.settingsSections,m=>(r(),l("section",{key:m.label,class:"mt-4 setting--section my-2"},[o("h3",ge,p(m.key),1),o("section",be,[o("div",ve,[(r(!0),l(b,null,g(m.content,f=>(r(),l("div",{key:f.key},[Array.isArray(f.content)?(r(),l("div",Ce,[(r(!0),l(b,null,g(f.content,M=>(r(),l("section",{key:M.key,class:"setting--section-subsection"},[o("span",null,p(M.key)+":",1),o("span",we,p(M.content),1)]))),128))])):(r(),l("div",Se,[o("span",null,p(f.key)+":",1),o("span",$e,p(f.content),1)]))]))),128))])])]))),128)),o("section",Me,[Oe,De,e.showResetSection?N("",!0):(r(),P(d,{key:0,color:"delete",height:"36px",width:"100px",class:"mt-1",miter:"",onClick:t[0]||(t[0]=m=>e.showResetSection=!0)},{default:y(()=>[ke]),_:1})),e.showResetSection?(r(),l("section",je,[Ve,Ie,$(u,{modelValue:e.resetDatabaseConfirmation,"onUpdate:modelValue":t[1]||(t[1]=m=>e.resetDatabaseConfirmation=m),placeholder:"CONFIRM",class:"my-2",style:{"max-width":"400px"}},null,8,["modelValue"]),o("div",null,[$(d,{color:"delete",height:"36px",disabled:e.resetDatabaseConfirmation!=="CONFIRM",miter:"",onClick:e.resetDatabase},{default:y(()=>[xe]),_:1},8,["disabled","onClick"]),$(d,{color:"secondary",height:"36px",width:"100px",class:"ml-2",miter:"",onClick:t[2]||(t[2]=m=>e.showResetSection=!1)},{default:y(()=>[Re]),_:1})])])):N("",!0)])])}var Ne=T(de,[["render",Pe],["__scopeId","data-v-4ff04c1c"]]);export{Ne as default};
