import{e as D,a2 as E,u as S,k as x,l as f,au as T,f as o,av as z,ao as W,aw as $,r as g,o as i,c as p,d as _,a as B,g as s,F as L,am as R,t as M,h as U,w as G,ax as H,i as m,n as J,I as k}from"./vendor.e30a69e6.js";import{_ as K,A as v,E as C}from"./index.e1930792.js";const O={key:0,class:"text-truncate d-flex align-center"},Q={class:"ml-5"},X=k(" Flow Version: "),Y={class:"font-weight-semibold"},Z=k(" Copy Run ID "),ee=D({async setup(te){let r,w;const h=E(),t=S(),P=x(null),a=x(t==null?void 0:t.params.id),F=f(t,()=>{a.value=t==null?void 0:t.params.id});T(()=>{F()});const q=o(()=>{var e;return(e=n.value.flow_version)!=null?e:"--"}),I=o(()=>({id:a.value})),l=([r,w]=z(()=>v.query({endpoint:C.flow_run,body:I,options:{pollInterval:5e3}}).fetch()),r=await r,w(),r),V=o(()=>({id:l.response.value.flow_id})),y={flow:v.query({endpoint:C.flow,body:V})},j=o(()=>{var e;return((e=y.flow.response)==null?void 0:e.value)||{}}),n=o(()=>{var e;return((e=l.response)==null?void 0:e.value)||{}}),A=o(()=>{var c,b;const e=[{text:(c=j.value)==null?void 0:c.name},{text:(b=n.value)==null?void 0:b.name,to:""}],d=t.fullPath.includes("/timeline"),u=t.fullPath.includes("/radar");return(d||u)&&(e[1].to=`/flow-run/${a.value}`,d&&e.push({text:"Timeline"}),u&&e.push({text:"Radar"})),e});W(()=>{l.stopPolling(),v.queries.delete(l.id)}),$(()=>{var e;P.value=((e=t.hash)==null?void 0:e.substr(1))||"task_runs"}),f(a,()=>{!a.value||y.flow.fetch()});const N=f(()=>n.value,()=>{n.value.name&&h.all.length==0&&(h.replaceAll([{object:"flow_run",property:"name",type:"string",operation:"equals",value:n.value.name}]),N())});return(e,d)=>{const u=g("bread-crumbs"),c=g("router-view");return i(),p("div",null,[_("div",{class:J(["d-flex align-center justify-space-between mb-2 py-1 position-relative z-1",{blur:s(t).fullPath.includes("/radar")}])},[B(u,{class:"flex-grow-1",crumbs:s(A),icon:"pi-flow-run"},null,8,["crumbs"]),s(t).fullPath.includes("/radar")?(i(),p(L,{key:0},[s(R).sm?(i(),p("div",O,[_("span",Q,[X,_("span",Y,M(s(q)),1)]),s(R).md?(i(),U(s(H),{key:0,class:"ml-1",value:a.value,toast:"Run ID was copied to clipboard"},{default:G(()=>[Z]),_:1},8,["value"])):m("",!0)])):m("",!0)],64)):m("",!0)],2),B(c)])}}});var oe=K(ee,[["__scopeId","data-v-5efcccc0"]]);export{oe as default};
