"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[3535],{3535:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var n,a=r(943323),o=r(20720);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const i=(0,a.Z)(o.Z),c=i;var s,u;(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&s.register(i,"default","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/ReactTreemap.js"),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)},20720:(e,t,r)=>{r.d(t,{Z:()=>H});var n=r(644059),a=r(694017);function o(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function i(e,t,r,n,a){for(var o,i=e.children,c=-1,s=i.length,u=e.value&&(n-t)/e.value;++c<s;)(o=i[c]).y0=r,o.y1=a,o.x0=t,o.x1=t+=o.value*u}function c(e,t,r,n,a){for(var o,i=e.children,c=-1,s=i.length,u=e.value&&(a-r)/e.value;++c<s;)(o=i[c]).x0=t,o.x1=n,o.y0=r,o.y1=r+=o.value*u}const s=function e(t){function r(e,r,n,a,o){!function(e,t,r,n,a,o){for(var s,u,l,d,p,h,f,g,m,v,y,_=[],b=t.children,x=0,L=0,P=b.length,M=t.value;x<P;){l=a-r,d=o-n;do{p=b[L++].value}while(!p&&L<P);for(h=f=p,y=p*p*(v=Math.max(d/l,l/d)/(M*e)),m=Math.max(f/y,y/h);L<P;++L){if(p+=u=b[L].value,u<h&&(h=u),u>f&&(f=u),y=p*p*v,(g=Math.max(f/y,y/h))>m){p-=u;break}m=g}_.push(s={value:p,dice:l<d,children:b.slice(x,L)}),s.dice?i(s,r,n,a,M?n+=d*p/M:o):c(s,r,n,M?r+=l*p/M:a,o),M-=p,x=L}}(t,e,r,n,a,o)}return r.ratio=function(t){return e((t=+t)>1?t:1)},r}((1+Math.sqrt(5))/2);function u(e){if("function"!=typeof e)throw new Error;return e}function l(){return 0}function d(e){return function(){return e}}var p,h=r(671939),f=r(45697),g=r.n(f),m=r(767190),v=r(328062);e=r.hmd(e),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&p(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const y=e=>()=>e().apply(void 0,arguments),_=g().shape({name:g().string,value:g().number.isRequired}),b={name:g().string,children:g().arrayOf(g().oneOfType([g().shape(y((()=>b))),_]))},x=g().oneOfType([g().shape(b),_]),L={data:g().arrayOf(x),width:g().number,height:g().number,colorScheme:g().string,margin:g().shape({top:g().number,right:g().number,bottom:g().number,left:g().number}),numberFormat:g().string,treemapRatio:g().number};function P(e){return function(t){var r;(r=t.ancestors().map((e=>e.node)),"string"==typeof r?new n.Y1([document.querySelectorAll(r)],[document.documentElement]):new n.Y1([null==r?[]:r],n.Jz)).classed("node--hover",e).select("rect").attr("width",(t=>t.x1-t.x0-e)).attr("height",(t=>t.y1-t.y0-e))}}function M(e,t){const{data:r,width:n,height:i,numberFormat:c,colorScheme:p,treemapRatio:f}=t,g=(0,a.Z)(e);g.classed("superset-legacy-chart-treemap",!0);const y=(0,m.JB)(c),_=v.getScale(p),b=r;if(g.selectAll("*").remove(),b.length>0){const[e]=b,t=function(){var e=s,t=!1,r=1,n=1,a=[0],i=l,c=l,p=l,h=l,f=l;function g(e){return e.x0=e.y0=0,e.x1=r,e.y1=n,e.eachBefore(m),a=[0],t&&e.eachBefore(o),e}function m(t){var r=a[t.depth],n=t.x0+r,o=t.y0+r,s=t.x1-r,u=t.y1-r;s<n&&(n=s=(n+s)/2),u<o&&(o=u=(o+u)/2),t.x0=n,t.y0=o,t.x1=s,t.y1=u,t.children&&(r=a[t.depth+1]=i(t)/2,n+=f(t)-r,o+=c(t)-r,(s-=p(t)-r)<n&&(n=s=(n+s)/2),(u-=h(t)-r)<o&&(o=u=(o+u)/2),e(t,n,o,s,u))}return g.round=function(e){return arguments.length?(t=!!e,g):t},g.size=function(e){return arguments.length?(r=+e[0],n=+e[1],g):[r,n]},g.tile=function(t){return arguments.length?(e=u(t),g):e},g.padding=function(e){return arguments.length?g.paddingInner(e).paddingOuter(e):g.paddingInner()},g.paddingInner=function(e){return arguments.length?(i="function"==typeof e?e:d(+e),g):i},g.paddingOuter=function(e){return arguments.length?g.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):g.paddingTop()},g.paddingTop=function(e){return arguments.length?(c="function"==typeof e?e:d(+e),g):c},g.paddingRight=function(e){return arguments.length?(p="function"==typeof e?e:d(+e),g):p},g.paddingBottom=function(e){return arguments.length?(h="function"==typeof e?e:d(+e),g):h},g.paddingLeft=function(e){return arguments.length?(f="function"==typeof e?e:d(+e),g):f},g}().size([n,i]).paddingOuter(3).paddingTop(19).paddingInner(1).tile(s.ratio(f)).round(!0),r=t((0,h.ZP)(e).sum((e=>e.value)).sort(((e,t)=>t.height-e.height||t.value-e.value))),a=g.append("svg").attr("class","treemap").attr("width",n).attr("height",i).selectAll(".node").data(r.descendants()).enter().append("g").attr("transform",(e=>`translate(${e.x0},${e.y0})`)).attr("class","node").each((function(e){e.node=this})).on("mouseover",P(!0)).on("mouseout",P(!1));a.append("rect").attr("id",(e=>`rect-${e.data.name}`)).attr("width",(e=>e.x1-e.x0)).attr("height",(e=>e.y1-e.y0)).style("fill",(e=>_(e.depth))),a.append("clipPath").attr("id",(e=>`clip-${e.data.name}`)).append("use").attr("xlink:href",(e=>`#rect-${e.data.name}`));const c=a.append("text").attr("clip-path",(e=>`url(#clip-${e.data.name})`));c.filter((e=>e.children)).selectAll("tspan").data((e=>e.data.name.slice(Math.max(0,e.data.name.lastIndexOf(".")+1)).split(/(?=[A-Z][^A-Z])/g).concat(`Â ${y(e.value)}`))).enter().append("tspan").attr("x",((e,t)=>t?null:4)).attr("y",13).text((e=>e)),c.filter((e=>!e.children)).selectAll("tspan").data((e=>e.data.name.slice(Math.max(0,e.data.name.lastIndexOf(".")+1)).split(/(?=[A-Z][^A-Z])/g).concat(y(e.value)))).enter().append("tspan").attr("x",4).attr("y",((e,t)=>13+10*t)).text((e=>e)),a.append("title").text((e=>`${e.data.name}\n${y(e.value)}`))}}M.displayName="Treemap",M.propTypes=L;const T=M,H=T;var w,G;(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(y,"lazyFunction","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),w.register(_,"leafType","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),w.register(b,"parentShape","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),w.register(x,"nodeType","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),w.register(L,"propTypes","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),w.register(P,"hovered","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),w.register(M,"Treemap","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js"),w.register(T,"default","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-treemap/src/Treemap.js")),(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&G(e)},671939:(e,t,r)=>{function n(e){var t=0,r=e.children,n=r&&r.length;if(n)for(;--n>=0;)t+=r[n].value;else t=1;e.value=t}function a(e,t){var r,n,a,i,u,l=new s(e),d=+e.value&&(l.value=e.value),p=[l];for(null==t&&(t=o);r=p.pop();)if(d&&(r.value=+r.data.value),(a=t(r.data))&&(u=a.length))for(r.children=new Array(u),i=u-1;i>=0;--i)p.push(n=r.children[i]=new s(a[i])),n.parent=r,n.depth=r.depth+1;return l.eachBefore(c)}function o(e){return e.children}function i(e){e.data=e.data.data}function c(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function s(e){this.data=e,this.depth=this.height=0,this.parent=null}r.d(t,{ZP:()=>a}),s.prototype=a.prototype={constructor:s,count:function(){return this.eachAfter(n)},each:function(e){var t,r,n,a,o=this,i=[o];do{for(t=i.reverse(),i=[];o=t.pop();)if(e(o),r=o.children)for(n=0,a=r.length;n<a;++n)i.push(r[n])}while(i.length);return this},eachAfter:function(e){for(var t,r,n,a=this,o=[a],i=[];a=o.pop();)if(i.push(a),t=a.children)for(r=0,n=t.length;r<n;++r)o.push(t[r]);for(;a=i.pop();)e(a);return this},eachBefore:function(e){for(var t,r,n=this,a=[n];n=a.pop();)if(e(n),t=n.children)for(r=t.length-1;r>=0;--r)a.push(t[r]);return this},sum:function(e){return this.eachAfter((function(t){for(var r=+e(t.data)||0,n=t.children,a=n&&n.length;--a>=0;)r+=n[a].value;t.value=r}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,r=function(e,t){if(e===t)return e;var r=e.ancestors(),n=t.ancestors(),a=null;for(e=r.pop(),t=n.pop();e===t;)a=e,e=r.pop(),t=n.pop();return a}(t,e),n=[t];t!==r;)t=t.parent,n.push(t);for(var a=n.length;e!==r;)n.splice(a,0,e),e=e.parent;return n},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each((function(t){e.push(t)})),e},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(r){r!==e&&t.push({source:r.parent,target:r})})),t},copy:function(){return a(this).eachBefore(i)}}},943323:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>reactify});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),_emotion_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},reactHotLoader,leaveModule;function reactify(renderFn,callbacks){class ReactifiedComponent extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(e){super(e),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=callbacks&&callbacks.componentWillUnmount&&callbacks.componentWillUnmount.bind(this)()}setContainerRef(e){this.container=e}execute(){this.container&&renderFn(this.container,this.props)}render(){const{id:e,className:t}=this.props;return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.tZ)("div",{ref:this.setContainerRef,id:e,className:t})}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}const ReactifiedClass=ReactifiedComponent;return renderFn.displayName&&(ReactifiedClass.displayName=renderFn.displayName),renderFn.propTypes&&(ReactifiedClass.propTypes={...ReactifiedClass.propTypes,...renderFn.propTypes}),renderFn.defaultProps&&(ReactifiedClass.defaultProps=renderFn.defaultProps),ReactifiedComponent}reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(reactify,"reactify","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/packages/superset-ui-core/src/chart/components/reactify.tsx"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}}]);