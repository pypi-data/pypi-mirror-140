"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[704],{500704:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var a,n,s,o=r(667294),l=r(263475),c=r(806915),u=r(211965);function i({height:e,width:t,echartOptions:r,setDataMask:a,labelMap:n,labelMapB:s,groupby:i,groupbyB:d,selectedValues:h,formData:f,seriesBreakdown:p}){const g=(0,o.useCallback)((e=>e<p),[p]),v=(0,o.useCallback)(((e,t)=>{if(!(g(t)?f.emitFilter:f.emitFilterB))return;const r=g(t)?i:d,o=g(t)?n:s,l=e.map((e=>o[e])).filter((e=>!!e));a({extraFormData:{filters:0===e.length?[]:[...r.map(((e,t)=>{const r=l.map((e=>e[t]));return null==r?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:r}}))]},filterState:{value:l.length?l:null,selectedValues:e.length?e:null}})}),[i,d,n,s,a,h]),m={click:e=>{const{seriesName:t,seriesIndex:r}=e,a=Object.values(h);a.includes(t)?v(a.filter((e=>e!==t)),r):v([t],r)},mouseout:()=>{c.aI.name=""},mouseover:e=>{c.aI.name=e.seriesName}};return(0,u.tZ)(l.Z,{height:e,width:t,echartOptions:r,eventHandlers:m,selectedValues:h})}e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(i,"useCallback{isFirstQuery}\nuseCallback{handleChange}"),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(i,"EchartsMixedTimeseries","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-echarts/src/MixedTimeseries/EchartsMixedTimeseries.tsx"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},263475:(e,t,r)=>{r.d(t,{Z:()=>h});var a,n=r(667294),s=r(751995),o=r(229027),l=r(211965);e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const u=s.iK.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function i({width:e,height:t,echartOptions:r,eventHandlers:a,zrEventHandlers:s,selectedValues:c={}},i){const d=(0,n.useRef)(null),h=(0,n.useRef)(),f=(0,n.useMemo)((()=>Object.keys(c)||[]),[c]),p=(0,n.useRef)([]);return(0,n.useImperativeHandle)(i,(()=>({getEchartInstance:()=>h.current}))),(0,n.useEffect)((()=>{d.current&&(h.current||(h.current=(0,o.S1)(d.current)),Object.entries(a||{}).forEach((([e,t])=>{var r,a;null==(r=h.current)||r.off(e),null==(a=h.current)||a.on(e,t)})),Object.entries(s||{}).forEach((([e,t])=>{var r,a;null==(r=h.current)||r.getZr().off(e),null==(a=h.current)||a.getZr().on(e,t)})),h.current.setOption(r,!0))}),[r,a,s]),(0,n.useEffect)((()=>{h.current&&(h.current.dispatchAction({type:"downplay",dataIndex:p.current.filter((e=>!f.includes(e)))}),f.length&&h.current.dispatchAction({type:"highlight",dataIndex:f}),p.current=f)}),[f]),(0,n.useEffect)((()=>{h.current&&h.current.resize({width:e,height:t})}),[e,t]),(0,l.tZ)(u,{ref:d,height:t,width:e})}c(i,"useRef{divRef}\nuseRef{chartRef}\nuseMemo{currentSelection}\nuseRef{previousSelection}\nuseImperativeHandle{}\nuseEffect{}\nuseEffect{}\nuseEffect{}",(()=>[n.useImperativeHandle]));const d=(0,n.forwardRef)(i),h=d;var f,p;(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(f.register(u,"Styles","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-echarts/src/components/Echart.tsx"),f.register(i,"Echart","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-echarts/src/components/Echart.tsx"),f.register(d,"default","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-echarts/src/components/Echart.tsx")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}}]);