"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[9452],{129848:(e,t,s)=>{s.d(t,{Z:()=>d}),s(667294);var a,l=s(751995),r=s(358593),n=s(87693),o=s(211965);e=s.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const i=l.iK.span`
  white-space: nowrap;
  min-width: 100px;
  svg,
  i {
    margin-right: 8px;

    &:hover {
      path {
        fill: ${({theme:e})=>e.colors.primary.base};
      }
    }
  }
`,c=l.iK.span`
  color: ${({theme:e})=>e.colors.grayscale.base};
`;function d({actions:e}){return(0,o.tZ)(i,{className:"actions"},e.map(((e,t)=>{const s=n.Z[e.icon];return e.tooltip?(0,o.tZ)(r.u,{id:`${e.label}-tooltip`,title:e.tooltip,placement:e.placement,key:t},(0,o.tZ)(c,{role:"button",tabIndex:0,className:"action-button","data-test":e.label,onClick:e.onClick},(0,o.tZ)(s,null))):(0,o.tZ)(c,{role:"button",tabIndex:0,className:"action-button",onClick:e.onClick,"data-test":e.label,key:t},(0,o.tZ)(s,null))})))}var u,m;(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(i,"StyledActions","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/src/components/ListView/ActionsBar.tsx"),u.register(c,"ActionWrapper","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/src/components/ListView/ActionsBar.tsx"),u.register(d,"ActionsBar","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/src/components/ListView/ActionsBar.tsx")),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)},690909:(e,t,s)=>{s.d(t,{Z:()=>y});var a,l=s(667294),r=s(751995),n=s(455867),o=s(34858),i=s(87693),c=s(440768),d=s(574520),u=s(414114),m=s(794670),p=s(211965);e=s.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const g=r.iK.div`
  margin: ${({theme:e})=>2*e.gridUnit}px auto
    ${({theme:e})=>4*e.gridUnit}px auto;
`,f=(0,r.iK)(m.ry)`
  border-radius: ${({theme:e})=>e.borderRadius}px;
  border: 1px solid ${({theme:e})=>e.colors.secondary.light2};
`,b=r.iK.div`
  margin-bottom: ${({theme:e})=>10*e.gridUnit}px;

  .control-label {
    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
  }

  .required {
    margin-left: ${({theme:e})=>e.gridUnit/2}px;
    color: ${({theme:e})=>e.colors.error.base};
  }

  input[type='text'] {
    padding: ${({theme:e})=>1.5*e.gridUnit}px
      ${({theme:e})=>2*e.gridUnit}px;
    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    border-radius: ${({theme:e})=>e.gridUnit}px;
    width: 50%;
  }
`,v=({addDangerToast:e,onCssTemplateAdd:t,onHide:s,show:a,cssTemplate:r=null})=>{const[u,m]=(0,l.useState)(!0),[h,v]=(0,l.useState)(null),[C,y]=(0,l.useState)(!0),S=null!==r,{state:{loading:Z,resource:w},fetchResource:_,createResource:L,updateResource:H}=(0,o.LE)("css_template",(0,n.t)("css_template"),e),T=()=>{y(!0),s()};return(0,l.useEffect)((()=>{if(S&&(!h||!h.id||r&&r.id!==h.id||C&&a)){if(r&&null!==r.id&&!Z){const e=r.id||0;_(e)}}else!S&&(!h||h.id||C&&a)&&v({template_name:"",css:""})}),[r]),(0,l.useEffect)((()=>{w&&v(w)}),[w]),(0,l.useEffect)((()=>{h&&h.template_name.length&&h.css&&h.css.length?m(!1):m(!0)}),[h?h.template_name:"",h?h.css:""]),C&&a&&y(!1),(0,p.tZ)(d.Z,{disablePrimaryButton:u,onHandledPrimaryAction:()=>{if(S){if(h&&h.id){const e=h.id;delete h.id,delete h.created_by,H(e,h).then((e=>{e&&(t&&t(),T())}))}}else h&&L(h).then((e=>{e&&(t&&t(),T())}))},onHide:T,primaryButtonName:S?(0,n.t)("Save"):(0,n.t)("Add"),show:a,width:"55%",title:(0,p.tZ)("h4",{"data-test":"css-template-modal-title"},S?(0,p.tZ)(i.Z.EditAlt,{css:c.xL}):(0,p.tZ)(i.Z.PlusLarge,{css:c.xL}),S?(0,n.t)("Edit CSS template properties"):(0,n.t)("Add CSS template"))},(0,p.tZ)(g,null,(0,p.tZ)("h4",null,(0,n.t)("Basic information"))),(0,p.tZ)(b,null,(0,p.tZ)("div",{className:"control-label"},(0,n.t)("CSS template name"),(0,p.tZ)("span",{className:"required"},"*")),(0,p.tZ)("input",{name:"template_name",onChange:e=>{const{target:t}=e,s={...h,template_name:h?h.template_name:"",css:h?h.css:""};s[t.name]=t.value,v(s)},type:"text",value:null==h?void 0:h.template_name})),(0,p.tZ)(b,null,(0,p.tZ)("div",{className:"control-label"},(0,n.t)("css"),(0,p.tZ)("span",{className:"required"},"*")),(0,p.tZ)(f,{onChange:e=>{const t={...h,template_name:h?h.template_name:"",css:e};v(t)},value:null==h?void 0:h.css,width:"100%"})))};h(v,"useState{[disableSave, setDisableSave](true)}\nuseState{[currentCssTemplate, setCurrentCssTemplate](null)}\nuseState{[isHidden, setIsHidden](true)}\nuseSingleViewResource{{ state: { loading, resource }, fetchResource, createResource, updateResource, }}\nuseEffect{}\nuseEffect{}\nuseEffect{}",(()=>[o.LE]));const C=(0,u.Z)(v),y=C;var S,Z;(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(S.register(g,"StyledCssTemplateTitle","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplateModal.tsx"),S.register(f,"StyledCssEditor","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplateModal.tsx"),S.register(b,"TemplateContainer","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplateModal.tsx"),S.register(v,"CssTemplateModal","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplateModal.tsx"),S.register(C,"default","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplateModal.tsx")),(Z="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&Z(e)},899163:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var a,l=s(667294),r=s(455867),n=s(431069),o=s(115926),i=s.n(o),c=s(730381),d=s.n(c),u=s(34858),m=s(440768),p=s(414114),h=s(620755),g=s(217198),f=s(358593),b=s(419259),v=s(129848),C=s(550859),y=s(690909),S=s(211965);function Z({addDangerToast:e,addSuccessToast:t,user:s}){const{state:{loading:a,resourceCount:o,resourceCollection:c,bulkSelectEnabled:p},hasPerm:Z,fetchData:w,refreshData:_,toggleBulkSelect:L}=(0,u.Yi)("css_template",(0,r.t)("CSS templates"),e),[H,T]=(0,l.useState)(!1),[x,P]=(0,l.useState)(null),U=Z("can_write"),D=Z("can_write"),G=Z("can_write"),[$,k]=(0,l.useState)(null),M=[{id:"template_name",desc:!0}],A=(0,l.useMemo)((()=>[{accessor:"template_name",Header:(0,r.t)("Name")},{Cell:({row:{original:{changed_on_delta_humanized:e,changed_by:t}}})=>{let s="null";return t&&(s=`${t.first_name} ${t.last_name}`),(0,S.tZ)(f.u,{id:"allow-run-async-header-tooltip",title:(0,r.t)("Last modified by %s",s),placement:"right"},(0,S.tZ)("span",null,e))},Header:(0,r.t)("Last modified"),accessor:"changed_on_delta_humanized",size:"xl",disableSortBy:!0},{Cell:({row:{original:{created_on:e}}})=>{const t=new Date(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return d()(s).fromNow()},Header:(0,r.t)("Created on"),accessor:"created_on",size:"xl",disableSortBy:!0},{accessor:"created_by",disableSortBy:!0,Header:(0,r.t)("Created by"),Cell:({row:{original:{created_by:e}}})=>e?`${e.first_name} ${e.last_name}`:"",size:"xl"},{Cell:({row:{original:e}})=>{const t=[D?{label:"edit-action",tooltip:(0,r.t)("Edit template"),placement:"bottom",icon:"Edit",onClick:()=>(P(e),void T(!0))}:null,G?{label:"delete-action",tooltip:(0,r.t)("Delete template"),placement:"bottom",icon:"Trash",onClick:()=>k(e)}:null].filter((e=>!!e));return(0,S.tZ)(v.Z,{actions:t})},Header:(0,r.t)("Actions"),id:"actions",disableSortBy:!0,hidden:!D&&!G,size:"xl"}]),[G,U]),E={name:(0,r.t)("CSS templates")},R=[];U&&R.push({name:(0,S.tZ)(l.Fragment,null,(0,S.tZ)("i",{className:"fa fa-plus"})," ",(0,r.t)("CSS template")),buttonStyle:"primary",onClick:()=>{P(null),T(!0)}}),G&&R.push({name:(0,r.t)("Bulk select"),onClick:L,buttonStyle:"secondary"}),E.buttons=R;const B=(0,l.useMemo)((()=>[{Header:(0,r.t)("Created by"),id:"created_by",input:"select",operator:C.p.relationOneMany,unfilteredLabel:"All",fetchSelects:(0,m.tm)("css_template","created_by",(0,m.v$)((e=>(0,r.t)("An error occurred while fetching dataset datasource values: %s",e))),s),paginate:!0},{Header:(0,r.t)("Search"),id:"template_name",input:"search",operator:C.p.contains}]),[]);return(0,S.tZ)(l.Fragment,null,(0,S.tZ)(h.Z,E),(0,S.tZ)(y.Z,{addDangerToast:e,cssTemplate:x,onCssTemplateAdd:()=>_(),onHide:()=>T(!1),show:H}),$&&(0,S.tZ)(g.Z,{description:(0,r.t)("This action will permanently delete the template."),onConfirm:()=>{$&&(({id:s,template_name:a})=>{n.Z.delete({endpoint:`/api/v1/css_template/${s}`}).then((()=>{_(),k(null),t((0,r.t)("Deleted: %s",a))}),(0,m.v$)((t=>e((0,r.t)("There was an issue deleting %s: %s",a,t)))))})($)},onHide:()=>k(null),open:!0,title:(0,r.t)("Delete Template?")}),(0,S.tZ)(b.Z,{title:(0,r.t)("Please confirm"),description:(0,r.t)("Are you sure you want to delete the selected templates?"),onConfirm:s=>{n.Z.delete({endpoint:`/api/v1/css_template/?q=${i().encode(s.map((({id:e})=>e)))}`}).then((({json:e={}})=>{_(),t(e.message)}),(0,m.v$)((t=>e((0,r.t)("There was an issue deleting the selected templates: %s",t)))))}},(e=>{const t=G?[{key:"delete",name:(0,r.t)("Delete"),onSelect:e,type:"danger"}]:[];return(0,S.tZ)(C.Z,{className:"css-templates-list-view",columns:A,count:o,data:c,fetchData:w,filters:B,initialSort:M,loading:a,pageSize:25,bulkActions:t,bulkSelectEnabled:p,disableBulkSelect:L})})))}e=s.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(Z,"useListViewResource{{ state: { loading, resourceCount: templatesCount, resourceCollection: templates, bulkSelectEnabled, }, hasPerm, fetchData, refreshData, toggleBulkSelect, }}\nuseState{[cssTemplateModalOpen, setCssTemplateModalOpen](false)}\nuseState{[currentCssTemplate, setCurrentCssTemplate](null)}\nuseState{[templateCurrentlyDeleting, setTemplateCurrentlyDeleting](null)}\nuseMemo{columns}\nuseMemo{filters}",(()=>[u.Yi]));const w=(0,p.Z)(Z),_=w;var L,H;(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(L.register(25,"PAGE_SIZE","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplatesList.tsx"),L.register(Z,"CssTemplatesList","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplatesList.tsx"),L.register(w,"default","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/src/views/CRUD/csstemplates/CssTemplatesList.tsx")),(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&H(e)}}]);