"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[6618],{464891:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),_utilities__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(672640),_TableRenderers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(550890),_emotion_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};class PivotTable extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent{render(){return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.tZ)(_TableRenderers__WEBPACK_IMPORTED_MODULE_2__.y,this.props)}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}PivotTable.propTypes=_utilities__WEBPACK_IMPORTED_MODULE_3__.nq.propTypes,PivotTable.defaultProps=_utilities__WEBPACK_IMPORTED_MODULE_3__.nq.defaultProps;const _default=PivotTable,__WEBPACK_DEFAULT_EXPORT__=_default;var reactHotLoader,leaveModule;reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(PivotTable,"PivotTable","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx"),reactHotLoader.register(_default,"default","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},355843:(e,t,r)=>{r.d(t,{z:()=>s});var a,o=r(751995);e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const s=o.iK.div`
  table.pvtTable {
    position: relative;
    font-size: 12px;
    text-align: left;
    margin-top: 3px;
    margin-left: 3px;
    border-collapse: separate;
    font-family: 'Inter', Helvetica, Arial, sans-serif;
    line-height: 1.4;
  }

  table thead {
    position: sticky;
    top: 0;
  }

  table.pvtTable thead tr th,
  table.pvtTable tbody tr th {
    background-color: #fff;
    border-top: 1px solid #e0e0e0;
    border-left: 1px solid #e0e0e0;
    font-size: 12px;
    padding: 5px;
    font-weight: normal;
  }

  table.pvtTable tbody tr.pvtRowTotals {
    position: sticky;
    bottom: 0;
  }

  table.pvtTable thead tr:last-of-type th,
  table.pvtTable thead tr:first-of-type th.pvtTotalLabel,
  table.pvtTable thead tr:nth-last-of-type(2) th.pvtColLabel,
  table.pvtTable thead th.pvtSubtotalLabel,
  table.pvtTable tbody tr:last-of-type th,
  table.pvtTable tbody tr:last-of-type td {
    border-bottom: 1px solid #e0e0e0;
  }

  table.pvtTable
    thead
    tr:last-of-type:not(:only-child)
    th.pvtAxisLabel
    ~ th.pvtColLabel,
  table.pvtTable tbody tr:first-of-type th,
  table.pvtTable tbody tr:first-of-type td {
    border-top: none;
  }

  table.pvtTable tbody tr td:last-of-type,
  table.pvtTable thead tr th:last-of-type:not(.pvtSubtotalLabel) {
    border-right: 1px solid #e0e0e0;
  }

  table.pvtTable
    thead
    tr:last-of-type:not(:only-child)
    th.pvtAxisLabel
    + .pvtTotalLabel {
    border-right: none;
  }

  table.pvtTable tr th.active {
    background-color: #d9dbe4;
  }

  table.pvtTable .pvtTotalLabel {
    text-align: right;
    font-weight: bold;
  }

  table.pvtTable .pvtSubtotalLabel {
    font-weight: bold;
  }

  table.pvtTable tbody tr td {
    color: #2a3f5f;
    padding: 5px;
    background-color: #fff;
    border-top: 1px solid #e0e0e0;
    border-left: 1px solid #e0e0e0;
    vertical-align: top;
    text-align: right;
  }

  table.pvtTable tbody tr th.pvtRowLabel {
    vertical-align: baseline;
  }

  .pvtTotal,
  .pvtGrandTotal {
    font-weight: bold;
  }

  table.pvtTable tbody tr td.pvtRowTotal {
    vertical-align: middle;
  }

  .toggle-wrapper {
    white-space: nowrap;
  }

  .toggle-wrapper > .toggle-val {
    white-space: normal;
  }

  .toggle {
    padding-right: 4px;
    cursor: pointer;
  }

  .hoverable:hover {
    background-color: #eceef2;
    cursor: pointer;
  }
`;var l,n;(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&l.register(s,"Styles","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js"),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)},550890:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>TableRenderer});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_utilities__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(672640),_Styles__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(355843),_emotion_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const parseLabel=e=>"number"==typeof e||"string"==typeof e?e:String(e);function displayHeaderCell(e,t,r,a,o){const s=o[a]||a;return e?(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("span",{className:"toggle-wrapper"},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("span",{role:"button",tabIndex:"0",className:"toggle",onClick:r},t),(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("span",{className:"toggle-val"},parseLabel(s))):parseLabel(s)}class TableRenderer extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(e){super(e),this.state={collapsedRows:{},collapsedCols:{}},this.clickHeaderHandler=this.clickHeaderHandler.bind(this),this.clickHandler=this.clickHandler.bind(this)}getBasePivotSettings(){const{props:e}=this,t=e.cols,r=e.rows,a={rowTotals:!0,colTotals:!0,...e.tableOptions},o=a.rowTotals||0===t.length,s=a.colTotals||0===r.length,l=e.namesMapping||{},n={arrowCollapsed:"▲",arrowExpanded:"▼",...e.subtotalOptions},i={displayOnTop:!1,enabled:o,hideOnExpand:!1,...n.colSubtotalDisplay},_={displayOnTop:!1,enabled:s,hideOnExpand:!1,...n.rowSubtotalDisplay},c=new _utilities__WEBPACK_IMPORTED_MODULE_3__.nq(e,{rowEnabled:_.enabled,colEnabled:i.enabled,rowPartialOnTop:_.displayOnTop,colPartialOnTop:i.displayOnTop}),u=c.getRowKeys(),p=c.getColKeys(),d={},h={},g={};let m=null;return a.clickCallback&&(u.forEach((e=>{const t=(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.$K)(e);t in d||(d[t]={}),p.forEach((r=>{d[t][(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.$K)(r)]=this.clickHandler(c,e,r)}))})),o&&u.forEach((e=>{h[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.$K)(e)]=this.clickHandler(c,e,[])})),s&&p.forEach((e=>{g[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.$K)(e)]=this.clickHandler(c,[],e)})),o&&s&&(m=this.clickHandler(c,[],[]))),{pivotData:c,colAttrs:t,rowAttrs:r,colKeys:p,rowKeys:u,rowTotals:o,colTotals:s,arrowCollapsed:n.arrowCollapsed,arrowExpanded:n.arrowExpanded,colSubtotalDisplay:i,rowSubtotalDisplay:_,cellCallbacks:d,rowTotalCallbacks:h,colTotalCallbacks:g,grandTotalCallback:m,namesMapping:l}}clickHandler(e,t,r){const a=this.props.cols,o=this.props.rows,s=e.getAggregator(t,r).value(),l={},n=Math.min(a.length,r.length);for(let e=0;e<n;e+=1){const t=a[e];null!==r[e]&&(l[t]=r[e])}const i=Math.min(o.length,t.length);for(let e=0;e<i;e+=1){const r=o[e];null!==t[e]&&(l[r]=t[e])}return t=>this.props.tableOptions.clickCallback(t,s,l,e)}clickHeaderHandler(e,t,r,a,o,s=!1,l=!1){const n={};for(let e=0;e<=a;e+=1){const a=r[e];n[a]=t[e]}return r=>o(r,t[a],n,e,s,l)}collapseAttr(e,t,r){return a=>{a.stopPropagation();const o=t+1,s=r.filter((e=>e.length===o)).map(_utilities__WEBPACK_IMPORTED_MODULE_3__.$K),l={};s.forEach((e=>{l[e]=!0})),e?this.setState((e=>({collapsedRows:{...e.collapsedRows,...l}}))):this.setState((e=>({collapsedCols:{...e.collapsedCols,...l}})))}}expandAttr(e,t,r){return a=>{a.stopPropagation();const o={};r.forEach((e=>{for(let r=0;r<=t;r+=1)o[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.$K)(e.slice(0,r+1))]=!1})),e?this.setState((e=>({collapsedRows:{...e.collapsedRows,...o}}))):this.setState((e=>({collapsedCols:{...e.collapsedCols,...o}})))}}toggleRowKey(e){return t=>{t.stopPropagation(),this.setState((t=>({collapsedRows:{...t.collapsedRows,[e]:!t.collapsedRows[e]}})))}}toggleColKey(e){return t=>{t.stopPropagation(),this.setState((t=>({collapsedCols:{...t.collapsedCols,[e]:!t.collapsedCols[e]}})))}}calcAttrSpans(e,t){const r=[],a=Array(t).map((()=>0));let o=Array(t).map((()=>null));for(let t=0;t<e.length;t+=1){const s=e[t],l=[];let n=0;const i=Math.min(o.length,s.length);for(;n<i&&o[n]===s[n];)l.push(-1),r[a[n]][n]+=1,n+=1;for(;n<s.length;)a[n]=t,l.push(1),n+=1;r.push(l),o=s}return r}renderColHeaderRow(e,t,r){const{rowAttrs:a,colAttrs:o,colKeys:s,visibleColKeys:l,colAttrSpans:n,rowTotals:i,arrowExpanded:_,arrowCollapsed:c,colSubtotalDisplay:u,maxColVisible:p,pivotData:d,namesMapping:h}=r,{highlightHeaderCellsOnHover:g,omittedHighlightHeaderGroups:m=[],highlightedHeaderCells:b,dateFormatters:v}=this.props.tableOptions,f=0===t&&0!==a.length?(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("th",{key:"padding",colSpan:a.length,rowSpan:o.length,"aria-hidden":"true"}):null,P=u.enabled&&t!==o.length-1;let E=null,y=null;P&&(E=t+1<p?this.collapseAttr(!1,t,s):this.expandAttr(!1,t,s),y=t+1<p?_:c);const M=(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("th",{key:"label",className:"pvtAxisLabel"},displayHeaderCell(P,y,E,e,h)),O=[],T=0!==a.length?1:0;let D=0;for(;D<l.length;){const r=l[D],a=t<r.length?n[D][t]:1;let s="pvtColLabel";if(t<r.length){g&&!m.includes(o[t])&&(s+=" hoverable"),b&&Array.isArray(b[o[t]])&&b[o[t]].includes(r[t])&&(s+=" active");const l=1+(t===o.length-1?T:0),n=(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.$K)(r.slice(0,t+1)),i=P?this.toggleColKey(n):null,u=v&&v[e]&&"function"==typeof v[e]?v[e](r[t]):r[t];O.push((0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("th",{className:s,key:`colKey-${n}`,colSpan:a,rowSpan:l,onClick:this.clickHeaderHandler(d,r,this.props.cols,t,this.props.tableOptions.clickColumnHeaderCallback)},displayHeaderCell(P,this.state.collapsedCols[n]?c:_,i,u,h)))}else if(t===r.length){const e=o.length-r.length+T;O.push((0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("th",{className:`${s} pvtSubtotalLabel`,key:`colKeyBuffer-${(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.$K)(r)}`,colSpan:a,rowSpan:e,onClick:this.clickHeaderHandler(d,r,this.props.cols,t,this.props.tableOptions.clickColumnHeaderCallback,!0)},"Subtotal"))}D+=a}const C=0===t&&i?(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("th",{key:"total",className:"pvtTotalLabel",rowSpan:o.length+Math.min(a.length,1),onClick:this.clickHeaderHandler(d,[],this.props.cols,t,this.props.tableOptions.clickColumnHeaderCallback,!1,!0)},`Total (${this.props.aggregatorName})`):null,w=[f,M,...O,C];return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("tr",{key:`colAttr-${t}`},w)}renderRowHeaderRow(e){const{rowAttrs:t,colAttrs:r,rowKeys:a,arrowCollapsed:o,arrowExpanded:s,rowSubtotalDisplay:l,maxRowVisible:n,pivotData:i,namesMapping:_}=e;return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("tr",{key:"rowHdr"},t.map(((e,r)=>{const i=l.enabled&&r!==t.length-1;let c=null,u=null;return i&&(c=r+1<n?this.collapseAttr(!0,r,a):this.expandAttr(!0,r,a),u=r+1<n?s:o),(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("th",{className:"pvtAxisLabel",key:`rowAttr-${r}`},displayHeaderCell(i,u,c,e,_))})),(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("th",{className:"pvtTotalLabel",key:"padding",onClick:this.clickHeaderHandler(i,[],this.props.rows,0,this.props.tableOptions.clickRowHeaderCallback,!1,!0)},0===r.length?`Total (${this.props.aggregatorName})`:null))}renderTableRow(e,t,r){const{rowAttrs:a,colAttrs:o,rowAttrSpans:s,visibleColKeys:l,pivotData:n,rowTotals:i,rowSubtotalDisplay:_,arrowExpanded:c,arrowCollapsed:u,cellCallbacks:p,rowTotalCallbacks:d,namesMapping:h}=r,{highlightHeaderCellsOnHover:g,omittedHighlightHeaderGroups:m=[],highlightedHeaderCells:b,cellColorFormatters:v,dateFormatters:f}=this.props.tableOptions,P=(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.$K)(e),E=0!==o.length?1:0,y=e.map(((r,o)=>{let l="pvtRowLabel";g&&!m.includes(a[o])&&(l+=" hoverable"),b&&Array.isArray(b[a[o]])&&b[a[o]].includes(r)&&(l+=" active");const i=s[t][o];if(i>0){const t=(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.$K)(e.slice(0,o+1)),s=1+(o===a.length-1?E:0),p=_.enabled&&o!==a.length-1,d=p?this.toggleRowKey(t):null,g=f&&f[a[o]]?f[a[o]](r):r;return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("th",{key:`rowKeyLabel-${o}`,className:l,rowSpan:i,colSpan:s,onClick:this.clickHeaderHandler(n,e,this.props.rows,o,this.props.tableOptions.clickRowHeaderCallback)},displayHeaderCell(p,this.state.collapsedRows[t]?u:c,d,g,h))}return null})),M=e.length<a.length?(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("th",{className:"pvtRowLabel pvtSubtotalLabel",key:"rowKeyBuffer",colSpan:a.length-e.length+E,rowSpan:1,onClick:this.clickHeaderHandler(n,e,this.props.rows,e.length,this.props.tableOptions.clickRowHeaderCallback,!0)},"Subtotal"):null,O=p[P]||{},T=l.map((t=>{const r=(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.$K)(t),a=n.getAggregator(e,t),o=a.value(),s=[...e,...t];let l;v&&Object.values(v).forEach((e=>{Array.isArray(e)&&s.forEach((t=>{l||e.filter((e=>e.column===t)).forEach((e=>{const t=e.getColorFromValue(o);t&&(l=t)}))}))}));const i=a.isSubtotal?{fontWeight:"bold"}:{backgroundColor:l};return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("td",{role:"gridcell",className:"pvtVal",key:`pvtVal-${r}`,onClick:O[r],style:i},a.format(o))}));let D=null;if(i){const t=n.getAggregator(e,[]),r=t.value();D=(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("td",{role:"gridcell",key:"total",className:"pvtTotal",onClick:d[P]},t.format(r))}const C=[...y,M,...T,D];return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("tr",{key:`keyRow-${P}`},C)}renderTotalsRow(e){const{rowAttrs:t,colAttrs:r,visibleColKeys:a,rowTotals:o,pivotData:s,colTotalCallbacks:l,grandTotalCallback:n}=e,i=(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("th",{key:"label",className:"pvtTotalLabel pvtRowTotalLabel",colSpan:t.length+Math.min(r.length,1),onClick:this.clickHeaderHandler(s,[],this.props.rows,0,this.props.tableOptions.clickRowHeaderCallback,!1,!0)},`Total (${this.props.aggregatorName})`),_=a.map((e=>{const t=(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.$K)(e),r=s.getAggregator([],e),a=r.value();return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("td",{role:"gridcell",className:"pvtTotal pvtRowTotal",key:`total-${t}`,onClick:l[t],style:{padding:"5px"}},r.format(a))}));let c=null;if(o){const e=s.getAggregator([],[]),t=e.value();c=(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("td",{role:"gridcell",key:"total",className:"pvtGrandTotal pvtRowTotal",onClick:n},e.format(t))}const u=[i,..._,c];return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("tr",{key:"total",className:"pvtRowTotals"},u)}visibleKeys(e,t,r,a){return e.filter((e=>!e.some(((r,a)=>t[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.$K)(e.slice(0,a))]))&&(e.length===r||(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.$K)(e)in t||!a.hideOnExpand)))}render(){this.cachedProps!==this.props&&(this.cachedProps=this.props,this.cachedBasePivotSettings=this.getBasePivotSettings());const{colAttrs:e,rowAttrs:t,rowKeys:r,colKeys:a,colTotals:o,rowSubtotalDisplay:s,colSubtotalDisplay:l}=this.cachedBasePivotSettings,n=this.visibleKeys(r,this.state.collapsedRows,t.length,s),i=this.visibleKeys(a,this.state.collapsedCols,e.length,l),_={visibleRowKeys:n,maxRowVisible:Math.max(...n.map((e=>e.length))),visibleColKeys:i,maxColVisible:Math.max(...i.map((e=>e.length))),rowAttrSpans:this.calcAttrSpans(n,t.length),colAttrSpans:this.calcAttrSpans(i,e.length),...this.cachedBasePivotSettings};return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)(_Styles__WEBPACK_IMPORTED_MODULE_4__.z,null,(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("table",{className:"pvtTable",role:"grid"},(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("thead",null,e.map(((e,t)=>this.renderColHeaderRow(e,t,_))),0!==t.length&&this.renderRowHeaderRow(_)),(0,_emotion_react__WEBPACK_IMPORTED_MODULE_2__.tZ)("tbody",null,n.map(((e,t)=>this.renderTableRow(e,t,_))),o&&this.renderTotalsRow(_))))}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}var reactHotLoader,leaveModule;TableRenderer.propTypes={..._utilities__WEBPACK_IMPORTED_MODULE_3__.nq.propTypes,tableOptions:prop_types__WEBPACK_IMPORTED_MODULE_1___default().object},TableRenderer.defaultProps={..._utilities__WEBPACK_IMPORTED_MODULE_3__.nq.defaultProps,tableOptions:{}},reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(parseLabel,"parseLabel","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx"),reactHotLoader.register(displayHeaderCell,"displayHeaderCell","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx"),reactHotLoader.register(TableRenderer,"TableRenderer","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},672640:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aj:()=>aggregatorTemplates,ok:()=>sortAs,$K:()=>flatKey,nq:()=>PivotData});var core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(115306),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(455867),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const addSeparators=function(e,t,r){const a=String(e).split(".");let o=a[0];const s=a.length>1?r+a[1]:"",l=/(\d+)(\d{3})/;for(;l.test(o);)o=o.replace(l,`$1${t}$2`);return o+s},numberFormat=function(e){const t={digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:"",...e};return function(e){if(Number.isNaN(e)||!Number.isFinite(e))return"";const r=addSeparators((t.scaler*e).toFixed(t.digitsAfterDecimal),t.thousandsSep,t.decimalSep);return`${t.prefix}${r}${t.suffix}`}},rx=/(\d+)|(\D+)/g,rd=/\d/,rz=/^0/,naturalSort=(e,t)=>{if(null!==t&&null===e)return-1;if(null!==e&&null===t)return 1;if("number"==typeof e&&Number.isNaN(e))return-1;if("number"==typeof t&&Number.isNaN(t))return 1;const r=Number(e),a=Number(t);if(r<a)return-1;if(r>a)return 1;if("number"==typeof e&&"number"!=typeof t)return-1;if("number"==typeof t&&"number"!=typeof e)return 1;if("number"==typeof e&&"number"==typeof t)return 0;if(Number.isNaN(a)&&!Number.isNaN(r))return-1;if(Number.isNaN(r)&&!Number.isNaN(a))return 1;let o=String(e),s=String(t);if(o===s)return 0;if(!rd.test(o)||!rd.test(s))return o>s?1:-1;for(o=o.match(rx),s=s.match(rx);o.length&&s.length;){const e=o.shift(),t=s.shift();if(e!==t)return rd.test(e)&&rd.test(t)?e.replace(rz,".0")-t.replace(rz,".0"):e>t?1:-1}return o.length-s.length},sortAs=function(e){const t={},r={};return e.forEach(((e,a)=>{t[e]=a,"string"==typeof e&&(r[e.toLowerCase()]=a)})),function(e,a){return e in t&&a in t?t[e]-t[a]:e in t?-1:a in t?1:e in r&&a in r?r[e]-r[a]:e in r?-1:a in r?1:naturalSort(e,a)}},getSort=function(e,t){if(e)if("function"==typeof e){const r=e(t);if("function"==typeof r)return r}else if(t in e)return e[t];return naturalSort},usFmt=numberFormat(),usFmtInt=numberFormat({digitsAfterDecimal:0}),usFmtPct=numberFormat({digitsAfterDecimal:1,scaler:100,suffix:"%"}),baseAggregatorTemplates={count:(e=usFmtInt)=>()=>function(){return{count:0,push(){this.count+=1},value(){return this.count},format:e}},uniques:(e,t=usFmtInt)=>function([r]){return function(){return{uniq:[],push(e){Array.from(this.uniq).includes(e[r])||this.uniq.push(e[r])},value(){return e(this.uniq)},format:t,numInputs:void 0!==r?0:1}}},sum:(e=usFmt)=>function([t]){return function(){return{sum:0,push(e){Number.isNaN(parseFloat(e[t]))||(this.sum+=parseFloat(e[t]))},value(){return this.sum},format:e,numInputs:void 0!==t?0:1}}},extremes:(e,t=usFmt)=>function([r]){return function(a){return{val:null,sorter:getSort(void 0!==a?a.sorters:null,r),push(t){let a=t[r];["min","max"].includes(e)&&(a=parseFloat(a),Number.isNaN(a)||(this.val=Math[e](a,null!==this.val?this.val:a))),"first"===e&&this.sorter(a,null!==this.val?this.val:a)<=0&&(this.val=a),"last"===e&&this.sorter(a,null!==this.val?this.val:a)>=0&&(this.val=a)},value(){return this.val},format:e=>Number.isNaN(e)?e:t(e),numInputs:void 0!==r?0:1}}},quantile:(e,t=usFmt)=>function([r]){return function(){return{vals:[],push(e){const t=parseFloat(e[r]);Number.isNaN(t)||this.vals.push(t)},value(){if(0===this.vals.length)return null;this.vals.sort(((e,t)=>e-t));const t=(this.vals.length-1)*e;return(this.vals[Math.floor(t)]+this.vals[Math.ceil(t)])/2},format:t,numInputs:void 0!==r?0:1}}},runningStat:(e="mean",t=1,r=usFmt)=>function([a]){return function(){return{n:0,m:0,s:0,push(e){const t=parseFloat(e[a]);if(Number.isNaN(t))return;this.n+=1,1===this.n&&(this.m=t);const r=this.m+(t-this.m)/this.n;this.s+=(t-this.m)*(t-r),this.m=r},value(){if("mean"===e)return 0===this.n?NaN:this.m;if(this.n<=t)return 0;switch(e){case"var":return this.s/(this.n-t);case"stdev":return Math.sqrt(this.s/(this.n-t));default:throw new Error("unknown mode for runningStat")}},format:r,numInputs:void 0!==a?0:1}}},sumOverSum:(e=usFmt)=>function([t,r]){return function(){return{sumNum:0,sumDenom:0,push(e){Number.isNaN(parseFloat(e[t]))||(this.sumNum+=parseFloat(e[t])),Number.isNaN(parseFloat(e[r]))||(this.sumDenom+=parseFloat(e[r]))},value(){return this.sumNum/this.sumDenom},format:e,numInputs:void 0!==t&&void 0!==r?0:2}}},fractionOf:(e,t="total",r=usFmtPct)=>(...a)=>function(o,s,l){return{selector:{total:[[],[]],row:[s,[]],col:[[],l]}[t],inner:e(...Array.from(a||[]))(o,s,l),push(e){this.inner.push(e)},format:r,value(){return this.inner.value()/o.getAggregator(...Array.from(this.selector||[])).inner.value()},numInputs:e(...Array.from(a||[]))().numInputs}}},extendedAggregatorTemplates={countUnique:e=>baseAggregatorTemplates.uniques((e=>e.length),e),listUnique:(e,t)=>baseAggregatorTemplates.uniques((t=>t.join(e)),t||(e=>e)),max:e=>baseAggregatorTemplates.extremes("max",e),min:e=>baseAggregatorTemplates.extremes("min",e),first:e=>baseAggregatorTemplates.extremes("first",e),last:e=>baseAggregatorTemplates.extremes("last",e),median:e=>baseAggregatorTemplates.quantile(.5,e),average:e=>baseAggregatorTemplates.runningStat("mean",1,e),var:(e,t)=>baseAggregatorTemplates.runningStat("var",e,t),stdev:(e,t)=>baseAggregatorTemplates.runningStat("stdev",e,t)},aggregatorTemplates={...baseAggregatorTemplates,...extendedAggregatorTemplates},aggregators=(tpl=aggregatorTemplates,{Count:tpl.count(usFmtInt),"Count Unique Values":tpl.countUnique(usFmtInt),"List Unique Values":tpl.listUnique(", "),Sum:tpl.sum(usFmt),"Integer Sum":tpl.sum(usFmtInt),Average:tpl.average(usFmt),Median:tpl.median(usFmt),"Sample Variance":tpl.var(1,usFmt),"Sample Standard Deviation":tpl.stdev(1,usFmt),Minimum:tpl.min(usFmt),Maximum:tpl.max(usFmt),First:tpl.first(usFmt),Last:tpl.last(usFmt),"Sum over Sum":tpl.sumOverSum(usFmt),"Sum as Fraction of Total":tpl.fractionOf(tpl.sum(),"total",usFmtPct),"Sum as Fraction of Rows":tpl.fractionOf(tpl.sum(),"row",usFmtPct),"Sum as Fraction of Columns":tpl.fractionOf(tpl.sum(),"col",usFmtPct),"Count as Fraction of Total":tpl.fractionOf(tpl.count(),"total",usFmtPct),"Count as Fraction of Rows":tpl.fractionOf(tpl.count(),"row",usFmtPct),"Count as Fraction of Columns":tpl.fractionOf(tpl.count(),"col",usFmtPct)});var tpl;const locales={en:{aggregators,localeStrings:{renderError:"An error occurred rendering the PivotTable results.",computeError:"An error occurred computing the PivotTable results.",uiRenderError:"An error occurred rendering the PivotTable UI.",selectAll:"Select All",selectNone:"Select None",tooMany:"(too many to list)",filterResults:"Filter values",apply:"Apply",cancel:"Cancel",totals:"Totals",vs:"vs",by:"by"}}},mthNamesEn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNamesEn=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],zeroPad=e=>`0${e}`.substr(-2,2),derivers={bin:(e,t)=>r=>r[e]-r[e]%t,dateFormat(e,t,r=!1,a=mthNamesEn,o=dayNamesEn){const s=r?"UTC":"";return function(r){const l=new Date(Date.parse(r[e]));return Number.isNaN(l)?"":t.replace(/%(.)/g,(function(e,t){switch(t){case"y":return l[`get${s}FullYear`]();case"m":return zeroPad(l[`get${s}Month`]()+1);case"n":return a[l[`get${s}Month`]()];case"d":return zeroPad(l[`get${s}Date`]());case"w":return o[l[`get${s}Day`]()];case"x":return l[`get${s}Day`]();case"H":return zeroPad(l[`get${s}Hours`]());case"M":return zeroPad(l[`get${s}Minutes`]());case"S":return zeroPad(l[`get${s}Seconds`]());default:return`%${t}`}}))}}},flatKey=e=>e.join(String.fromCharCode(0));class PivotData{constructor(e={},t={}){this.props={...PivotData.defaultProps,...e},this.processRecord=this.processRecord.bind(this),prop_types__WEBPACK_IMPORTED_MODULE_1___default().checkPropTypes(PivotData.propTypes,this.props,"prop","PivotData"),this.aggregator=this.props.aggregatorsFactory(this.props.defaultFormatter)[this.props.aggregatorName](this.props.vals),this.formattedAggregators=this.props.customFormatters&&Object.entries(this.props.customFormatters).reduce(((e,[t,r])=>(e[t]={},Object.entries(r).forEach((([r,a])=>{e[t][r]=this.props.aggregatorsFactory(a)[this.props.aggregatorName](this.props.vals)})),e)),{}),this.tree={},this.rowKeys=[],this.colKeys=[],this.rowTotals={},this.colTotals={},this.allTotal=this.aggregator(this,[],[]),this.subtotals=t,this.sorted=!1,PivotData.forEachRecord(this.props.data,this.processRecord)}getFormattedAggregator(e,t){if(!this.formattedAggregators)return this.aggregator;const[r,a]=Object.entries(e).find((([e,t])=>this.formattedAggregators[e]&&this.formattedAggregators[e][t]))||[];return!r||!a||t&&!t.includes(a)?this.aggregator:this.formattedAggregators[r][a]||this.aggregator}arrSort(e,t,r=!1){const a=e.map((e=>getSort(this.props.sorters,e)));return function(e,o){const s=Math.min(e.length,o.length);for(let t=0;t<s;t+=1){const s=a[t],l=r?s(o[t],e[t]):s(e[t],o[t]);if(0!==l)return l}return t?e.length-o.length:o.length-e.length}}sortKeys(){if(!this.sorted){this.sorted=!0;const e=(e,t)=>this.getAggregator(e,t).value();switch(this.props.rowOrder){case"key_z_to_a":this.rowKeys.sort(this.arrSort(this.props.rows,this.subtotals.rowPartialOnTop,!0));break;case"value_a_to_z":this.rowKeys.sort(((t,r)=>naturalSort(e(t,[]),e(r,[]))));break;case"value_z_to_a":this.rowKeys.sort(((t,r)=>-naturalSort(e(t,[]),e(r,[]))));break;default:this.rowKeys.sort(this.arrSort(this.props.rows,this.subtotals.rowPartialOnTop))}switch(this.props.colOrder){case"key_z_to_a":this.colKeys.sort(this.arrSort(this.props.cols,this.subtotals.colPartialOnTop,!0));break;case"value_a_to_z":this.colKeys.sort(((t,r)=>naturalSort(e([],t),e([],r))));break;case"value_z_to_a":this.colKeys.sort(((t,r)=>-naturalSort(e([],t),e([],r))));break;default:this.colKeys.sort(this.arrSort(this.props.cols,this.subtotals.colPartialOnTop))}}}getColKeys(){return this.sortKeys(),this.colKeys}getRowKeys(){return this.sortKeys(),this.rowKeys}processRecord(e){const t=[],r=[];this.props.cols.forEach((r=>{t.push(r in e?e[r]:"null")})),this.props.rows.forEach((t=>{r.push(t in e?e[t]:"null")})),this.allTotal.push(e);const a=this.subtotals.rowEnabled?1:Math.max(1,r.length),o=this.subtotals.colEnabled?1:Math.max(1,t.length);let s,l;for(let t=a;t<=r.length;t+=1){s=t<r.length;const a=r.slice(0,t),o=flatKey(a);this.rowTotals[o]||(this.rowKeys.push(a),this.rowTotals[o]=this.getFormattedAggregator(e,r)(this,a,[])),this.rowTotals[o].push(e),this.rowTotals[o].isSubtotal=s}for(let r=o;r<=t.length;r+=1){l=r<t.length;const a=t.slice(0,r),o=flatKey(a);this.colTotals[o]||(this.colKeys.push(a),this.colTotals[o]=this.getFormattedAggregator(e,t)(this,[],a)),this.colTotals[o].push(e),this.colTotals[o].isSubtotal=l}for(let n=a;n<=r.length;n+=1){s=n<r.length;const a=r.slice(0,n),i=flatKey(a);this.tree[i]||(this.tree[i]={});for(let r=o;r<=t.length;r+=1){l=r<t.length;const o=t.slice(0,r),n=flatKey(o);this.tree[i][n]||(this.tree[i][n]=this.getFormattedAggregator(e)(this,a,o)),this.tree[i][n].push(e),this.tree[i][n].isRowSubtotal=s,this.tree[i][n].isColSubtotal=l,this.tree[i][n].isSubtotal=s||l}}}getAggregator(e,t){let r;const a=flatKey(e),o=flatKey(t);return r=0===e.length&&0===t.length?this.allTotal:0===e.length?this.colTotals[o]:0===t.length?this.rowTotals[a]:this.tree[a][o],r||{value:()=>null,format:()=>""}}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}var reactHotLoader,leaveModule;PivotData.forEachRecord=function(e,t){if(Array.isArray(e))return e.map((e=>t(e)));throw new Error((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__.t)("Unknown input format"))},PivotData.defaultProps={aggregators,cols:[],rows:[],vals:[],aggregatorName:"Count",sorters:{},rowOrder:"key_a_to_z",colOrder:"key_a_to_z"},PivotData.propTypes={data:prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default().array,prop_types__WEBPACK_IMPORTED_MODULE_1___default().object,prop_types__WEBPACK_IMPORTED_MODULE_1___default().func]).isRequired,aggregatorName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,cols:prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().string),rows:prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().string),vals:prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().string),valueFilter:prop_types__WEBPACK_IMPORTED_MODULE_1___default().objectOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().objectOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool)),sorters:prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,prop_types__WEBPACK_IMPORTED_MODULE_1___default().objectOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().func)]),derivedAttributes:prop_types__WEBPACK_IMPORTED_MODULE_1___default().objectOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().func),rowOrder:prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOf(["key_a_to_z","key_z_to_a","value_a_to_z","value_z_to_a"]),colOrder:prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOf(["key_a_to_z","key_z_to_a","value_a_to_z","value_z_to_a"])},reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(addSeparators,"addSeparators","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(numberFormat,"numberFormat","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(rx,"rx","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(rd,"rd","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(rz,"rz","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(naturalSort,"naturalSort","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(sortAs,"sortAs","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(getSort,"getSort","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(usFmt,"usFmt","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(usFmtInt,"usFmtInt","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(usFmtPct,"usFmtPct","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(baseAggregatorTemplates,"baseAggregatorTemplates","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(extendedAggregatorTemplates,"extendedAggregatorTemplates","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(aggregatorTemplates,"aggregatorTemplates","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(aggregators,"aggregators","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(locales,"locales","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(mthNamesEn,"mthNamesEn","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(dayNamesEn,"dayNamesEn","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(zeroPad,"zeroPad","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(derivers,"derivers","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(flatKey,"flatKey","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js"),reactHotLoader.register(PivotData,"PivotData","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},96618:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var a=r(667294);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"};var s=r(127029),l=function(e,t){return a.createElement(s.Z,Object.assign({},e,{ref:t,icon:o}))};l.displayName="PlusSquareOutlined";const n=a.forwardRef(l),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"};var _=function(e,t){return a.createElement(s.Z,Object.assign({},e,{ref:t,icon:i}))};_.displayName="MinusSquareOutlined";const c=a.forwardRef(_);var u,p=r(751995),d=r(767190),h=r(310581),g=r(472813),m=r(338575),b=r(672640),v=r(464891),f=r(386769),P=r(211965);e=r.hmd(e),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&u(e);var E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};const y=p.iK.div`
  ${({height:e,width:t,margin:r})=>`\n      margin: ${r}px;\n      height: ${e-2*r}px;\n      width: ${"string"==typeof t?parseInt(t,10):t-2*r}px;\n `}
`,M=p.iK.div`
  height: 100%;
  max-width: fit-content;
  overflow: auto;
`,O="metric",T={stroke:"black",strokeWidth:"16px"},D=["value"],C=e=>({Count:b.aj.count(e),"Count Unique Values":b.aj.countUnique(e),"List Unique Values":b.aj.listUnique(", ",e),Sum:b.aj.sum(e),Average:b.aj.average(e),Median:b.aj.median(e),"Sample Variance":b.aj.var(1,e),"Sample Standard Deviation":b.aj.stdev(1,e),Minimum:b.aj.min(e),Maximum:b.aj.max(e),First:b.aj.first(e),Last:b.aj.last(e),"Sum as Fraction of Total":b.aj.fractionOf(b.aj.sum(),"total",e),"Sum as Fraction of Rows":b.aj.fractionOf(b.aj.sum(),"row",e),"Sum as Fraction of Columns":b.aj.fractionOf(b.aj.sum(),"col",e),"Count as Fraction of Total":b.aj.fractionOf(b.aj.count(),"total",e),"Count as Fraction of Rows":b.aj.fractionOf(b.aj.count(),"row",e),"Count as Fraction of Columns":b.aj.fractionOf(b.aj.count(),"col",e)});function w(e){const{data:t,height:r,width:o,groupbyRows:s,groupbyColumns:l,metrics:i,colOrder:_,rowOrder:u,aggregateFunction:E,transposePivot:w,combineMetric:L,rowSubtotalPosition:A,colSubtotalPosition:R,colTotals:K,rowTotals:k,valueFormat:H,emitFilter:U,setDataMask:S,selectedFilters:I,verboseMap:j,columnFormats:F,metricsLayout:B,metricColorFormatters:x,dateFormatters:W}=e,N=(0,p.Fg)(),q=(0,a.useMemo)((()=>(0,d.JB)(H)),[H]),$=(0,a.useMemo)((()=>Object.entries(F)),[F]),G=$.length>0,z=(0,a.useMemo)((()=>G?{[O]:Object.fromEntries($.map((([e,t])=>[e,(0,d.JB)(t)])))}:void 0),[$,G]),Z=(0,a.useMemo)((()=>i.map((e=>"string"==typeof e?e:e.label))),[i]),V=(0,a.useMemo)((()=>t.reduce(((e,t)=>[...e,...Z.map((e=>({...t,[O]:e,value:t[e]}))).filter((e=>null!==e.value))]),[])),[t,Z]),J=(0,a.useMemo)((()=>s.map(h.Z)),[s]),X=(0,a.useMemo)((()=>l.map(h.Z)),[l]),Y=(0,a.useMemo)((()=>({[O]:(0,b.ok)(Z)})),[Z]),[Q,ee]=(0,a.useMemo)((()=>{let[e,t]=w?[X,J]:[J,X];return B===f.Q.ROWS?e=L?[...e,O]:[O,...e]:t=L?[...t,O]:[O,...t],[e,t]}),[L,X,J,B,w]),te=(0,a.useCallback)((e=>{const t=Object.keys(e),r=[...s,...l];S({extraFormData:{filters:0===t.length?void 0:t.map((t=>{var a;const o=null==e?void 0:e[t],s=null!=(a=r.find((e=>(0,g.s)(e)?e===t:!!(0,m.GA)(e)&&e.label===t)))?a:"";return null==o?{col:s,op:"IS NULL"}:{col:s,op:"IN",val:o}}))},filterState:{value:e&&Object.keys(e).length?Object.values(e):null,selectedFilters:e&&Object.keys(e).length?e:null}})}),[l,s,S]),re=(0,a.useCallback)(((e,t,r,a,o,s)=>{if(o||s||!U)return;const l={...r};delete l.metric;const n=Object.entries(l);if(0===n.length)return;const[i,_]=n[n.length-1];let c={...I||{}};c=I&&((e,t)=>{var r;return!!I&&(null==(r=I[e])?void 0:r.includes(t))})(i,_)?{}:{[i]:[_]},Array.isArray(c[i])&&0===c[i].length&&delete c[i],te(c)}),[U,I,te]),ae=(0,a.useMemo)((()=>({clickRowHeaderCallback:re,clickColumnHeaderCallback:re,colTotals:K,rowTotals:k,highlightHeaderCellsOnHover:U,highlightedHeaderCells:I,omittedHighlightHeaderGroups:[O],cellColorFormatters:{[O]:x},dateFormatters:W})),[K,W,U,x,k,I,re]),oe=(0,a.useMemo)((()=>({colSubtotalDisplay:{displayOnTop:R},rowSubtotalDisplay:{displayOnTop:A},arrowCollapsed:(0,P.tZ)(n,{style:T}),arrowExpanded:(0,P.tZ)(c,{style:T})})),[R,A]);return(0,P.tZ)(y,{height:r,width:o,margin:4*N.gridUnit},(0,P.tZ)(M,null,(0,P.tZ)(v.Z,{data:V,rows:Q,cols:ee,aggregatorsFactory:C,defaultFormatter:q,customFormatters:z,aggregatorName:E,vals:D,colOrder:_,rowOrder:u,sorters:Y,tableOptions:ae,subtotalOptions:oe,namesMapping:j})))}var L,A;E(w,"useTheme{theme}\nuseMemo{defaultFormatter}\nuseMemo{columnFormatsArray}\nuseMemo{metricFormatters}\nuseMemo{metricNames}\nuseMemo{unpivotedData}\nuseMemo{groupbyRows}\nuseMemo{groupbyColumns}\nuseMemo{sorters}\nuseMemo{[rows, cols]}\nuseCallback{handleChange}\nuseCallback{toggleFilter}\nuseMemo{tableOptions}\nuseMemo{subtotalOptions}",(()=>[p.Fg])),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(L.register(y,"Styles","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx"),L.register(M,"PivotTableWrapper","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx"),L.register(O,"METRIC_KEY","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx"),L.register(T,"iconStyle","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx"),L.register(D,"vals","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx"),L.register(C,"aggregatorsFactory","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx"),L.register(w,"PivotTableChart","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx")),(A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&A(e)}}]);