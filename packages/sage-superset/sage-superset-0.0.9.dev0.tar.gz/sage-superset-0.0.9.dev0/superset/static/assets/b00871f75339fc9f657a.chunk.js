"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[7299],{79816:(e,t,r)=>{var a;r.d(t,{Z:()=>n}),e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const o=function(e,t){let r,a;if(void 0===t)for(const t of e)null!=t&&(void 0===r?t>=t&&(r=a=t):(r>t&&(r=t),a<t&&(a=t)));else{let o=-1;for(let n of e)null!=(n=t(n,++o,e))&&(void 0===r?n>=n&&(r=a=n):(r>n&&(r=n),a<n&&(a=n)))}return[r,a]},n=o;var s,l;(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&s.register(o,"default","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-country-map/node_modules/d3-array/src/extent.js"),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)},920369:(e,t,r)=>{r.d(t,{Z:()=>m});var a,o=r(615078),n=r.n(o),s=r(45697),l=r.n(s),c=r(79816),d=r(767190),i=r(45511),u=r(756278);e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const p={data:l().arrayOf(l().shape({country_id:l().string,metric:l().number})),width:l().number,height:l().number,country:l().string,linearColorScheme:l().string,mapBaseUrl:l().string,numberFormat:l().string},f={};function y(e,t){const{data:r,width:a,height:o,country:s,linearColorScheme:l,numberFormat:p}=t,y=e,_=(0,d.JB)(p),m=(0,i.Z)().get(l).createLinearScale((0,c.Z)(r,(e=>e.metric))),h={};r.forEach((e=>{h[e.country_id]=m(e.metric)}));const g=e=>h[e.properties.ISO]||"none",v=n().geo.path(),b=n().select(y);b.classed("superset-legacy-chart-country-map",!0),b.selectAll("*").remove(),y.style.height=`${o}px`,y.style.width=`${a}px`;const L=b.append("svg:svg").attr("width",a).attr("height",o).attr("preserveAspectRatio","xMidYMid meet"),H=L.append("rect").attr("class","background").attr("width",a).attr("height",o),M=L.append("g"),G=M.append("g").classed("map-layer",!0),C=M.append("g").classed("text-layer",!0).attr("transform",`translate(${a/2}, 45)`),P=C.append("text").classed("big-text",!0),k=C.append("text").classed("result-text",!0).attr("dy","1em");let x;const R=function(e){const t=e&&x!==e;let r,n,s;const l=a/2,c=o/2;if(t){const t=v.centroid(e);[r,n]=t,s=4,x=e}else r=l,n=c,s=1,x=null;M.transition().duration(750).attr("transform",`translate(${l},${c})scale(${s})translate(${-r},${-n})`),C.style("opacity",0).attr("transform",`translate(0,0)translate(${r},${t?n-5:45})`).transition().duration(750).style("opacity",1),P.transition().duration(750).style("font-size",t?6:16),k.transition().duration(750).style("font-size",t?16:24)};H.on("click",R);const E=function(e){let t=g(e);"none"!==t&&(t=n().rgb(t).darker().toString()),n().select(this).style("fill",t),function(e){let t="";e&&e.properties&&(t=e.properties.ID_2?e.properties.NAME_2:e.properties.NAME_1),P.text(t)}(e);const a=r.filter((t=>t.country_id===e.properties.ISO));var o;(o=a).length>0&&k.text(_(o[0].metric))},U=function(){n().select(this).style("fill",g),P.text(""),k.text("")};function j(e){const{features:t}=e,r=n().geo.centroid(e),s=n().geo.mercator().scale(100).center(r).translate([a/2,o/2]);v.projection(s);const l=v.bounds(e),c=100*a/(l[1][0]-l[0][0]),d=100*o/(l[1][1]-l[0][1]),i=c<d?c:d;s.scale(i);const u=v.bounds(e);s.translate([a-(u[0][0]+u[1][0])/2,o-(u[0][1]+u[1][1])/2]),G.selectAll("path").data(t).enter().append("path").attr("d",v).attr("class","region").attr("vector-effect","non-scaling-stroke").style("fill",g).on("mouseenter",E).on("mouseout",U).on("click",R)}const w=f[s];if(w)j(w);else{const t=u.ZP[s];n().json(t,((t,r)=>{if(t){var a;const t=(null==(a=u.O$.find((e=>e[0]===s)))?void 0:a[1])||s;n().select(e).html(`<div class="alert alert-danger">Could not load map data for ${t}</div>`)}else f[s]=r,j(r)}))}}y.displayName="CountryMap",y.propTypes=p;const _=y,m=_;var h,g;(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(h.register(p,"propTypes","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-country-map/src/CountryMap.js"),h.register(f,"maps","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-country-map/src/CountryMap.js"),h.register(y,"CountryMap","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-country-map/src/CountryMap.js"),h.register(_,"default","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-country-map/src/CountryMap.js")),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},177299:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var a,o=r(943323),n=r(920369);e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const s=(0,o.Z)(n.Z),l=s;var c,d;(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&c.register(s,"default","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-country-map/src/ReactCountryMap.js"),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},943323:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>reactify});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),_emotion_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},reactHotLoader,leaveModule;function reactify(renderFn,callbacks){class ReactifiedComponent extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(e){super(e),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=callbacks&&callbacks.componentWillUnmount&&callbacks.componentWillUnmount.bind(this)()}setContainerRef(e){this.container=e}execute(){this.container&&renderFn(this.container,this.props)}render(){const{id:e,className:t}=this.props;return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.tZ)("div",{ref:this.setContainerRef,id:e,className:t})}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}const ReactifiedClass=ReactifiedComponent;return renderFn.displayName&&(ReactifiedClass.displayName=renderFn.displayName),renderFn.propTypes&&(ReactifiedClass.propTypes={...ReactifiedClass.propTypes,...renderFn.propTypes}),renderFn.defaultProps&&(ReactifiedClass.defaultProps=renderFn.defaultProps),ReactifiedComponent}reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(reactify,"reactify","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/packages/superset-ui-core/src/chart/components/reactify.tsx"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}}]);