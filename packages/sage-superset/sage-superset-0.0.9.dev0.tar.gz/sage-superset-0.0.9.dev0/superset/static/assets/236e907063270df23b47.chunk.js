"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[5735],{715735:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var a,n=r(943323),s=r(433851);e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const o=(0,n.Z)(s.Z),l=o;var i,c;(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&i.register(o,"default","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/ReactSunburst.js"),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)},433851:(e,t,r)=>{r.d(t,{Z:()=>L}),r(115306);var a,n=r(615078),s=r.n(n),o=r(45697),l=r.n(o),i=r(328062),c=r(767190),d=r(645636),u=r(45511),p=r(177749);e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;const h={data:l().arrayOf(l().array),width:l().number,height:l().number,colorScheme:l().string,linearColorScheme:l().string,numberFormat:l().string,metrics:l().arrayOf(l().oneOfType([l().string,l().object]))};function g(e){return"string"==typeof e||e instanceof String?e:e.label}function m(e){const t=[];let r=e;for(;r.parent;)t.unshift(r),r=r.parent;return t}function f(e){const t={name:"root",children:[]};return e.forEach((e=>{const r=Number(e[e.length-2]),a=Number(e[e.length-1]),n=e.slice(0,-2);if(Number.isNaN(r))return;let s=t;for(let e=0;e<n.length;e+=1){const t=s.children||[],o=n[e].toString();let l;e>=n.length-1||0===n[e+1]?0!==o&&(l={name:o,m1:r,m2:a},t.push(l)):(l=t.find((t=>t.name===o&&t.level===e)),l||(l={name:o,children:[],level:e},t.push(l)),s=l)}})),function e(t){if(t.children){let r,a=0,n=0;for(let s=0;s<t.children.length;s+=1)r=e(t.children[s]),a+=r[0],n+=r[1];t.m1=a,t.m2=n}return[t.m1,t.m2]}(t),t}function y(e){return e>500?"l":e>200&&e<=500?"m":"s"}function b(e){return e>500?["0","20","40","60"]:e>200&&e<=500?["0","15","30","45"]:["0","10","20","30"]}function v(e,t){const r=s().select(e),{data:a,width:n,height:o,colorScheme:l,linearColorScheme:h,metrics:v,numberFormat:_}=t,L=y(n),x="s"===L;r.attr("class",`superset-legacy-chart-sunburst ${L}`);const P=n,H=o,G=.085*H,M=P-5-5,$=H-10-10-G,j=Math.min(M,$)/2;let C,k,w,T,S,R,U,E=!0;const A=i.getScale(l);let N;const O=s().layout.partition().size([2*Math.PI,j*j]).value((e=>e.m1)),W=s().svg.arc().startAngle((e=>e.x)).endAngle((e=>e.x+e.dx)).innerRadius((e=>Math.sqrt(e.y))).outerRadius((e=>Math.sqrt(e.y+e.dy))),D=(0,c.JB)(_||d.Z.SI_3_DIGIT),F=(0,c.JB)(d.Z.PERCENT_3_POINT);r.select("svg").remove();const Z=r.append("svg:svg").attr("width",P).attr("height",H);function I(e,t){const r=[];return x?(r.push("0,0"),r.push(`${n},0`),r.push(`${n},0`),r.push(`${n},${k.height}`),r.push(`0,${k.height}`)):(r.push("0,0"),r.push(`${k.width},0`),r.push(`${k.width+k.tipTailWidth},${k.height/2}`),r.push(`${k.width},${k.height}`),r.push(`0,${k.height}`),t>0&&r.push(`${k.tipTailWidth},${k.height/2}`)),r.join(" ")}function q(e){const t=m(e),r=t[t.length-2]||null,a=(e.m1/w).toPrecision(3),o=r?(e.m1/r.m1).toPrecision(3):null,l=F(a),i=r?F(o):"",c=b(n);let d=0;const u=Math.abs(e.m1-e.m2)<1e-5;U.selectAll("*").remove(),d+=1,U.append("text").attr("class","path-abs-percent").attr("y",c[d]).text(`${l} of total`),i&&(d+=1,U.append("text").attr("class","path-cond-percent").attr("y",c[d]).text(`${i} of parent`)),d+=1,U.append("text").attr("class","path-metrics").attr("y",c[d]).text(`${g(v[0])}: ${D(e.m1)}${u?"":`, ${g(v[1])}: ${D(e.m2)}`}`),d+=1,U.append("text").attr("class","path-ratio").attr("y",c[d]).text(u?"":`${g(v[1])}/${g(v[0])}: ${F(e.m2/e.m1)}`),R.selectAll("path").style("stroke-width",null).style("stroke",null).style("opacity",.3),R.selectAll("path").filter((e=>t.includes(e))).style("opacity",1).style("stroke","#aaa"),function(e,t){const r=x?n:k.width,a=T.selectAll("g").data(e,(e=>e.name+e.depth)),o=a.enter().append("svg:g");o.append("svg:polygon").attr("points",I).style("fill",(e=>E?A(e.name):N(e.m2/e.m1))),o.append("svg:text").attr("x",(r+k.tipTailWidth)/2).attr("y",k.height/4).attr("dy","0.35em").style("fill",(e=>s().hsl(E?A(e.name):N(e.m2/e.m1)).l<.5?"white":"black")).attr("class","step-label").text((e=>e.name.replace(/_/g," "))).call(p.Z,r,k.height/2),a.attr("transform",((e,t)=>x?`translate(0, ${t*(k.height+k.spacing)})`:`translate(${t*(k.width+k.spacing)}, 0)`)),a.exit().remove(),T.select(".end-label").attr("x",(()=>x?(r+k.tipTailWidth)/2:(e.length+.5)*(k.width+k.spacing))).attr("y",(()=>x?(e.length+1)*k.height:k.height/2)).attr("dy","0.35em").text(t),T.style("visibility",null)}(t,l)}function B(){T.style("visibility","hidden"),U.selectAll("*").remove(),R.selectAll("path").on("mouseenter",null),R.selectAll("path").transition().duration(200).style("opacity",1).style("stroke",null).style("stroke-width",null).each("end",(function(){s().select(this).on("mouseenter",q)}))}var K;K=a[0],C=K.length-2+1,k={width:M/C,height:.8*G,spacing:3,tipTailWidth:10},T=Z.append("svg:g").attr("class","breadcrumbs").attr("transform","translate(5,10)"),T.append("svg:text").attr("class","end-label"),function(e){const t=f(e);C=e[0].length-2,S=Z.append("svg:g").attr("class","sunburst-vis").attr("transform",`translate(${5+M/2},${10+(x?G*C:G)+$/2})`).on("mouseleave",B),R=S.append("svg:g").attr("id","arcs"),U=S.append("svg:g").attr("class","center-label"),R.append("svg:circle").attr("r",j).style("opacity",0);const r=O.nodes(t).filter((e=>e.dx>.005));if(v[0]!==v[1]&&v[1]){E=!1;const e=s().extent(r,(e=>e.m2/e.m1));N=(0,u.Z)().get(h).createLinearScale(e)}R.selectAll("path").data(r).enter().append("svg:path").attr("display",(e=>e.depth?null:"none")).attr("d",W).attr("fill-rule","evenodd").style("fill",(e=>E?A(e.name):N(e.m2/e.m1))).style("opacity",1).on("mouseenter",q),w=t.value}(a)}v.displayName="Sunburst",v.propTypes=h;const _=v,L=_;var x,P;(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(x.register(h,"propTypes","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(g,"metricLabel","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(m,"getAncestors","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(f,"buildHierarchy","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(y,"getResponsiveContainerClass","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(b,"getYOffset","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(v,"Sunburst","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js"),x.register(_,"default","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/Sunburst.js")),(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&P(e)},177749:(e,t,r)=>{r.d(t,{Z:()=>i});var a,n,s,o=r(615078),l=r.n(o);function i(e,t,r){e.each((function(){const e=l().select(this),a=e.text().split(/\s+/);let n=[],s=0;const o=e.attr("x"),i=e.attr("y"),c=parseFloat(e.attr("dy"));let d=e.text(null).append("tspan").attr("x",o).attr("y",i).attr("dy",`${c}em`),u=!1;a.forEach((r=>{n.push(r),d.text(n.join(" ")),d.node().getComputedTextLength()>t&&(s+=1,n.pop(),d.text(n.join(" ")),n=[r],d=e.append("tspan").attr("x",o).attr("y",i).attr("dy",`${1*s+c}em`).text(r),u=!0)})),u||void 0===r||d.attr("y",r)}))}e=r.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(i,"wrapSvgText","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/plugins/legacy-plugin-chart-sunburst/src/utils/wrapSvgText.js"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},943323:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>reactify});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(667294),_emotion_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(211965),enterModule;module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},reactHotLoader,leaveModule;function reactify(renderFn,callbacks){class ReactifiedComponent extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(e){super(e),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=callbacks&&callbacks.componentWillUnmount&&callbacks.componentWillUnmount.bind(this)()}setContainerRef(e){this.container=e}execute(){this.container&&renderFn(this.container,this.props)}render(){const{id:e,className:t}=this.props;return(0,_emotion_react__WEBPACK_IMPORTED_MODULE_1__.tZ)("div",{ref:this.setContainerRef,id:e,className:t})}__reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}const ReactifiedClass=ReactifiedComponent;return renderFn.displayName&&(ReactifiedClass.displayName=renderFn.displayName),renderFn.propTypes&&(ReactifiedClass.propTypes={...ReactifiedClass.propTypes,...renderFn.propTypes}),renderFn.defaultProps&&(ReactifiedClass.defaultProps=renderFn.defaultProps),ReactifiedComponent}reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(reactify,"reactify","/Users/chenming/PycharmProjects/venv/superset/superset-frontend/packages/superset-ui-core/src/chart/components/reactify.tsx"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}}]);