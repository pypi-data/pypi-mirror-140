{"version":3,"sources":["textEditorViewTests.es6.js"],"names":[],"mappings":"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","file":"textEditorViewTests.js","sourcesContent":["suite('rb/ui/views/TextEditorView', function() {\n    let view;\n\n    beforeEach(function() {\n        RB.DnDUploader.create();\n    });\n\n    afterEach(function() {\n        RB.DnDUploader.instance = null;\n    });\n\n    describe('Construction', function() {\n        it('Initial text', function() {\n            view = new RB.TextEditorView({\n                text: 'Test',\n            });\n            view.render();\n\n            expect(view.getText()).toBe('Test');\n        });\n\n        describe('Text field wrapper', function() {\n            it('If plain text', function() {\n                view = new RB.TextEditorView({\n                    richText: false,\n                });\n                view.render();\n                view.show();\n\n                expect(view.richText).toBe(false);\n                expect(view.$el.children('textarea').length).toBe(1);\n                expect(view.$el.children('.CodeMirror').length).toBe(0);\n            });\n\n            it('If Markdown', function() {\n                view = new RB.TextEditorView({\n                    richText: true,\n                });\n                view.render();\n                view.show();\n\n                expect(view.richText).toBe(true);\n                expect(view.$el.children('textarea').length).toBe(0);\n                expect(view.$el.children('.CodeMirror').length).toBe(1);\n            });\n        });\n\n        describe('Default richText', function() {\n            describe('If user default is true', function() {\n                beforeEach(function() {\n                    RB.UserSession.instance.set('defaultUseRichText', true);\n                });\n\n                it('And richText unset', function() {\n                    view = new RB.TextEditorView();\n                    view.render();\n                    view.show();\n\n                    expect(view.richText).toBe(true);\n                    expect(view.$el.children('textarea').length).toBe(0);\n                    expect(view.$el.children('.CodeMirror').length).toBe(1);\n                });\n\n                it('And richText=true', function() {\n                    view = new RB.TextEditorView({\n                        richText: true,\n                    });\n                    view.render();\n                    view.show();\n\n                    expect(view.richText).toBe(true);\n                    expect(view.$el.children('textarea').length).toBe(0);\n                    expect(view.$el.children('.CodeMirror').length).toBe(1);\n                });\n\n                it('And richText=false', function() {\n                    view = new RB.TextEditorView({\n                        richText: false,\n                    });\n                    view.render();\n                    view.show();\n\n                    expect(view.richText).toBe(true);\n                    expect(view.$el.children('textarea').length).toBe(0);\n                    expect(view.$el.children('.CodeMirror').length).toBe(1);\n                });\n            });\n\n            describe('If user default is false', function() {\n                beforeEach(function() {\n                    RB.UserSession.instance.set('defaultUseRichText', false);\n                });\n\n                it('And richText unset', function() {\n                    view = new RB.TextEditorView();\n                    view.render();\n                    view.show();\n\n                    expect(view.richText).toBe(false);\n                    expect(view.$el.children('textarea').length).toBe(1);\n                    expect(view.$el.children('.CodeMirror').length).toBe(0);\n                });\n\n                it('And richText=true', function() {\n                    view = new RB.TextEditorView({\n                        richText: true,\n                    });\n                    view.render();\n                    view.show();\n\n                    expect(view.richText).toBe(true);\n                    expect(view.$el.children('textarea').length).toBe(0);\n                    expect(view.$el.children('.CodeMirror').length).toBe(1);\n                });\n\n                it('And richText=false', function() {\n                    view = new RB.TextEditorView({\n                        richText: false,\n                    });\n                    view.render();\n                    view.show();\n\n                    expect(view.richText).toBe(false);\n                    expect(view.$el.children('textarea').length).toBe(1);\n                    expect(view.$el.children('.CodeMirror').length).toBe(0);\n                });\n            });\n        });\n    });\n\n    describe('Operations', function() {\n        describe('bindRichTextAttr', function() {\n            let myModel;\n\n            beforeEach(function() {\n                myModel = new Backbone.Model({\n                    richText: false,\n                });\n\n                view = new RB.TextEditorView();\n            });\n\n            it('Updates on change', function() {\n                view.bindRichTextAttr(myModel, 'richText');\n                expect(view.richText).toBe(false);\n\n                myModel.set('richText', true);\n                expect(view.richText).toBe(true);\n            });\n\n            describe('Initial richText value', function() {\n                it('true', function() {\n                    myModel.set('richText', true);\n                    view.bindRichTextAttr(myModel, 'richText');\n\n                    expect(view.richText).toBe(true);\n                });\n\n                it('false', function() {\n                    myModel.set('richText', false);\n                    view.bindRichTextAttr(myModel, 'richText');\n\n                    expect(view.richText).toBe(false);\n                });\n            });\n        });\n\n        describe('bindRichTextCheckbox', function() {\n            let $checkbox;\n\n            beforeEach(function() {\n                $checkbox = $('<input type=\"checkbox\">');\n\n                view = new RB.TextEditorView();\n                view.setRichText(false);\n            });\n\n            it('Checkbox reflects richText', function() {\n                view.bindRichTextCheckbox($checkbox);\n                expect($checkbox.prop('checked')).toBe(false);\n\n                view.setRichText(true);\n                expect($checkbox.prop('checked')).toBe(true);\n            });\n\n            describe('richText reflects checkbox', function() {\n                it('Checked', function() {\n                    view.setRichText(false);\n                    view.bindRichTextCheckbox($checkbox);\n\n                    $checkbox\n                        .prop('checked', true)\n                        .triggerHandler('change');\n\n                    expect(view.richText).toBe(true);\n                });\n\n                it('Unchecked', function() {\n                    view.setRichText(true);\n                    view.bindRichTextCheckbox($checkbox);\n\n                    $checkbox\n                        .prop('checked', false)\n                        .triggerHandler('change');\n\n                    expect(view.richText).toBe(false);\n                });\n            });\n\n            describe('Initial checked state', function() {\n                it('richText=true', function() {\n                    view.setRichText(true);\n                    view.bindRichTextCheckbox($checkbox);\n\n                    expect($checkbox.prop('checked')).toBe(true);\n                });\n\n                it('richText=false', function() {\n                    view.setRichText(false);\n                    view.bindRichTextCheckbox($checkbox);\n\n                    expect($checkbox.prop('checked')).toBe(false);\n                });\n            });\n        });\n\n        describe('bindRichTextVisibility', function() {\n            let $el;\n\n            beforeEach(function() {\n                $el = $('<div>');\n\n                view = new RB.TextEditorView();\n                view.setRichText(false);\n            });\n\n            describe('Initial visibility', function() {\n                it('richText=true', function() {\n                    $el.hide();\n\n                    view.setRichText(true);\n                    view.bindRichTextVisibility($el);\n\n                    /*\n                     * Chrome returns an empty string, while Firefox returns\n                     * \"block\".\n                     */\n                    const display = $el.css('display');\n                    expect(display === 'block' || display === '').toBe(true);\n                });\n\n                it('richText=false', function() {\n                    view.bindRichTextVisibility($el);\n\n                    expect($el.css('display')).toBe('none');\n                });\n            });\n\n            describe('Toggles visibility on change', function() {\n                it('richText=true', function() {\n                    $el.hide();\n\n                    view.bindRichTextVisibility($el);\n                    expect($el.css('display')).toBe('none');\n\n                    view.setRichText(true);\n                    /*\n                     * Chrome returns an empty string, while Firefox returns\n                     * \"block\".\n                     */\n                    const display = $el.css('display');\n                    expect(display === 'block' || display === '').toBe(true);\n                });\n\n                it('richText=false', function() {\n                    view.setRichText(true);\n                    view.bindRichTextVisibility($el);\n\n                    /*\n                     * Chrome returns an empty string, while Firefox returns\n                     * \"block\".\n                     */\n                    const display = $el.css('display');\n                    expect(display === 'block' || display === '').toBe(true);\n\n                    view.setRichText(false);\n                    expect($el.css('display')).toBe('none');\n                });\n            });\n        });\n\n        describe('setRichText', function() {\n            it('Emits change:richText', function() {\n                let emitted = false;\n\n                view.on('change:richText', function() {\n                    emitted = true;\n                });\n\n                view.show();\n                view.richText = false;\n                view.setRichText(true);\n\n                expect(emitted).toBe(true);\n            });\n\n            it('Emits change', function() {\n                let emitted = false;\n\n                view.on('change', function() {\n                    emitted = true;\n                });\n\n                view.show();\n                view.richText = false;\n                view.setRichText(true);\n\n                expect(emitted).toBe(true);\n            });\n\n            it('Marks dirty', function() {\n                view.show();\n                view.richText = false;\n                expect(view.isDirty()).toBe(false);\n\n                view.setRichText(true);\n                expect(view.isDirty()).toBe(true);\n            });\n\n            describe('Markdown to Text', function() {\n                beforeEach(function() {\n                    view = new RB.TextEditorView({\n                        richText: true,\n                    });\n                    view.render();\n                });\n\n                it('If shown', function() {\n                    view.show();\n                    view.setRichText(false);\n\n                    expect(view.richText).toBe(false);\n                    expect(view.$el.children('textarea').length).toBe(1);\n                    expect(view.$el.children('.CodeMirror').length).toBe(0);\n                });\n\n                it('If hidden', function() {\n                    view.setRichText(false);\n\n                    expect(view.richText).toBe(false);\n                    expect(view.$el.children('textarea').length).toBe(0);\n                    expect(view.$el.children('.CodeMirror').length).toBe(0);\n                });\n            });\n\n            describe('Text to Markdown', function() {\n                beforeEach(function() {\n                    view = new RB.TextEditorView({\n                        richText: false,\n                    });\n                    view.render();\n                });\n\n                it('If shown', function() {\n                    view.show();\n                    view.setRichText(true);\n\n                    expect(view.richText).toBe(true);\n                    expect(view.$el.children('textarea').length).toBe(0);\n                    expect(view.$el.children('.CodeMirror').length).toBe(1);\n                });\n\n                it('If hidden', function() {\n                    view.setRichText(true);\n\n                    expect(view.richText).toBe(true);\n                    expect(view.$el.children('textarea').length).toBe(0);\n                    expect(view.$el.children('.CodeMirror').length).toBe(0);\n                });\n            });\n        });\n\n        describe('setText', function() {\n            describe('If shown', function() {\n                it('If plain text', function() {\n                    view = new RB.TextEditorView({\n                        richText: false,\n                    });\n                    view.show();\n                    view.setText('Test');\n\n                    expect(view.$('textarea').val()).toBe('Test');\n                });\n\n                it('If Markdown', function() {\n                    view = new RB.TextEditorView({\n                        richText: true,\n                    });\n                    view.show();\n                    view.setText('Test');\n\n                    expect(view._editor._codeMirror.getValue()).toBe('Test');\n                });\n            });\n\n            it('If hidden', function() {\n                view = new RB.TextEditorView();\n                view.setText('Test');\n\n                expect(view.getText()).toBe('Test');\n            });\n        });\n\n        describe('getText', function() {\n            it('If plain text', function() {\n                view = new RB.TextEditorView({\n                    richText: false,\n                });\n                view.show();\n                view.setText('Test');\n\n                expect(view.getText()).toBe('Test');\n            });\n\n            it('If Markdown', function() {\n                view = new RB.TextEditorView({\n                    richText: true,\n                });\n                view.show();\n                view.setText('Test');\n\n                expect(view.getText()).toBe('Test');\n            });\n        });\n\n        describe('insertLine', function() {\n            it('If plain text', function() {\n                view = new RB.TextEditorView({\n                    richText: false,\n                });\n                view.show();\n                view.setText('Test');\n                view.insertLine('Test');\n\n                expect(view.getText()).toBe('Test\\nTest');\n            });\n\n            it('If Markdown', function() {\n                view = new RB.TextEditorView({\n                    richText:true,\n                });\n                view.show();\n                view.setText('Test');\n                view.insertLine('Test');\n\n                expect(view.getText()).toBe('Test\\nTest');\n            });\n        });\n\n        describe('show', function() {\n            it('registers drop target if rich text', function() {\n                spyOn(RB.DnDUploader.instance, 'registerDropTarget');\n\n                view = new RB.TextEditorView({\n                    richText: true,\n                });\n                view.show();\n\n                expect(RB.DnDUploader.instance.registerDropTarget)\n                    .toHaveBeenCalled();\n            });\n\n            it('does not register drop target if plain text', function() {\n                spyOn(RB.DnDUploader.instance, 'registerDropTarget');\n\n                view = new RB.TextEditorView({\n                    richText: false,\n                });\n                view.show();\n\n                expect(RB.DnDUploader.instance.registerDropTarget)\n                    .not.toHaveBeenCalled();\n            });\n        });\n\n        describe('hide', function() {\n            it('disables drop target', function() {\n                spyOn(RB.DnDUploader.instance, 'unregisterDropTarget');\n\n                view = new RB.TextEditorView({\n                    richText: true,\n                });\n                view.show();\n                view.hide();\n\n                expect(RB.DnDUploader.instance.unregisterDropTarget)\n                    .toHaveBeenCalled();\n            });\n        });\n    });\n\n    describe('inlineEditor options', function() {\n        let $el;\n        let $buttons;\n        let $markdownCheckbox;\n\n        function setupEditor(options) {\n            $el = $('<textarea>').inlineEditor(\n                RB.TextEditorView.getInlineEditorOptions(options));\n            view = $el.inlineEditor('field').data('text-editor');\n\n            $el.inlineEditor('startEdit');\n\n            $buttons = $el.inlineEditor('buttons');\n            expect($buttons.length).toBe(1);\n\n            $markdownCheckbox = $buttons.find('input[type=checkbox]');\n            expect($markdownCheckbox.length).toBe(1);\n        }\n\n        describe('Rich text checkbox', function() {\n            function setChecked(checked) {\n                /*\n                 * All this is needed to get Firefox and Chrome to play nice.\n                 */\n                $markdownCheckbox\n                    .click()\n                    .prop('checked', checked)\n                    .trigger('change');\n            }\n\n            it('Checking', function() {\n                setupEditor({\n                    richText: false,\n                });\n\n                expect($markdownCheckbox.prop('checked')).toBe(false);\n\n                setChecked(true);\n\n                expect($markdownCheckbox.prop('checked')).toBe(true);\n                expect(view.richText).toBe(true);\n            });\n\n            it('Unchecking', function() {\n                setupEditor({\n                    richText: true,\n                });\n\n                expect($markdownCheckbox.prop('checked')).toBe(true);\n\n                setChecked(false);\n\n                expect($markdownCheckbox.prop('checked')).toBe(false);\n                expect(view.richText).toBe(false);\n            });\n\n            it('Resets after cancel', function() {\n                setupEditor({\n                    richText: true,\n                });\n\n                setChecked(false);\n\n                $el.inlineEditor('cancel');\n\n                expect($markdownCheckbox.prop('checked')).toBe(true);\n                expect(view.richText).toBe(true);\n                expect(view.isDirty()).toBe(false);\n            });\n\n            describe('Initial state', function() {\n                it('If plain text', function() {\n                    setupEditor({\n                        richText: false,\n                    });\n\n                    expect($markdownCheckbox.prop('checked')).toBe(false);\n                });\n\n                it('If Markdown', function() {\n                    setupEditor({\n                        richText: true,\n                    });\n\n                    expect($markdownCheckbox.prop('checked')).toBe(true);\n                });\n            });\n        });\n    });\n\n    describe('Drag and Drop', function() {\n        beforeEach(function() {\n            view = new RB.TextEditorView({\n                richText: true,\n            });\n        });\n\n        describe('_isImage', function() {\n            it('correctly checks mimetype', function() {\n                const file = {\n                    type: 'image/jpeg',\n                    name: 'testimage.jpg',\n                };\n\n                expect(view._isImage(file)).toBe(true);\n            });\n\n            it('checks filename extension', function() {\n                const file = {\n                    name: 'testimage.jpg',\n                };\n\n                expect(view._isImage(file)).toBe(true);\n            });\n\n            it('returns false when given invalid type', function() {\n                const file = {\n                    type: 'application/json',\n                    name: 'testimage.jps',\n                };\n\n                expect(view._isImage(file)).toBe(false);\n            });\n        });\n    });\n});\n"]}