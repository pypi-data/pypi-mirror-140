{"version":3,"sources":["fileAttachmentCommentModel.es6.js"],"names":[],"mappings":"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","file":"fileAttachmentCommentModel.js","sourcesContent":["/**\n * A comment on a file attachment.\n *\n * Model Attributes:\n *     diffAgainstFileAttachmentID (number):\n *         The ID of the file attachment that is the \"new\" side of a comment on\n *         a file diff.\n *\n *     diffAgainstFileAttachment (RB.FileAttachment):\n *         The file attachment that is the \"new\" side of a comment on a file\n *         diff.\n *\n *     fileAttachmentID (number):\n *         The ID of the file attachment that the comment is on, or the ID of\n *         the file attachment that is the \"old\" side of a comment on a file\n *         diff.\n *\n *     fileAttachment (RB.FileAttachment):\n *         The file attachment that the comment is on, or the ID of the file\n *         attachment that is the \"old\" side of a comment on a file diff.\n *\n *     linkText (string):\n *         The text used to describe a link to the file. This may differ\n *         depending on the comment.\n *\n *     reviewURL (string):\n *         The URL for the file attachment review UI for the comment.\n *\n *     thumbnailHTML (string):\n *         The HTML representing a thumbnail, if any, for this comment.\n */\nRB.FileAttachmentComment = RB.BaseComment.extend({\n    defaults: _.defaults({\n        diffAgainstFileAttachmentID: null,\n        diffAgainstFileAttachment: null,\n        fileAttachmentID: null,\n        fileAttachment: null,\n        linkText: null,\n        reviewURL: null,\n        thumbnailHTML: null\n    }, RB.BaseComment.prototype.defaults()),\n\n    rspNamespace: 'file_attachment_comment',\n    expandedFields: ['diff_against_file_attachment', 'file_attachment'],\n\n    attrToJsonMap: _.defaults({\n        diffAgainstFileAttachmentID: 'diff_against_file_attachment_id',\n        fileAttachmentID: 'file_attachment_id',\n        linkText: 'link_text',\n        reviewURL: 'review_url',\n        thumbnailHTML: 'thumbnail_html'\n    }, RB.BaseComment.prototype.attrToJsonMap),\n\n    serializedAttrs: [\n        'diffAgainstFileAttachmentID',\n        'fileAttachmentID'\n    ].concat(RB.BaseComment.prototype.serializedAttrs),\n\n    deserializedAttrs: [\n        'linkText',\n        'thumbnailHTML',\n        'reviewURL'\n    ].concat(RB.BaseComment.prototype.deserializedAttrs),\n\n    serializers: _.defaults({\n        fileAttachmentID: RB.JSONSerializers.onlyIfUnloaded,\n        diffAgainstFileAttachmentID: RB.JSONSerializers.onlyIfUnloadedAndValue\n    }, RB.BaseComment.prototype.serializers),\n\n    /**\n     * Deserialize comment data from an API payload.\n     *\n     * Args:\n     *     rsp (object):\n     *         The response from the server.\n     *\n     * Returns:\n     *     object:\n     *     Attribute values to set on the model.\n     */\n    parseResourceData(rsp) {\n        const result = RB.BaseComment.prototype.parseResourceData.call(\n            this, rsp);\n\n        result.fileAttachment = new RB.FileAttachment(rsp.file_attachment, {\n            parse: true\n        });\n        result.fileAttachmentID = result.fileAttachment.id;\n\n        if (rsp.diff_against_file_attachment) {\n            result.diffAgainstFileAttachment = new RB.FileAttachment(\n                rsp.diff_against_file_attachment, {\n                    parse: true\n                });\n\n            result.diffAgainstFileAttachmentID =\n                result.diffAgainstFileAttachment.id;\n        }\n\n        return result;\n    },\n\n    /**\n     * Perform validation on the attributes of the model.\n     *\n     * This will check the file attachment ID along with the default\n     * comment validation.\n     *\n     * Args:\n     *     attrs (object):\n     *         Model attributes to validate.\n     *\n     *     options (object):\n     *         Additional options for the operation.\n     *\n     * Returns:\n     *     string:\n     *     An error string, if appropriate.\n     */\n    validate(attrs, options) {\n        if (_.has(attrs, 'fileAttachmentID') && !attrs.fileAttachmentID) {\n            return RB.FileAttachmentComment.strings.INVALID_FILE_ATTACHMENT_ID;\n        }\n\n        return _super(this).validate.call(this, attrs, options);\n    }\n}, {\n    strings: {\n        INVALID_FILE_ATTACHMENT_ID: 'fileAttachmentID must be a valid ID'\n    }\n});\n"]}