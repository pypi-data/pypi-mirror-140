{"version":3,"sources":["fileAttachmentRevisionSelectorView.es6.js"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA,EAAE,CAAC,kCAAH,GAAwC,EAAE,CAAC,oBAAH,CAAwB,MAAxB,CAA+B;AACnE;AACJ;AACA;AACI,EAAA,UAJmE,wBAItD;AACT,IAAA,EAAE,CAAC,oBAAH,CAAwB,SAAxB,CAAkC,UAAlC,CAA6C,IAA7C,CAAkD,IAAlD,EAAwD;AACpD,MAAA,gBAAgB,EAAE,IADkC;AAEpD,MAAA,UAAU,EAAE;AAFwC,KAAxD;AAIH,GATkE;;AAWnE;AACJ;AACA;AACA;AACA;AACA;AACA;AACI,EAAA,MAlBmE,oBAkB1D;AACL,QAAM,YAAY,GAAG,KAAK,KAAL,CAAW,GAAX,CAAe,cAAf,CAArB;AACA,QAAM,MAAM,GAAG,oBAAf;;AAEA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,IAAI,YAArB,EAAmC,CAAC,EAApC,EAAwC;AACpC,MAAA,MAAM,CAAC,IAAP,CAAY,CAAC,CAAC,QAAF,EAAZ;AACH;;AAED,IAAA,EAAE,CAAC,oBAAH,CAAwB,SAAxB,CAAkC,MAAlC,CAAyC,IAAzC,CACI,IADJ,EACU,MADV,EACkB;AAAK;AADvB;AAEH,GA5BkE;;AA8BnE;AACJ;AACA;AACI,EAAA,OAjCmE,qBAiCzD;AACN,QAAM,QAAQ,GAAG,KAAK,KAAL,CAAW,GAAX,CAAe,cAAf,CAAjB;AACA,QAAM,YAAY,GAAG,KAAK,KAAL,CAAW,GAAX,CAAe,cAAf,CAArB;;AAEA,QAAI,YAAJ,EAAkB;AACd,WAAK,OAAL,GAAe,CAAC,QAAD,EAAW,YAAX,CAAf;AACH,KAFD,MAEO;AACH,WAAK,OAAL,GAAe,CAAC,CAAD,EAAI,QAAJ,CAAf;AACH;;AAED,QAAI,KAAK,SAAT,EAAoB;AAChB,WAAK,cAAL;AACH;AACJ,GA9CkE;;AAgDnE;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI,EAAA,aAzDmE,yBAyDrD,EAzDqD,EAyDjD;AACd,QAAM,OAAO,GAAG,CAAC,CAAC,EAAE,CAAC,aAAJ,CAAjB;AACA,SAAK,OAAL,CAAa,kBAAb,EAAiC,CAAC,CAAD,EAAI,OAAO,CAAC,IAAR,CAAa,UAAb,CAAJ,CAAjC;AACH;AA5DkE,CAA/B,CAAxC","file":"fileAttachmentRevisionSelectorView.js","sourcesContent":["/**\n * A view that allows users to select a revision of a file attachment to view.\n */\nRB.FileAttachmentRevisionSelectorView = RB.RevisionSelectorView.extend({\n    /**\n     * Initialize the view.\n     */\n    initialize() {\n        RB.RevisionSelectorView.prototype.initialize.call(this, {\n            firstLabelActive: true,\n            numHandles: 2,\n        });\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     RB.FileAttachmentRevisionSelectorView:\n     *     This object, for chaining.\n     */\n    render() {\n        const numRevisions = this.model.get('numRevisions');\n        const labels = [gettext('No Diff')];\n\n        for (let i = 1; i <= numRevisions; i++) {\n            labels.push(i.toString());\n        }\n\n        RB.RevisionSelectorView.prototype.render.call(\n            this, labels, true /* whether the first label is clickable */);\n    },\n\n    /**\n     * Update the displayed revision based on the model.\n     */\n    _update() {\n        const revision = this.model.get('fileRevision');\n        const diffRevision = this.model.get('diffRevision');\n\n        if (diffRevision) {\n            this._values = [revision, diffRevision];\n        } else {\n            this._values = [0, revision];\n        }\n\n        if (this._rendered) {\n            this._updateHandles();\n        }\n    },\n\n    /**\n     * Callback for when one of the labels is clicked.\n     *\n     * This will jump to the target revision.\n     *\n     * Args:\n     *     ev (Event):\n     *         The click event.\n     */\n    _onLabelClick(ev) {\n        const $target = $(ev.currentTarget);\n        this.trigger('revisionSelected', [0, $target.data('revision')]);\n    },\n});\n"]}