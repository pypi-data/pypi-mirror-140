{"version":3,"sources":["userActivityWidgetView.es6.js"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,CAAC,KAAH,CAAS,sBAAT,GAAkC,EAAE,CAAC,KAAH,CAAS,UAAT,CAAoB,MAApB,CAA2B;AACzD,EAAA,QAAQ,EAAE,CAAC,CAAC,QAAF,iMAD+C;;AAQzD;AACJ;AACA;AACA;AACA;AACA;AACI,EAAA,YAdyD,0BAc1C;AACX,SAAK,QAAL,CAAc,IAAd,CAAmB,KAAK,QAAL,CAAc;AAC7B,MAAA,UAAU,EAAE,KAAK,KAAL,CAAW,GAAX,CAAe,OAAf,CADiB;AAE7B,MAAA,cAAc;AAFe,KAAd,CAAnB;AAKA,SAAK,OAAL,GAAe,KAAK,CAAL,CAAO,yCAAP,CAAf;;AAEA,SAAK,SAAL;AACH,GAvBwD;;AAyBzD;AACJ;AACA;AACA;AACA;AACI,EAAA,UA9ByD,wBA8B5C;AACT,SAAK,SAAL;AACH,GAhCwD;;AAkCzD;AACJ;AACA;AACI,EAAA,SArCyD,uBAqC7C;AACR,QAAM,KAAK,GAAG,KAAK,KAAnB;AACA,QAAM,GAAG,GAAG,KAAK,CAAC,GAAN,CAAU,KAAV,CAAZ;AACA,QAAM,SAAS,GAAG,KAAK,CAAC,GAAN,CAAU,WAAV,CAAlB;AACA,QAAM,UAAU,GAAG,KAAK,CAAC,GAAN,CAAU,YAAV,CAAnB;AACA,QAAM,SAAS,GAAG,KAAK,CAAC,GAAN,CAAU,WAAV,CAAlB;AACA,QAAM,UAAU,GAAG,KAAK,CAAC,GAAN,CAAU,YAAV,CAAnB;AAEA,IAAA,CAAC,CAAC,IAAF,CACI,KAAK,OADT,EAEI,CACI;AACI,MAAA,IAAI,EAAE,GADV;AAEI,MAAA,KAAK,EAAE,WAAW,yBACC,CAAC,GAAD,CADD;AAFtB,KADJ,EAMI;AACI,MAAA,IAAI,EAAE,SADV;AAEI,MAAA,KAAK,EAAE,WAAW,6BACC,CAAC,SAAD,CADD;AAFtB,KANJ,EAWI;AACI,MAAA,IAAI,EAAE,UADV;AAEI,MAAA,KAAK,EAAE,WAAW,8BACC,CAAC,UAAD,CADD;AAFtB,KAXJ,EAgBI;AACI,MAAA,IAAI,EAAE,SADV;AAEI,MAAA,KAAK,EAAE,WAAW,8BACC,CAAC,SAAD,CADD;AAFtB,KAhBJ,EAqBI;AACI,MAAA,IAAI,EAAE,UADV;AAEI,MAAA,KAAK,EAAE,WAAW,8BACC,CAAC,UAAD,CADD;AAFtB,KArBJ,CAFJ,EA6BI;AACI,MAAA,MAAM,EAAE;AACJ,QAAA,GAAG,EAAE;AACD,UAAA,IAAI,EAAE,IADL;AAED,UAAA,KAAK,EAAE;AACH,YAAA,IAAI,EAAE,IADH;AAEH,YAAA,MAAM,EAAE,CAFL;AAGH,YAAA,UAAU,EAAE;AACR,cAAA,OAAO,EAAE;AADD,aAHT;AAMH,YAAA,SAAS,EAAE,mBAAC,KAAD,EAAQ,MAAR;AAAA,oCACC,IAAI,CAAC,KAAL,CAAW,MAAM,CAAC,OAAlB,CADD;AAAA;AANR;AAFN;AADD;AADZ,KA7BJ;AA+CA,SAAK,OAAL,CAAa,aAAb;AACH;AA7FwD,CAA3B,CAAlC","file":"userActivityWidgetView.js","sourcesContent":["/**\n * Displays stats on how often users have logged in or used Review Board.\n *\n * This is displayed as a pie graph, with a legend alongside it breaking\n * down the activity into 1-6 day, 7-29 day, 30-59 day, 60-89 day, and 90+\n * day ranges.\n */\nRB.Admin.UserActivityWidgetView = RB.Admin.WidgetView.extend({\n    template: _.template(dedent`\n        <div class=\"rb-c-admin-user-activity-widget__chart\"></div>\n        <div class=\"rb-c-admin-user-activity-widget__user-total\">\n         <%- userTotalLabel %>: <strong><%- totalUsers %></strong>\n        </div>\n    `),\n\n    /**\n     * Render the widget.\n     *\n     * This will build the basic structure of the widget's content and\n     * then plot the chart.\n     */\n    renderWidget() {\n        this.$content.html(this.template({\n            totalUsers: this.model.get('total'),\n            userTotalLabel: gettext('Total Users'),\n        }));\n\n        this._$chart = this.$('.rb-c-admin-user-activity-widget__chart');\n\n        this._plotData();\n    },\n\n    /**\n     * Handle updates to the size of the widget.\n     *\n     * This will re-render the chart for the new size.\n     */\n    updateSize() {\n        this._plotData();\n    },\n\n    /**\n     * Plot user activity into a chart.\n     */\n    _plotData() {\n        const model = this.model;\n        const now = model.get('now');\n        const sevenDays = model.get('sevenDays');\n        const thirtyDays = model.get('thirtyDays');\n        const sixtyDays = model.get('sixtyDays');\n        const ninetyDays = model.get('ninetyDays');\n\n        $.plot(\n            this._$chart,\n            [\n                {\n                    data: now,\n                    label: interpolate(gettext('Active (%s)'),\n                                       [now]),\n                },\n                {\n                    data: sevenDays,\n                    label: interpolate(gettext('7 days ago (%s)'),\n                                       [sevenDays]),\n                },\n                {\n                    data: thirtyDays,\n                    label: interpolate(gettext('30 days ago (%s)'),\n                                       [thirtyDays]),\n                },\n                {\n                    data: sixtyDays,\n                    label: interpolate(gettext('60 days ago (%s)'),\n                                       [sixtyDays]),\n                },\n                {\n                    data: ninetyDays,\n                    label: interpolate(gettext('90 days ago (%s)'),\n                                       [ninetyDays]),\n                },\n            ],\n            {\n                series: {\n                    pie: {\n                        show: true,\n                        label: {\n                            show: true,\n                            radius: 1,\n                            background: {\n                                opacity: 0.8,\n                            },\n                            formatter: (label, series) =>\n                                `<div>${Math.round(series.percent)}%</div>`,\n                        },\n                    },\n                },\n            }\n        );\n\n        this.trigger('sizeChanged');\n    },\n});\n"]}