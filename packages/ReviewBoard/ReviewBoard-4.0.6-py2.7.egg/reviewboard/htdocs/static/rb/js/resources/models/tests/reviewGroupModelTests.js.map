{"version":3,"sources":["reviewGroupModelTests.es6.js"],"names":[],"mappings":"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","file":"reviewGroupModelTests.js","sourcesContent":["suite('rb/resources/models/ReviewGroup', function() {\n    describe('setStarred', function() {\n        const url = '/api/users/testuser/watched/groups/';\n        let callbacks;\n        let group;\n        let session;\n\n        beforeEach(function() {\n            RB.UserSession.instance = null;\n            session = RB.UserSession.create({\n                username: 'testuser',\n                watchedReviewGroupsURL: url,\n            });\n\n            group = new RB.ReviewGroup({\n                id: 1,\n            });\n\n            callbacks = {\n                success: function() {},\n                error: function() {},\n            };\n\n            spyOn(session.watchedGroups, 'addImmediately').and.callThrough();\n            spyOn(session.watchedGroups, 'removeImmediately').and.callThrough();\n            spyOn(RB, 'apiCall').and.callThrough();\n            spyOn(callbacks, 'success');\n            spyOn(callbacks, 'error');\n        });\n\n        it('true', function() {\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.type).toBe('POST');\n                expect(request.url).toBe(url);\n\n                request.success({\n                    stat: 'ok',\n                });\n            });\n\n            group.setStarred(true, callbacks);\n\n            expect(session.watchedGroups.addImmediately).toHaveBeenCalled();\n            expect(RB.apiCall).toHaveBeenCalled();\n            expect($.ajax).toHaveBeenCalled();\n            expect(callbacks.success).toHaveBeenCalled();\n            expect(callbacks.error).not.toHaveBeenCalled();\n        });\n\n        it('false', function() {\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.type).toBe('DELETE');\n                expect(request.url).toBe(url + '1/');\n\n                request.success({\n                    stat: 'ok',\n                });\n            });\n\n            group.setStarred(false, callbacks);\n\n            expect(session.watchedGroups.removeImmediately).toHaveBeenCalled();\n            expect(RB.apiCall).toHaveBeenCalled();\n            expect($.ajax).toHaveBeenCalled();\n            expect(callbacks.success).toHaveBeenCalled();\n            expect(callbacks.error).not.toHaveBeenCalled();\n        });\n    });\n\n    describe('addUser', function() {\n        let callbacks;\n        let group;\n\n        beforeEach(function() {\n            group = new RB.ReviewGroup({\n                id: 1,\n                name: 'test-group',\n            });\n\n            callbacks = {\n                success: function() {},\n                error: function() {},\n            };\n\n            spyOn(RB, 'apiCall').and.callThrough();\n            spyOn(callbacks, 'success');\n            spyOn(callbacks, 'error');\n        });\n\n        it('Loaded group', function() {\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.type).toBe('POST');\n                expect(request.data.username).toBe('my-user');\n\n                request.success({\n                    stat: 'ok',\n                });\n            });\n\n            group.addUser('my-user', callbacks);\n\n            expect(RB.apiCall).toHaveBeenCalled();\n            expect($.ajax).toHaveBeenCalled();\n            expect(callbacks.success).toHaveBeenCalled();\n        });\n\n        it('Unloaded group', function() {\n            spyOn($, 'ajax');\n\n            group.set('id', null);\n            expect(group.isNew()).toBe(true);\n\n            group.addUser('my-user', callbacks);\n\n            expect(RB.apiCall).not.toHaveBeenCalled();\n            expect($.ajax).not.toHaveBeenCalled();\n            expect(callbacks.error).toHaveBeenCalled();\n        });\n    });\n\n    describe('removeUser', function() {\n        let callbacks;\n        let group;\n\n        beforeEach(function() {\n            group = new RB.ReviewGroup({\n                id: 1,\n                name: 'test-group',\n            });\n\n            callbacks = {\n                success: function() {},\n                error: function() {},\n            };\n\n            spyOn(RB, 'apiCall').and.callThrough();\n            spyOn(callbacks, 'success');\n            spyOn(callbacks, 'error');\n        });\n\n        it('Loaded group', function() {\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.type).toBe('DELETE');\n\n                request.success();\n            });\n\n            group.removeUser('my-user', callbacks);\n\n            expect(RB.apiCall).toHaveBeenCalled();\n            expect($.ajax).toHaveBeenCalled();\n            expect(callbacks.success).toHaveBeenCalled();\n        });\n\n        it('Unloaded group', function() {\n            spyOn($, 'ajax');\n\n            group.set('id', null);\n            expect(group.isNew()).toBe(true);\n\n            group.removeUser('my-user', callbacks);\n\n            expect(RB.apiCall).not.toHaveBeenCalled();\n            expect($.ajax).not.toHaveBeenCalled();\n            expect(callbacks.error).toHaveBeenCalled();\n        });\n    });\n});\n"]}