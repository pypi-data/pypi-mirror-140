{"version":3,"sources":["diffCommentsHintView.es6.js"],"names":[],"mappings":"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","file":"diffCommentsHintView.js","sourcesContent":["/**\n * A view which gives the user hints about comments in other revisions.\n */\nRB.DiffCommentsHintView = Backbone.View.extend({\n    events: {\n        'click .revision': '_onRevisionSelected',\n        'click .interdiff': '_onInterdiffSelected',\n    },\n\n    template: _.template(dedent`\n        <div class=\"box-container\">\n         <div class=\"box important\">\n          <div class=\"box-inner comments-hint\">\n           <h1><%- unpublishedCommentsHeader %></h1>\n           <p><%- unpublishedCommentsText %></p>\n           <ul>\n           </ul>\n          </div>\n         </div>\n        </div>\n    `),\n\n    /**\n     * Initialize the view.\n     */\n    initialize() {\n        this.listenTo(this.model, 'change', this.render);\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     RB.DiffCommentsHintView:\n     *     This object, for chaining.\n     */\n    render() {\n        const revisionText = gettext('Revision %s');\n        const interdiffText = gettext('Interdiff revision %(oldRevision)s - %(newRevision)s');\n\n        if (this.model.get('hasOtherComments')) {\n            this.$el.html(this.template({\n                unpublishedCommentsHeader: gettext('You have unpublished comments on other revisions'),\n                unpublishedCommentsText: gettext('Your review consists of comments on the following revisions:')\n            }));\n\n            const $ul = this.$('ul');\n\n            this.model.get('diffsetsWithComments').forEach(diffset => {\n                const $li = $('<li/>')\n                    .addClass('revision')\n                    .data('revision', diffset.revision)\n                    .text(interpolate(revisionText, [diffset.revision]))\n                    .appendTo($ul);\n\n                if (diffset.isCurrent) {\n                    $li.addClass('current');\n                }\n            });\n\n            this.model.get('interdiffsWithComments').forEach(interdiff => {\n                const $li = $('<li/>')\n                    .addClass('interdiff')\n                    .data({\n                        'first-revision': interdiff.oldRevision,\n                        'second-revision': interdiff.newRevision\n                    })\n                    .text(interpolate(\n                        interdiffText,\n                        {\n                            oldRevision: interdiff.oldRevision,\n                            newRevision: interdiff.newRevision\n                        },\n                        true))\n                    .appendTo($ul);\n\n                if (interdiff.isCurrent) {\n                    $li.addClass('current');\n                }\n            });\n        } else {\n            this.$el.empty();\n        }\n\n        return this;\n    },\n\n    /**\n     * Callback for when a single revision is selected.\n     *\n     * Args:\n     *     ev (Event):\n     *         The click event.\n     */\n    _onRevisionSelected(ev) {\n        const $target = $(ev.currentTarget);\n\n        if (!$target.hasClass('current')) {\n            this.trigger('revisionSelected', [0, $target.data('revision')]);\n        }\n    },\n\n    /**\n     * Callback for when an interdiff is selected.\n     *\n     * Args:\n     *     ev (Event):\n     *         The click event.\n     */\n    _onInterdiffSelected(ev) {\n        const $target = $(ev.currentTarget);\n\n        if (!$target.hasClass('current')) {\n            this.trigger('revisionSelected',\n                         [$target.data('first-revision'),\n                          $target.data('second-revision')]);\n        }\n    }\n});\n"]}