{"version":3,"sources":["dashboardPageModelTests.es6.js"],"names":[],"mappings":"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","file":"dashboardPageModelTests.js","sourcesContent":["suite('rb/admin/models/DashboardPage', function() {\n    let page;\n\n    beforeEach(function() {\n        page = new RB.Admin.DashboardPage();\n    });\n\n    describe('Widgets', function() {\n        it('Loading', function() {\n            page.set('widgetsData', [\n                {\n                    id: 'widget-1',\n                    domID: 'widget-1',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                    modelAttrs: {\n                        myAttr: 1,\n                    },\n                    viewOptions: {\n                        myOption: true,\n                    },\n                },\n                {\n                    id: 'widget-2',\n                    domID: 'widget-2',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                    modelAttrs: {\n                        myAttr: 2,\n                    },\n                    viewOptions: {\n                        myOption: false,\n                    },\n                },\n            ]);\n\n            const onWidgetLoaded = jasmine.createSpy();\n\n            page.loadWidgets(onWidgetLoaded);\n\n            expect(page.widgets.length).toBe(2);\n\n            const model1 = page.widgets.at(0);\n            const model2 = page.widgets.at(1);\n\n            expect(model1).toBeInstanceOf(RB.Admin.Widget);\n            expect(model1.get('myAttr')).toBe(1);\n\n            expect(model2).toBeInstanceOf(RB.Admin.Widget);\n            expect(model2.get('myAttr')).toBe(2);\n\n            expect(onWidgetLoaded).toHaveBeenCalledTimes(2);\n            expect(onWidgetLoaded).toHaveBeenCalledWith({\n                domID: 'widget-1',\n                ViewType: RB.Admin.WidgetView,\n                viewOptions: {\n                    myOption: true,\n                },\n                widgetModel: model1,\n            });\n            expect(onWidgetLoaded).toHaveBeenCalledWith({\n                domID: 'widget-2',\n                ViewType: RB.Admin.WidgetView,\n                viewOptions: {\n                    myOption: false,\n                },\n                widgetModel: model2,\n            });\n        });\n\n        it('Loading errors sandboxed', function() {\n            spyOn(console, 'error');\n\n            page.set('widgetsData', [\n                {\n                    id: 'widget-1',\n                    domID: 'widget-1',\n                    viewClass: 'BadViewClass',\n                    modelClass: 'BadModelClass',\n                },\n                {\n                    id: 'widget-2',\n                    domID: 'widget-2',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                    modelAttrs: {\n                        myAttr: 2,\n                    },\n                    viewOptions: {\n                        myOption: false,\n                    },\n                },\n            ]);\n\n            const onWidgetLoaded = jasmine.createSpy();\n\n            page.loadWidgets(onWidgetLoaded);\n\n            expect(page.widgets.length).toBe(1);\n\n            const model1 = page.widgets.at(0);\n            expect(model1).toBeInstanceOf(RB.Admin.Widget);\n\n            expect(onWidgetLoaded).toHaveBeenCalledTimes(1);\n            expect(onWidgetLoaded).toHaveBeenCalledWith({\n                domID: 'widget-2',\n                ViewType: RB.Admin.WidgetView,\n                viewOptions: {\n                    myOption: false,\n                },\n                widgetModel: model1,\n            });\n\n            expect(console.error).toHaveBeenCalled();\n            const args = console.error.calls.argsFor(0);\n            expect(args[0]).toBe(\n                'Unable to render administration widget \"%s\": %s');\n            expect(args[1]).toBe('widget-1');\n        });\n    });\n});\n"]}