{"version":3,"sources":["reviewReplyDraftBannerView.es6.js"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA,EAAE,CAAC,iBAAH,CAAqB,0BAArB,GAAkD,EAAE,CAAC,kBAAH,CAAsB,MAAtB,CAA6B;AAC3E,EAAA,SAAS,EAAE,QADgE;AAG3E,EAAA,QAAQ,EAAE,CAAC,CAAC,QAAF,saAHiE;AAoB3E,EAAA,MAAM,EAAE;AACJ,6BAAyB,mBADrB;AAEJ,6BAAyB;AAFrB,GApBmE;;AAyB3E;AACJ;AACA;AACA;AACA;AACA;AACA;AACI,EAAA,MAhC2E,oBAgClE;AAAA;;AACL,IAAA,EAAE,CAAC,kBAAH,CAAsB,SAAtB,CAAgC,MAAhC,CAAuC,IAAvC,CAA4C,IAA5C;AAEA,QAAM,mBAAmB,GAAG,KAAK,OAAL,CAAa,mBAAzC;AAEA,SAAK,GAAL,CAAS,IAAT,CAAc,KAAK,QAAL,CAAc;AACxB,MAAA,SAAS,mCADe;AAExB,MAAA,YAAY,8CAFY;AAGxB,MAAA,WAAW,oBAHa;AAIxB,MAAA,WAAW,oBAJa;AAKxB,MAAA,aAAa,wBALW;AAMxB,MAAA,aAAa,EAAE,mBAAmB,CAAC,GAApB,CAAwB,eAAxB;AANS,KAAd,CAAd;AASA,SAAK,QAAL,CAAc,KAAK,KAAnB,EAA0B,mBAA1B,EACc;AAAA,aAAM,KAAI,CAAC,CAAL,CAAO,OAAP,EAAgB,IAAhB,CAAqB,UAArB,EAAiC,IAAjC,CAAN;AAAA,KADd;AAEA,SAAK,QAAL,CAAc,KAAK,KAAnB,EAA0B,OAA1B,EACc;AAAA,aAAM,KAAI,CAAC,CAAL,CAAO,OAAP,EAAgB,IAAhB,CAAqB,UAArB,EAAiC,KAAjC,CAAN;AAAA,KADd;AAEA,SAAK,QAAL,CAAc,KAAK,KAAnB,EAA0B,cAA1B,EACc,UAAA,SAAS;AAAA,aAAI,KAAK,CAAC,SAAD,CAAT;AAAA,KADvB;AAGA,WAAO,IAAP;AACH,GAtD0E;;AAwD3E;AACJ;AACA;AACA;AACA;AACI,EAAA,iBA7D2E,+BA6DvD;AAChB,QAAM,UAAU,GAAG,KAAK,CAAL,CAAO,aAAP,CAAnB;AAEA,SAAK,KAAL,CAAW,OAAX,CAAmB;AACf,MAAA,OAAO,EAAE,UAAU,CAAC,MAAX,KAAsB,CAAtB,IAA2B,CAAC,UAAU,CAAC,EAAX,CAAc,UAAd;AADtB,KAAnB,EAEG,IAFH;AAGH,GAnE0E;;AAqE3E;AACJ;AACA;AACA;AACA;AACI,EAAA,iBA1E2E,+BA0EvD;AAChB,SAAK,KAAL,CAAW,OAAX;AACH;AA5E0E,CAA7B,CAAlD","file":"reviewReplyDraftBannerView.js","sourcesContent":["/**\n * A banner that represents a pending reply to a review.\n *\n * The banner offers actions for publishing and discarding the review.\n */\nRB.ReviewRequestPage.ReviewReplyDraftBannerView = RB.FloatingBannerView.extend({\n    className: 'banner',\n\n    template: _.template(dedent`\n        <h1><%- draftText %></h1>\n        <p><%- reminderText %></p>\n        <span class=\"banner-actions\">\n         <input type=\"button\" value=\"<%- publishText %>\"\n                class=\"publish-button\" />\n         <input type=\"button\" value=\"<%- discardText %>\"\n                class=\"discard-button\" />\n        </span>\n        <% if (showSendEmail) { %>\n         <label>\n          <input type=\"checkbox\" class=\"send-email\" checked />\n          <%- sendEmailText %>\n        </label>\n        <% } %>\n    `),\n\n    events: {\n        'click .publish-button': '_onPublishClicked',\n        'click .discard-button': '_onDiscardClicked',\n    },\n\n    /**\n     * Render the banner.\n     *\n     * Returns:\n     *     RB.ReviewRequestPage.ReviewReplyDraftBannerView:\n     *     This object, for chaining.\n     */\n    render() {\n        RB.FloatingBannerView.prototype.render.call(this);\n\n        const reviewRequestEditor = this.options.reviewRequestEditor;\n\n        this.$el.html(this.template({\n            draftText: gettext('This reply is a draft.'),\n            reminderText: gettext('Be sure to publish when finished.'),\n            publishText: gettext('Publish'),\n            discardText: gettext('Discard'),\n            sendEmailText: gettext('Send E-Mail'),\n            showSendEmail: reviewRequestEditor.get('showSendEmail'),\n        }));\n\n        this.listenTo(this.model, 'saving destroying',\n                      () => this.$('input').prop('disabled', true));\n        this.listenTo(this.model, 'saved',\n                      () => this.$('input').prop('disabled', false));\n        this.listenTo(this.model, 'publishError',\n                      errorText => alert(errorText));\n\n        return this;\n    },\n\n    /**\n     * Handler for when Publish is clicked.\n     *\n     * Publishes the reply.\n     */\n    _onPublishClicked() {\n        const $sendEmail = this.$('.send-email');\n\n        this.model.publish({\n            trivial: $sendEmail.length === 1 && !$sendEmail.is(':checked'),\n        }, this);\n    },\n\n    /**\n     * Handler for when Discard is clicked.\n     *\n     * Discards the reply.\n     */\n    _onDiscardClicked() {\n        this.model.destroy();\n    },\n});\n"]}