{"version":3,"sources":["menuButtonViewTests.es6.js"],"names":[],"mappings":"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","file":"menuButtonViewTests.js","sourcesContent":["suite('rb/ui/views/MenuButtonView', function() {\n    describe('Rendering', function() {\n        it('With primary button', function() {\n            const view = new RB.MenuButtonView({\n                ariaMenuLabel: 'Test ARIA label',\n                menuItems: [\n                    {text: 'Item 1'},\n                    {text: 'Item 2'},\n                    {text: 'Item 3'},\n                ],\n                onPrimaryButtonClick: () => {},\n                text: 'Button label',\n            });\n            view.render();\n\n            expect(view.el).toHaveClass('rb-c-menu-button');\n            expect(view.$el.attr('role')).toBe('group');\n            expect(view.$primaryButton.length).toBe(1);\n\n            const $primaryButton = view.$('.rb-c-menu-button__primary');\n            expect($primaryButton.length).toBe(1);\n\n            const $toggleButton = view.$('.rb-c-menu-button__toggle');\n            expect($toggleButton.length).toBe(1);\n            expect($toggleButton[0].id)\n                .toBe(view.menu.$el.attr('aria-labelledby'));\n            expect($toggleButton.attr('aria-label')).toBe('Test ARIA label');\n            expect($toggleButton.children()[0])\n                .toHaveClass('rb-icon-dropdown-arrow');\n\n            expect(view.menu.el.children.length).toBe(3);\n        });\n\n        it('Without primary button', function() {\n            const view = new RB.MenuButtonView({\n                ariaMenuLabel: 'Test ARIA label',\n                menuItems: [\n                    {text: 'Item 1'},\n                    {text: 'Item 2'},\n                ],\n                text: 'Button label',\n            });\n            view.render();\n\n            expect(view.el).toHaveClass('rb-c-menu-button');\n            expect(view.$el.attr('role')).toBe('group');\n            expect(view.$primaryButton).toBeNull();\n\n            const $primaryButton = view.$('.rb-c-menu-button__primary');\n            expect($primaryButton.length).toBe(0);\n\n            const $toggleButton = view.$('.rb-c-menu-button__toggle');\n            expect($toggleButton.length).toBe(1);\n            expect($toggleButton[0].id)\n                .toBe(view.menu.$el.attr('aria-labelledby'));\n            expect($toggleButton.attr('aria-label')).toBeUndefined();\n            expect($toggleButton.text().trim()).toBe('Button label');\n            expect($toggleButton.children()[0])\n                .toHaveClass('rb-icon-dropdown-arrow');\n\n            expect(view.menu.el.children.length).toBe(2);\n        });\n    });\n\n    describe('Events', function() {\n        let view;\n\n        function sendDropDownButtonEvent(name, options) {\n            view._$dropDownButton.trigger($.Event(name, options));\n        }\n\n        function sendKeyDown(keyCode) {\n            sendDropDownButtonEvent('keydown', {\n                which: keyCode,\n            });\n        }\n\n        beforeEach(function() {\n            view = new RB.MenuButtonView();\n            view.render();\n\n            /* Don't let this override any state we set. */\n            spyOn(view, '_updateMenuPosition');\n        });\n\n        describe('keydown', function() {\n            function openMenuTests(keyCode) {\n                it('With openDirection=up', function() {\n                    view._openDirection = 'up';\n                    spyOn(view.menu, 'focusLastItem');\n\n                    sendKeyDown(keyCode);\n\n                    expect(view.menu.isOpen).toBeTrue();\n                    expect(view.menu.focusLastItem).toHaveBeenCalled();\n                });\n\n                it('With openDirection=down', function() {\n                    view._openDirection = 'down';\n                    spyOn(view.menu, 'focusFirstItem');\n\n                    sendKeyDown(keyCode);\n\n                    expect(view.menu.isOpen).toBeTrue();\n                    expect(view.menu.focusFirstItem).toHaveBeenCalled();\n                });\n            }\n\n            describe('Return key opens menu', function() {\n                openMenuTests($.ui.keyCode.RETURN);\n            });\n\n            describe('Space key opens menu', function() {\n                openMenuTests($.ui.keyCode.SPACE);\n            });\n\n            describe('Down key opens menu', function() {\n                openMenuTests($.ui.keyCode.DOWN);\n            });\n\n            describe('Up key opens menu', function() {\n                openMenuTests($.ui.keyCode.UP);\n            });\n\n            it('Escape key closes menu', function() {\n                view.menu.open({\n                    animate: false,\n                });\n                expect(view.menu.isOpen).toBeTrue();\n\n                sendKeyDown($.ui.keyCode.ESCAPE);\n\n                expect(view.menu.isOpen).toBeFalse();\n            });\n        });\n\n        it('focusout closes menu', function() {\n            view.menu.open({\n                animate: false,\n            });\n\n            expect(view.menu.isOpen).toBeTrue();\n\n            sendDropDownButtonEvent('focusout', {\n                relatedTarget: $testsScratch[0],\n            });\n\n            expect(view.menu.isOpen).toBeFalse();\n        });\n    });\n});\n"]}