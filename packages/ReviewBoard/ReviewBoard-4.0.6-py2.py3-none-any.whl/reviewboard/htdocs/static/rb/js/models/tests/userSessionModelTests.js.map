{"version":3,"sources":["userSessionModelTests.es6.js"],"names":[],"mappings":"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","file":"userSessionModelTests.js","sourcesContent":["suite('rb/models/UserSession', function() {\n    describe('create', function() {\n        it('Instance is set', function() {\n            RB.UserSession.instance = null;\n            const session = RB.UserSession.create({\n                username: 'testuser'\n            });\n\n            expect(session).toBe(RB.UserSession.instance);\n        });\n\n        it('Second attempt fails', function() {\n            RB.UserSession.instance = null;\n            RB.UserSession.create({\n                username: 'testuser'\n            });\n\n            expect(console.assert).toHaveBeenCalled();\n            expect(console.assert.calls.argsFor(0)[0]).toBeTruthy();\n\n            expect(() => RB.UserSession.create({ username: 'foo' })).toThrow();\n\n            expect(console.assert).toHaveBeenCalled();\n            expect(console.assert.calls.argsFor(1)[0]).toBeFalsy();\n        });\n    });\n\n    describe('Attributes', function() {\n        let session;\n\n        beforeEach(function() {\n            session = RB.UserSession.instance;\n        });\n\n        describe('diffsShowExtraWhitespace', function() {\n            describe('Loads from cookie', function() {\n                it('When \"true\"', function() {\n                    spyOn($, 'cookie').and.returnValue('true');\n\n                    RB.UserSession.instance = null;\n                    session = RB.UserSession.create({\n                        username: 'testuser'\n                    });\n\n                    expect($.cookie).toHaveBeenCalledWith('show_ew');\n                    expect(session.get('diffsShowExtraWhitespace')).toBe(true);\n                });\n\n                it('When \"false\"', function() {\n                    spyOn($, 'cookie').and.returnValue('false');\n\n                    RB.UserSession.instance = null;\n                    session = RB.UserSession.create({\n                        username: 'testuser'\n                    });\n\n                    expect($.cookie).toHaveBeenCalledWith('show_ew');\n                    expect(session.get('diffsShowExtraWhitespace')).toBe(false);\n                });\n            });\n\n            describe('Sets cookie', function() {\n                beforeEach(function() {\n                    spyOn($, 'cookie');\n                });\n\n                it('When true', function() {\n                    session.attributes.diffsShowExtraWhitespace = false;\n                    session.set('diffsShowExtraWhitespace', true);\n\n                    expect($.cookie).toHaveBeenCalledWith('show_ew', 'true', {\n                        path: SITE_ROOT\n                    });\n                });\n\n                it('When false', function() {\n                    session.attributes.diffsShowExtraWhitespace = true;\n                    session.set('diffsShowExtraWhitespace', false);\n\n                    expect($.cookie).toHaveBeenCalledWith('show_ew', 'false', {\n                        path: SITE_ROOT\n                    });\n                });\n            });\n        });\n    });\n});\n"]}