{"version":3,"sources":["repositoryCommitsCollectionTests.es6.js"],"names":[],"mappings":"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","file":"repositoryCommitsCollectionTests.js","sourcesContent":["suite('rb/resources/collections/RepositoryCommits', function() {\n    const url = '/api/repositories/123/commits/';\n    const start = '859d4e148ce3ce60bbda6622cdbe5c2c2f8d9817';\n    let collection;\n\n    beforeEach(function() {\n        collection = new RB.RepositoryCommits([], {\n            urlBase: url,\n            start: start,\n        });\n    });\n\n    describe('Methods', function() {\n        it('fetch', function() {\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.url).toBe(`${url}?start=${start}`);\n                expect(request.type).toBe('GET');\n\n                request.success({\n                    stat: 'ok',\n                    commits: [\n                        {\n                            author_name: 'Christian Hammond',\n                            date: '2013-06-25T23:31:22Z',\n                            id: '859d4e148ce3ce60bbda6622cdbe5c2c2f8d9817',\n                            message: \"Merge branch 'release-1.7.x'\",\n                            parent: '92463764015ef463b4b6d1a1825fee7aeec8cb15',\n                            review_request_url: '',\n                        },\n                        {\n                            author_name: 'Christian Hammond',\n                            date: '2013-06-25T23:30:59Z',\n                            id: '92463764015ef463b4b6d1a1825fee7aeec8cb15',\n                            message: 'Fixed the bug number for the ' +\n                                     'blacktriangledown bug.',\n                            parent: '84c730c7823b653a5bbcc007188d5c85a7c4ac58',\n                            review_request_url: 'http://example.com/r/18274/',\n                        },\n                        {\n                            author_name: 'Christian Hammond',\n                            date: '2013-06-25T22:53:32Z',\n                            id: '84c730c7823b653a5bbcc007188d5c85a7c4ac58',\n                            message: [\n                                \"Don't expose child resources in \",\n                                'ValidateDiffResource.\\n\\nFor convenience, ',\n                                'ValidateDiffResource inherited from ',\n                                'DiffResource.\\nThis brought along the child ',\n                                \"resources, which weren't valid to have.\\n\",\n                                'That ended up breaking docs, which tried ',\n                                'to traverse them.'].join(''),\n                            parent: '',\n                            review_request_url: '',\n                        },\n                    ],\n                });\n\n            });\n\n            collection.fetch();\n\n            expect($.ajax).toHaveBeenCalled();\n            expect(collection.length).toBe(3);\n            expect(collection.at(0).get('authorName'))\n                .toBe('Christian Hammond');\n            expect(collection.at(1).get('date').getUTCHours()).toBe(23);\n            expect(collection.at(2).get('summary'))\n                .toBe(\"Don't expose child resources in ValidateDiffResource.\");\n            expect(collection.at(1).get('reviewRequestURL'))\n                .toBe('http://example.com/r/18274/');\n        });\n\n        it('url', function() {\n            expect(_.result(collection, 'url')).toBe(`${url}?start=${start}`);\n        });\n    });\n});\n"]}