{"version":3,"sources":["collectionViewTests.es6.js"],"names":[],"mappings":"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","file":"collectionViewTests.js","sourcesContent":["suite('rb/views/CollectionView', function() {\n    let collection;\n    let view;\n\n    const TestModel = Backbone.Model.extend({\n        defaults: _.defaults({\n            data: '',\n        }),\n    });\n\n    const TestCollection = Backbone.Collection.extend({\n        model: TestModel,\n    });\n\n    const TestModelView = Backbone.View.extend({\n        className: 'test-class',\n        render() {\n            this.$el.text(this.model.get('data'));\n            return this;\n        },\n    });\n\n    const TestCollectionView = RB.CollectionView.extend({\n        itemViewType: TestModelView,\n    });\n\n    beforeEach(function() {\n        collection = new TestCollection();\n        view = new TestCollectionView({\n            collection: collection,\n        });\n    });\n\n    describe('Rendering', function() {\n        it('When empty', function() {\n            view.render();\n            expect(view.$el.children().length).toBe(0);\n        });\n\n        it('With items', function() {\n            collection.add([\n                { data: 'Item 1' },\n                { data: 'Item 2' },\n            ]);\n\n            view.render();\n            const $children = view.$el.children();\n            expect($children.length).toBe(2);\n            expect($children[0].innerHTML).toBe('Item 1');\n            expect($children[1].innerHTML).toBe('Item 2');\n        });\n\n        it('Item model type', function() {\n            collection.add([\n                { data: 'Item 1' },\n            ]);\n\n            view.render();\n            expect(view.$el.children().hasClass('test-class')).toBe(true);\n        });\n\n        it('With custom element container', function() {\n            const $container = $('<div class=\"rb-test-main-container\"/>')\n                .appendTo(view.$el);\n\n            view.$container = $container;\n\n            collection.add([\n                { data: 'Item 1' },\n                { data: 'Item 2' },\n            ]);\n\n            view.render();\n\n            const $viewChildren = view.$el.children();\n            expect($viewChildren.length).toBe(1);\n            expect($viewChildren[0].className).toBe('rb-test-main-container');\n\n            const $containerChildren = $viewChildren.eq(0).children();\n            expect($containerChildren.length).toBe(2);\n            expect($containerChildren[0].innerHTML).toBe('Item 1');\n            expect($containerChildren[1].innerHTML).toBe('Item 2');\n        });\n    });\n\n    describe('Live updating', function() {\n        it('Adding items after rendering', function() {\n            collection.add([\n                { data: 'Item 1' },\n            ]);\n\n            view.render();\n\n            expect(view.$el.children().length).toBe(1);\n\n            collection.add([\n                { data: 'Item 2' },\n                { data: 'Item 3' },\n            ]);\n\n            const $children = view.$el.children();\n            expect($children.length).toBe(3);\n            expect($children[2].innerHTML).toBe('Item 3');\n        });\n\n        it('Removing items after rendering', function() {\n            const model1 = new TestModel({ data: 'Item 1' });\n            const model2 = new TestModel({ data: 'Item 2' });\n            const model3 = new TestModel({ data: 'Item 3' });\n            collection.add([model1, model2, model3]);\n\n            view.render();\n\n            expect(view.$el.children().length).toBe(3);\n\n            collection.remove([model1, model3]);\n\n            const $children = view.$el.children();\n            expect($children.length).toBe(1);\n            expect($children[0].innerHTML).toBe('Item 2');\n        });\n\n        it('When reset', function() {\n            collection.add([\n                { data: 'Item 1' },\n                { data: 'Item 2' },\n            ]);\n\n            view.render();\n\n            let $children = view.$el.children();\n            expect($children.length).toBe(2);\n            expect($children[0].innerHTML).toBe('Item 1');\n            expect($children[1].innerHTML).toBe('Item 2');\n\n            collection.reset([\n                { data: 'Item 3' },\n                { data: 'Item 4' },\n                { data: 'Item 5' },\n            ]);\n\n            $children = view.$el.children();\n            expect($children.length).toBe(3);\n            expect($children[0].innerHTML).toBe('Item 3');\n            expect($children[1].innerHTML).toBe('Item 4');\n            expect($children[2].innerHTML).toBe('Item 5');\n        });\n\n        describe('Sorting', function() {\n            it('With order changed', function() {\n                collection.add([\n                    { data: 'Item 2' },\n                    { data: 'Item 3' },\n                    { data: 'Item 1' },\n                ]);\n\n                view.render();\n\n                let $children = view.$el.children();\n                expect($children.length).toBe(3);\n                expect($children[0].innerHTML).toBe('Item 2');\n                expect($children[1].innerHTML).toBe('Item 3');\n                expect($children[2].innerHTML).toBe('Item 1');\n\n                self.spyOn(view, '_addCollectionViews').and.callThrough();\n\n                collection.comparator = 'data';\n                collection.sort();\n\n                $children = view.$el.children();\n                expect($children[0].innerHTML).toBe('Item 1');\n                expect($children[1].innerHTML).toBe('Item 2');\n                expect($children[2].innerHTML).toBe('Item 3');\n\n                expect(view._addCollectionViews).toHaveBeenCalled();\n            });\n\n            it('With order unchanged', function() {\n                collection.add([\n                    { data: 'Item 1' },\n                    { data: 'Item 2' },\n                    { data: 'Item 3' },\n                ]);\n\n                view.render();\n\n                let $children = view.$el.children();\n                expect($children.length).toBe(3);\n                expect($children[0].innerHTML).toBe('Item 1');\n                expect($children[1].innerHTML).toBe('Item 2');\n                expect($children[2].innerHTML).toBe('Item 3');\n\n                collection.comparator = 'data';\n                collection.sort();\n\n                self.spyOn(view, '_addCollectionViews').and.callThrough();\n\n                $children = view.$el.children();\n                expect($children[0].innerHTML).toBe('Item 1');\n                expect($children[1].innerHTML).toBe('Item 2');\n                expect($children[2].innerHTML).toBe('Item 3');\n\n                expect(view._addCollectionViews).not.toHaveBeenCalled();\n            });\n        });\n    });\n});\n"]}