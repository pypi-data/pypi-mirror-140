{"version":3,"sources":["inlineFormViewTests.es6.js"],"names":[],"mappings":"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","file":"inlineFormViewTests.js","sourcesContent":["suite('rb/admin/views/InlineFormView', function() {\n    const template = _.template(dedent`\n        <div class=\"rb-c-admin-form-inline\">\n         <h3 class=\"rb-c-admin-form-inline__title\">\n          <span class=\"rb-c-admin-form-inline__title-prefix\"></span>\n          <span class=\"rb-c-admin-form-inline__title-object\"></span>\n          <span class=\"rb-c-admin-form-inline__title-index\"></span>\n          <span class=\"rb-c-admin-form-inline__actions\">\n           <span class=\"rb-c-admin-form-inline__delete-action\"></span>\n          </span>\n         </h3>\n         <fieldset>\n          <div>\n           <label for=\"id_myprefix-<%- index %>-foo\"></label>\n           <input id=\"id_myprefix-<%- index %>-foo\"\n                  name=\"myprefix-<%- index %>-foo\">\n          </div>\n          <div>\n           <label for=\"id_myprefix-<%- index %>-bar\"></label>\n           <input id=\"id_myprefix-<%- index %>-bar\"\n                  name=\"myprefix-<%- index %>-bar\">\n          </div>\n         </fieldset>\n        </div>\n    `);\n\n    let $el;\n    let model;\n    let view;\n\n    beforeEach(function() {\n        $el = $(template({\n            index: '__prefix__',\n        }));\n\n        model = new RB.Admin.InlineForm({\n            prefix: 'myprefix',\n        });\n\n        view = new RB.Admin.InlineFormView({\n            el: $el,\n            model: model,\n        });\n        view.render();\n    });\n\n    describe('Events', function() {\n        describe('Delete clicked', function() {\n            let $delete;\n\n            beforeEach(function() {\n                spyOn(window, 'confirm').and.returnValue(true);\n                spyOn(model, 'destroy');\n\n                $delete = $el.find('.rb-c-admin-form-inline__delete-action');\n            });\n\n            it('With isInitial=true', function() {\n                model.set('isInitial', true);\n\n                $delete.click();\n\n                expect(window.confirm).not.toHaveBeenCalled();\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With isInitial=false', function() {\n                model.set('isInitial', false);\n\n                $delete.click();\n\n                expect(window.confirm).toHaveBeenCalled();\n                expect(model.destroy).toHaveBeenCalled();\n            });\n        });\n\n        describe('Index changed', function() {\n            let $labels;\n            let $inputs;\n            let $titleIndex;\n\n            beforeEach(function() {\n                $labels = $el.find('label');\n                $inputs = $el.find('input');\n                $titleIndex = $el.find('.rb-c-admin-form-inline__title-index');\n\n                expect($labels.length).toBe(2);\n                expect($inputs.length).toBe(2);\n                expect($titleIndex.length).toBe(1);\n            });\n\n            it('From __prefix__ to index', function() {\n                model.set('index', 0);\n\n                expect($el[0].id).toBe('myprefix-0');\n                expect($titleIndex.text()).toBe('#1');\n\n                expect($labels[0].htmlFor).toBe('id_myprefix-0-foo');\n                expect($labels[1].htmlFor).toBe('id_myprefix-0-bar');\n\n                let inputEl = $inputs[0];\n                expect(inputEl.id).toBe('id_myprefix-0-foo');\n                expect(inputEl.name).toBe('myprefix-0-foo');\n\n                inputEl = $inputs[1];\n                expect(inputEl.id).toBe('id_myprefix-0-bar');\n                expect(inputEl.name).toBe('myprefix-0-bar');\n            });\n\n            it('From index to index', function() {\n                model.set('index', 0);\n                model.set('index', 1);\n\n                expect($el[0].id).toBe('myprefix-1');\n                expect($titleIndex.text()).toBe('#2');\n\n                expect($labels[0].htmlFor).toBe('id_myprefix-1-foo');\n                expect($labels[1].htmlFor).toBe('id_myprefix-1-bar');\n\n                let inputEl = $inputs[0];\n                expect(inputEl.id).toBe('id_myprefix-1-foo');\n                expect(inputEl.name).toBe('myprefix-1-foo');\n\n                inputEl = $inputs[1];\n                expect(inputEl.id).toBe('id_myprefix-1-bar');\n                expect(inputEl.name).toBe('myprefix-1-bar');\n            });\n        });\n    });\n});\n"]}