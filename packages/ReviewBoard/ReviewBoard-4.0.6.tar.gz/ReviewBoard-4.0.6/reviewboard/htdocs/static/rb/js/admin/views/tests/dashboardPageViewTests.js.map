{"version":3,"sources":["dashboardPageViewTests.es6.js"],"names":[],"mappings":"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","file":"dashboardPageViewTests.js","sourcesContent":["suite('rb/admin/views/DashboardPageView', function() {\n    const pageTemplate = dedent`\n        <div>\n         <div id=\"admin-dashboard\" style=\"visibility: hidden\">\n          <div class=\"rb-c-admin-widgets\">\n           <div class=\"rb-c-admin-widgets__sizer-gutter\"></div>\n           <div class=\"rb-c-admin-widgets__sizer-column\"></div>\n           <div class=\"rb-c-admin-widgets__main\"></div>\n          </div>\n         </div>\n        </div>\n    `;\n\n    const widgetTemplate = _.template(dedent`\n        <div class=\"rb-c-admin-widget <%- cssClasses %>\" id=\"<%- domID %>\"\n         <header class=\"rb-c-admin-widget__header\">\n          <h1><%- name %></h1>\n          <ul class=\"rb-c-admin-widget__actions\"></ul>\n         </header>\n         <div class=\"rb-c-admin-widget__content\"></div>\n         <footer class=\"rb-c-admin-widget__footer\">\n          <ul class=\"rb-c-admin-widget__actions\"></ul>\n         </footer>\n        </div>\n    `);\n\n    let page;\n    let pageView;\n\n    beforeEach(function() {\n        page = new RB.Admin.DashboardPage();\n        pageView = new RB.Admin.DashboardPageView({\n            el: $(pageTemplate).appendTo($testsScratch),\n            model: page,\n        });\n    });\n\n    describe('Widgets', function() {\n        it('Loading', function() {\n            const $main = pageView.$('.rb-c-admin-widgets__main');\n\n            $main.append(\n                widgetTemplate({\n                    domID: 'widget-1',\n                    name: 'Widget 1',\n                    cssClasses: '-is-small',\n                }),\n                widgetTemplate({\n                    domID: 'widget-2',\n                    name: 'Widget 2',\n                    cssClasses: '',\n                }),\n                widgetTemplate({\n                    domID: 'widget-3',\n                    name: 'Widget 3',\n                    cssClasses: '-is-large',\n                }),\n                widgetTemplate({\n                    domID: 'widget-4',\n                    name: 'Widget 4',\n                    cssClasses: '-is-small',\n                }),\n                widgetTemplate({\n                    domID: 'widget-5',\n                    name: 'Widget 5',\n                    cssClasses: '',\n                }),\n                widgetTemplate({\n                    domID: 'widget-6',\n                    name: 'Widget 6',\n                    cssClasses: '-is-full-size',\n                })\n            );\n\n            page.set('widgetsData', [\n                {\n                    id: 'widget-1',\n                    domID: 'widget-1',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                },\n                {\n                    id: 'widget-2',\n                    domID: 'widget-2',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                },\n                {\n                    id: 'widget-3',\n                    domID: 'widget-3',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                },\n                {\n                    id: 'widget-4',\n                    domID: 'widget-4',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                },\n                {\n                    id: 'widget-5',\n                    domID: 'widget-5',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                },\n                {\n                    id: 'widget-6',\n                    domID: 'widget-6',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                },\n            ]);\n\n            pageView.render();\n\n            const $widgets = pageView._$widgets;\n            expect($widgets.length).toBe(6);\n\n            expect($widgets[0].id).toBe('widget-1');\n            expect($widgets[1].id).toBe('widget-2');\n            expect($widgets[2].id).toBe('widget-3');\n            expect($widgets[3].id).toBe('widget-4');\n            expect($widgets[4].id).toBe('widget-5');\n            expect($widgets[5].id).toBe('widget-6');\n\n            expect($widgets[0]).toHaveClass('js-masonry-item');\n            expect($widgets[1]).toHaveClass('js-masonry-item');\n            expect($widgets[2]).toHaveClass('js-masonry-item');\n            expect($widgets[3]).toHaveClass('js-masonry-item');\n            expect($widgets[4]).toHaveClass('js-masonry-item');\n            expect($widgets[5]).toHaveClass('js-masonry-item');\n\n            const items = pageView._masonry.items;\n            expect(items.length).toBe(6);\n            expect(items[0].element).toBe($widgets[5]);\n            expect(items[1].element).toBe($widgets[2]);\n            expect(items[2].element).toBe($widgets[1]);\n            expect(items[3].element).toBe($widgets[4]);\n            expect(items[4].element).toBe($widgets[0]);\n            expect(items[5].element).toBe($widgets[3]);\n\n            expect(pageView.$el.css('visibility')).toBe('visible');\n        });\n\n        describe('sizeChanged event', function() {\n            let widgetView;\n\n            beforeEach(function() {\n                const $main = pageView.$('.rb-c-admin-widgets__main');\n\n                $main.append(widgetTemplate({\n                    domID: 'widget-1',\n                    name: 'Widget 1',\n                    cssClasses: '',\n                }));\n\n                page.set('widgetsData', [{\n                    id: 'widget-1',\n                    domID: 'widget-1',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                }]);\n\n                pageView.render();\n\n                widgetView = pageView._widgetViews['widget-1'];\n                expect(widgetView).not.toBeUndefined();\n\n                spyOn(pageView._masonry, 'layout');\n            });\n\n            it('Causes re-layout on element size change', function () {\n                const $widget = widgetView.$el;\n\n                $widget.width($widget.width() + 100);\n                widgetView.trigger('sizeChanged');\n\n                expect(pageView._masonry.layout).toHaveBeenCalled();\n            });\n\n            it('Ignored when element size does not change', function () {\n                pageView._widgetWidths['widget-1'] = widgetView.$el.width();\n                widgetView.trigger('sizeChanged');\n\n                expect(pageView._masonry.layout).not.toHaveBeenCalled();\n            });\n        });\n    });\n});\n"]}