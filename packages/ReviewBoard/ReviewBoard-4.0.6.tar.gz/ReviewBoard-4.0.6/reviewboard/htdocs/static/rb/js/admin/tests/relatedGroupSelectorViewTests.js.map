{"version":3,"sources":["relatedGroupSelectorViewTests.es6.js"],"names":[],"mappings":"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","file":"relatedGroupSelectorViewTests.js","sourcesContent":["suite('rb/admin/views/relatedGroupSelectorView', function() {\n    describe('Rendering', function() {\n        it('when empty', function() {\n            let view = new RB.RelatedGroupSelectorView({\n                $input: $('<input id=\"id_groups\" type=\"hidden\">'),\n                initialOptions: [],\n                multivalued: true,\n                inviteOnly: false,\n            });\n            expect(view.options.multivalued).toBe(true);\n            expect(view.options.inviteOnly).toBe(false);\n            view.render();\n\n            expect(view.$el.find('.related-object-selected li').length)\n                .toBe(0);\n\n        });\n    });\n\n    describe('Rendering', function() {\n        it('with inital options', function() {\n            let view = new RB.RelatedGroupSelectorView({\n                $input: $('<input id=\"id_groups\" type=\"hidden\">'),\n                initialOptions: [{\n                    id: 1,\n                    display_name: \"Test Repository 1\",\n                    name: \"test_repo_1\",\n                    invite_only: false,\n                }, {\n                    id: 2,\n                    display_name: \"Test Repository 2\",\n                    name: \"test_repo_2\",\n                    invite_only: true,\n                }],\n                multivalued: true,\n                inviteOnly: true,\n            });\n            view.render();\n            expect(view.options.multivalued).toBe(true);\n            expect(view.options.inviteOnly).toBe(true);\n\n            expect(view.$el.find('.related-object-selected li').length)\n                .toBe(2);\n            expect(view.$el.siblings('#id_groups').val()).toBe('');\n            /* The input element value should be empty, since the widget will\n               not fill in the values from the objects if the objects are\n               passed through initialOptions. */\n            expect(view._selectedIDs.size).toBe(2);\n\n        });\n    });\n\n    describe('Select item', function() {\n        let view;\n\n        beforeEach(function(done) {\n            $testsScratch.append('<input id=\"id_groups\" type=\"hidden\">');\n            view = new RB.RelatedGroupSelectorView({\n                $input: $('#id_groups'),\n                initialOptions: [],\n                multivalued: true\n            });\n            view.render();\n\n            /* These are the fake users, that will be displayed in the\n               dropdown */\n            spyOn(view, 'loadOptions').and.callFake(function(query, callback) {\n                callback([{\n                    id: 1,\n                    display_name: \"Test Repository 1\",\n                    name: \"test_repo_1\",\n                    invite_only: false,\n                }, {\n                    id: 2,\n                    display_name: \"Test Repository 2\",\n                    name: \"test_repo_2\",\n                    invite_only: true,\n                }]);\n            });\n\n            $('select')[0].selectize.focus();\n            /* The focus() method is being called asynchronously, so it\n              doesn't actually call the loadOptions() method here\n              instantly. That's why I use setTimeout to wait for it to\n              finish. */\n            setTimeout(function() {\n                $testsScratch.find('div .selectize-input.items.not-full input').click();\n                done();\n            }, 4000);\n            /* I probably shouldn't be doing this, but I\n            don't know how else to get it to work. */\n        });\n\n        it('from dropdown', function(done) {\n            expect(view.loadOptions).toHaveBeenCalled();\n            $(\"div[data-value='test_repo_1']\").click();\n            $(\"div[data-value='test_repo_2']\").click();\n            expect(view.$el.siblings('#id_groups').val()).toBe('1,2');\n            done();\n        });\n    });\n\n\n});"]}