{"version":3,"sources":["repositoryform.es6.js"],"names":[],"mappings":"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","file":"repositoryform.js","sourcesContent":["(function() {\n\n\nconst prevTypes = {};\nconst origRepoTypes = [];\nconst powerPackTemplate = dedent`\n    <h3>${gettext('Power Pack Required')}</h3>\n    <p>\n    ${gettext('<span class=\"power-pack-advert-hosting-type\"></span> support is available with <a href=\"https://www.reviewboard.org/powerpack/\">Power Pack</a>, an extension which also offers powerful reports, document review, and more.')}\n    </p>\n`;\nconst gerritPluginRequiredTemplate = dedent`\n    <h3>\n    ${gettext('Plugin Required')}\n    </h3>\n    <p>\n    ${interpolate(\n        gettext('The <code>gerrit-reviewboard</code> plugin is required for Gerrit integration. See the <a href=\"%s\" target=\"_blank\">instructions</a> for installing the plugin on your server.'),\n        [MANUAL_URL + 'admin/configuration/repositories/gerrit/'])}\n    </p>\n`;\n\n\nfunction updatePlanEl($row, $plan, serviceType, isFake) {\n    const planTypes = HOSTING_SERVICES[serviceType].plans;\n    const selectedPlan = $plan.val();\n\n    $plan.empty();\n\n    if (planTypes.length === 1 || isFake) {\n        $row.hide();\n    } else {\n        for (let i = 0; i < planTypes.length; i++) {\n            const planType = planTypes[i];\n            const opt = $('<option/>')\n                .val(planType.type)\n                .text(planType.label)\n                .appendTo($plan);\n\n            if (planType.type === selectedPlan) {\n                opt.prop('selected', true);\n            }\n        }\n\n        $row.show();\n    }\n\n    $plan.triggerHandler('change');\n}\n\n\nfunction updateHostingForm($hostingType, formPrefix, $plan, $forms) {\n    const formID = `#${formPrefix}-${$hostingType.val()}-${$plan.val() || 'default'}`;\n\n    $forms.hide();\n    $(formID).show();\n}\n\n\nfunction updateRepositoryType() {\n    const hostingType = $('#id_hosting_type').val();\n    const newRepoTypes = (hostingType === 'custom'\n                          ? []\n                          : HOSTING_SERVICES[hostingType].scmtools);\n    const $repoTypes = $('#id_tool');\n    const currentRepoType = $repoTypes.val();\n\n    $repoTypes.empty();\n\n    origRepoTypes.forEach(repoType => {\n        if (newRepoTypes.length === 0 ||\n            newRepoTypes.indexOf(repoType.text) !== -1 ||\n            newRepoTypes.indexOf(repoType.value) !== -1) {\n            $('<option/>')\n                .text(repoType.text)\n                .val(repoType.value)\n                .appendTo($repoTypes);\n\n            if (repoType.value === currentRepoType) {\n                $repoTypes.val(currentRepoType);\n            }\n        }\n    });\n\n    $repoTypes.triggerHandler('change');\n}\n\n\nfunction updateAccountList() {\n    const hostingType = $('#id_hosting_type').val();\n    const $hostingAccount = $('#id_hosting_account');\n    const $authForm = $('#hosting-auth-form-' + hostingType);\n    const hostingInfo = HOSTING_SERVICES[hostingType];\n    const accounts = hostingInfo.accounts;\n    const selectedAccount = parseInt($hostingAccount.val(), 10);\n    let foundSelected = false;\n\n    /* Rebuild the list of accounts. */\n    $hostingAccount.find('option[value!=\"\"]').remove();\n\n    if (hostingInfo.needs_two_factor_auth_code ||\n        $authForm.find('.errorlist').length > 0) {\n        /*\n         * The first one will be selected automatically, which\n         * we want. Don't select any below.\n         */\n        foundSelected = true;\n    }\n\n    accounts.forEach(account => {\n        let text = account.username;\n\n        if (account.hosting_url) {\n            text += ` (${account.hosting_url})`;\n        }\n\n        const $opt = $('<option/>')\n            .val(account.pk)\n            .text(text)\n            .data('account', account)\n            .appendTo($hostingAccount);\n\n        if (account.pk === selectedAccount || !foundSelected) {\n            $opt.prop('selected', true);\n            foundSelected = true;\n            $hostingAccount.triggerHandler('change');\n        }\n    });\n}\n\n\n$(document).ready(function() {\n    const $hostingType = $('#id_hosting_type');\n    const $hostingAuthForms = $('.hosting-auth-form');\n    const $hostingRepoForms = $('.hosting-repo-form');\n    const $hostingAccount = $('#id_hosting_account');\n    const $hostingAccountRow = $('#row-hosting_account');\n    const $hostingAccountRelink = $('<p/>')\n        .text(gettext('The authentication requirements for this account have changed. You will need to re-authenticate.'))\n        .addClass('errornote')\n        .hide()\n        .appendTo($hostingAccountRow);\n    const $scmtoolAuthForms = $('.scmtool-auth-form');\n    const $scmtoolRepoForms = $('.scmtool-repo-form');\n    const $associateSshKeyFieldset =\n        $('#row-associate_ssh_key').parents('fieldset');\n    const $associateSshKey = $('#id_associate_ssh_key');\n    const associateSshKeyDisabled = $associateSshKey.prop('disabled');\n    const $bugTrackerUseHosting = $('#id_bug_tracker_use_hosting');\n    const $bugTrackerUseHostingRow = $('#row-bug_tracker_use_hosting');\n    const $bugTrackerType = $('#id_bug_tracker_type');\n    const $bugTrackerHostingURLRow = $('#row-bug_tracker_hosting_url');\n    const $bugTrackerTypeRow = $('#row-bug_tracker_type');\n    const $bugTrackerPlan = $('#id_bug_tracker_plan');\n    const $bugTrackerPlanRow = $('#row-bug_tracker_plan');\n    const $bugTrackerURLRow = $('#row-bug_tracker');\n    const $bugTrackerUsernameRow =\n        $('#row-bug_tracker_hosting_account_username');\n    const $repoPlanRow = $('#row-repository_plan');\n    const $repoPlan = $('#id_repository_plan');\n    const $publicAccess = $('#id_public');\n    const $tool = $('#id_tool');\n    const $toolRow = $('#row-tool');\n    const $showSshKey = $('#show-ssh-key-link');\n    const $publicKeyPopup = $('#ssh-public-key-popup');\n    const $bugTrackerForms = $('.bug-tracker-form');\n    const $submitButtons = $('input[type=\"submit\"]');\n    const $editHostingCredentials = $('#repo-edit-hosting-credentials');\n    const $editHostingCredentialsLabel =\n        $('#repo-edit-hosting-credentials-label');\n    const $forceAuth = $('#id_force_authorize');\n    const $powerPackAdvert = $('<div class=\"powerpack-advert\" />')\n        .html(powerPackTemplate)\n        .hide()\n        .appendTo($hostingType.closest('fieldset'));\n    const $gerritPluginInfo = $('<div class=\"gerrit-plugin-advert\" />')\n        .html(gerritPluginRequiredTemplate)\n        .hide()\n        .appendTo($('#row-hosting_type'));\n\n    prevTypes.bug_tracker_type = 'none';\n    prevTypes.hosting_type = 'custom';\n    prevTypes.tool = 'none';\n\n    $tool.find('option').each((i, el) => {\n        const $repoType = $(el);\n\n        origRepoTypes.push({\n            value: $repoType.val(),\n            text: $repoType.text(),\n        });\n    });\n\n    $bugTrackerUseHosting\n        .change(function() {\n            if (this.checked) {\n                $bugTrackerTypeRow.hide();\n                $bugTrackerPlanRow.hide();\n                $bugTrackerUsernameRow.hide();\n                $bugTrackerURLRow.hide();\n                $bugTrackerForms.hide();\n            } else {\n                $bugTrackerTypeRow.show();\n                $bugTrackerType.triggerHandler('change');\n            }\n        })\n        .triggerHandler('change');\n\n    $repoPlan.change(() => updateHostingForm($hostingType, 'repo-form-hosting',\n                                             $repoPlan, $hostingRepoForms));\n\n    $bugTrackerPlan.change(() => {\n        const plan = $bugTrackerPlan.val() || 'default';\n        const bugTrackerType = $bugTrackerType.val();\n        const planInfo = HOSTING_SERVICES[bugTrackerType].planInfo[plan];\n\n        updateHostingForm($bugTrackerType, 'bug-tracker-form-hosting',\n                          $bugTrackerPlan, $bugTrackerForms);\n\n        $bugTrackerUsernameRow.setVisible(\n            planInfo.bug_tracker_requires_username);\n    });\n\n    $hostingType\n        .change(() => {\n            const hostingType = $hostingType.val();\n            const isCustom = (hostingType === 'custom');\n            const isFake = (!isCustom &&\n                            HOSTING_SERVICES[hostingType].fake === true);\n\n            updateRepositoryType();\n\n            $gerritPluginInfo.toggle(hostingType === 'gerrit');\n\n            if (isCustom) {\n                $repoPlanRow.hide();\n            } else {\n                $scmtoolAuthForms.hide();\n                $scmtoolRepoForms.hide();\n\n                updatePlanEl($repoPlanRow, $repoPlan, hostingType, isFake);\n            }\n\n            $repoPlan.triggerHandler('change');\n\n            if (isCustom ||\n                isFake ||\n                !HOSTING_SERVICES[hostingType].supports_bug_trackers) {\n                $bugTrackerUseHostingRow.hide();\n                $bugTrackerUseHosting\n                    .prop({\n                        disabled: true,\n                        checked: false,\n                    })\n                    .triggerHandler('change');\n            } else {\n                $bugTrackerUseHosting.prop('disabled', false);\n                $bugTrackerUseHostingRow.show();\n            }\n\n            if (isCustom ||\n                !HOSTING_SERVICES[hostingType].supports_ssh_key_association) {\n                $associateSshKeyFieldset.hide();\n                $associateSshKey.prop({\n                    disabled: true,\n                    checked: false,\n                });\n            } else {\n                /*\n                 * Always use the original state of the checkbox (i.e. the\n                 * state on page load)\n                 */\n                $associateSshKey.prop('disabled', associateSshKeyDisabled);\n                $associateSshKeyFieldset.show();\n            }\n\n            if (isFake) {\n                $powerPackAdvert\n                    .find('.power-pack-advert-hosting-type')\n                    .text($hostingType.find(':selected').text());\n            }\n\n            $hostingAccountRow.setVisible(!isFake);\n            $toolRow.setVisible(!isFake);\n\n            $powerPackAdvert.setVisible(isFake);\n            $submitButtons.prop('disabled', isFake);\n\n            if (!isCustom) {\n                updateAccountList();\n            }\n        })\n        .triggerHandler('change');\n\n    $([$hostingType[0], $hostingAccount[0]])\n        .change(() => {\n            $hostingAuthForms.hide();\n            $hostingAccountRelink.hide();\n            $editHostingCredentials\n                .hide()\n                .val(gettext('Edit credentials'));\n            $forceAuth.val('false');\n\n            const hostingType = $hostingType.val();\n\n            if (hostingType === 'custom') {\n                $hostingAccountRow.hide();\n            } else {\n                const hostingInfo = HOSTING_SERVICES[hostingType];\n\n                if (hostingInfo.fake !== true) {\n                    $hostingAccountRow.show();\n\n                    const $authForm = $('#hosting-auth-form-' + hostingType);\n\n                    /*\n                     * Hide any fields required for 2FA unless explicitly\n                     * needed.\n                     */\n                    $authForm.find('[data-required-for-2fa]').closest('.form-row')\n                        .setVisible(hostingInfo.needs_two_factor_auth_code);\n\n                    if ($hostingAccount.val() === '') {\n                        /* Present fields for linking a new account. */\n                        $authForm.show();\n                    } else if (hostingInfo.needs_two_factor_auth_code) {\n                        /*\n                         * The user needs to enter a 2FA code. We need to\n                         * show the auth form, and ensure we will be forcing\n                         * authentication.\n                         */\n                        $forceAuth.val('true');\n                        $authForm.show();\n                    } else {\n                        /* An existing linked account has been selected. */\n                        const selectedIndex = $hostingAccount[0].selectedIndex;\n                        const $selectedOption =\n                            $($hostingAccount[0].options[selectedIndex]);\n                        const account = $selectedOption.data('account');\n\n                        if (account.is_authorized &&\n                            $authForm.find('.errorlist').length === 0) {\n                            $editHostingCredentials.show();\n                        } else {\n                            $authForm.show();\n                            $hostingAccountRelink.show();\n                        }\n                    }\n                }\n            }\n        })\n        .triggerHandler('change');\n\n    $tool\n        .change(() => {\n            if ($hostingType.val() === 'custom') {\n                var scmtoolID = $('#id_tool').val(),\n                    $authForm = $('#auth-form-scm-' + scmtoolID),\n                    $repoForm = $('#repo-form-scm-' + scmtoolID);\n\n                $scmtoolAuthForms.hide();\n                $scmtoolRepoForms.hide();\n\n                $authForm.show();\n                $repoForm.show();\n            }\n        })\n        .triggerHandler('change');\n\n    $bugTrackerType\n        .change(() => {\n            $bugTrackerForms.hide();\n\n            const bugTrackerType = $bugTrackerType.val();\n\n            if (bugTrackerType === 'custom' || bugTrackerType === 'none') {\n                $bugTrackerHostingURLRow.hide();\n                $bugTrackerPlanRow.hide();\n                $bugTrackerUsernameRow.hide();\n            }\n\n            if (bugTrackerType === 'custom') {\n                $bugTrackerURLRow.show();\n            } else if (bugTrackerType === 'none') {\n                $bugTrackerURLRow.hide();\n            } else {\n                $bugTrackerURLRow.hide();\n                updatePlanEl($bugTrackerPlanRow, $bugTrackerPlan,\n                             bugTrackerType, false);\n\n                $bugTrackerHostingURLRow.setVisible(\n                    HOSTING_SERVICES[bugTrackerType].self_hosted);\n            }\n        })\n        .triggerHandler('change');\n\n    $publicAccess\n        .change(function() {\n            var visible = !this.checked;\n            $('#row-users').setVisible(visible);\n            $('#row-review_groups').setVisible(visible);\n        })\n        .triggerHandler('change');\n\n    $showSshKey.on('click', () => {\n        if ($publicKeyPopup.is(':visible')) {\n            $showSshKey.text(gettext('Show your SSH public key'));\n            $publicKeyPopup.hide();\n        } else {\n            $showSshKey.text(gettext('Hide your SSH public key'));\n            $publicKeyPopup.show();\n        }\n\n        return false;\n    });\n\n    $editHostingCredentials.click(() => {\n        let $authForm = $('#hosting-auth-form-' + $hostingType.val());\n\n        if ($forceAuth.val() === 'true') {\n            $editHostingCredentialsLabel.text(gettext('Edit credentials'));\n            $authForm.hide();\n            $forceAuth.val('false');\n        } else {\n            $editHostingCredentialsLabel.text(\n                gettext('Cancel editing credentials'));\n            $authForm = $('#hosting-auth-form-' + $hostingType.val()).show();\n            $authForm.show();\n            $forceAuth.val('true');\n        }\n\n        return false;\n    });\n});\n\n\n})();\n"]}