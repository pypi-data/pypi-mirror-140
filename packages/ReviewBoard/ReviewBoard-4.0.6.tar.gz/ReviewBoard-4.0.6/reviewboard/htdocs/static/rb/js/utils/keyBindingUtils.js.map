{"version":3,"sources":["keyBindingUtils.es6.js"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,CAAC,gBAAH,GAAsB;AAClB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI,EAAA,mBAVkB,iCAUI;AAClB,SAAK,GAAL,CAAS,EAAT,gCAAoC,KAAK,GAAzC,GAAgD,CAAC,CAAC,IAAF,CAAO,UAAS,GAAT,EAAc;AACjE,UAAI,GAAG,CAAC,MAAJ,IAAc,GAAG,CAAC,OAAlB,IAA6B,GAAG,CAAC,OAAjC,IACA,GAAG,CAAC,MAAJ,CAAW,OAAX,KAAuB,OADvB,IAEA,GAAG,CAAC,MAAJ,CAAW,OAAX,KAAuB,UAFvB,IAGA,GAAG,CAAC,MAAJ,CAAW,iBAHf,EAGkC;AAC9B;AACA;AACH;;AAED,UAAM,OAAO,GAAG,MAAM,CAAC,YAAP,CAAoB,GAAG,CAAC,KAAxB,CAAhB;;AAEA,sCAAiB,MAAM,CAAC,IAAP,CAAY,KAAK,WAAjB,CAAjB,kCAAgD;AAA3C,YAAI,IAAI,mBAAR;;AACD,YAAI,IAAI,CAAC,OAAL,CAAa,OAAb,MAA0B,CAAC,CAA/B,EAAkC;AAC9B,UAAA,GAAG,CAAC,eAAJ;AACA,UAAA,GAAG,CAAC,cAAJ;AAEA,cAAI,IAAI,GAAG,KAAK,WAAL,CAAiB,IAAjB,CAAX;;AAEA,cAAI,CAAC,CAAC,CAAC,UAAF,CAAa,IAAb,CAAL,EAAyB;AACrB,YAAA,IAAI,GAAG,KAAK,IAAL,CAAP;AACH;;AAED,UAAA,IAAI,CAAC,IAAL,CAAU,IAAV,EAAgB,GAAhB;AACH;AACJ;AACJ,KAzB+C,EAyB7C,IAzB6C,CAAhD;AA0BH,GArCiB;;AAuClB;AACJ;AACA;AACA;AACA;AACI,EAAA,qBA5CkB,mCA4CM;AACpB,QAAI,KAAK,GAAT,EAAc;AACV,WAAK,GAAL,CAAS,GAAT,gCAAqC,KAAK,GAA1C;AACH;AACJ,GAhDiB;;AAkDlB;AACJ;AACA;AACA;AACA;AACA;AACI,EAAA,cAxDkB,0BAwDH,MAxDG,EAwDK;AACnB,QAAM,MAAM,GAAG,QAAQ,CAAC,IAAT,CAAc,SAAd,CAAwB,cAAxB,CAAuC,IAAvC,CAA4C,IAA5C,EAAkD,MAAlD,CAAf;AAEA,SAAK,mBAAL;AAEA,WAAO,MAAP;AACH,GA9DiB;;AAgElB;AACJ;AACA;AACA;AACA;AACA;AACI,EAAA,gBAtEkB,8BAsEC;AACf,QAAM,MAAM,GAAG,QAAQ,CAAC,IAAT,CAAc,SAAd,CAAwB,gBAAxB,CAAyC,IAAzC,CAA8C,IAA9C,CAAf;AAEA,SAAK,qBAAL;AAEA,WAAO,MAAP;AACH;AA5EiB,CAAtB","file":"keyBindingUtils.js","sourcesContent":["/**\n * A mixin for views that provides key binding functionality.\n *\n * Views using this mixin can provide a keyBindings map that maps a set of\n * key characters to a function.\n */\nRB.KeyBindingsMixin = {\n    /**\n     * Enable key bindings for the view.\n     *\n     * Begins listening for any key bindings registered in the view's\n     * keyBindings map, and calls the appropriate function.\n     *\n     * By default, this is called automatically when setting up the view,\n     * by way of delegateEvents.\n     */\n    delegateKeyBindings() {\n        this.$el.on(`keypress.keybindings.${this.cid}`, _.bind(function(evt) {\n            if (evt.altKey || evt.ctrlKey || evt.metaKey ||\n                evt.target.tagName === 'INPUT' ||\n                evt.target.tagName === 'TEXTAREA' ||\n                evt.target.isContentEditable) {\n                /* These are all unsupported, and things we want to ignore. */\n                return;\n            }\n\n            const keyChar = String.fromCharCode(evt.which);\n\n            for (let keys of Object.keys(this.keyBindings)) {\n                if (keys.indexOf(keyChar) !== -1) {\n                    evt.stopPropagation();\n                    evt.preventDefault();\n\n                    let func = this.keyBindings[keys];\n\n                    if (!_.isFunction(func)) {\n                        func = this[func];\n                    }\n\n                    func.call(this, evt);\n                }\n            }\n        }, this));\n    },\n\n    /**\n     * Disable key bindings for the view.\n     *\n     * By default, this is called automatically when calling undelegateEvents.\n     */\n    undelegateKeyBindings() {\n        if (this.$el) {\n            this.$el.off(`keypress.keybindings.${this.cid}`);\n        }\n    },\n\n    /**\n     * Delegate both DOM events and key binding events.\n     *\n     * This overrides the default Backbone.View.delegateEvents to automatically\n     * call delegateKeyBindings.\n     */\n    delegateEvents(events) {\n        const result = Backbone.View.prototype.delegateEvents.call(this, events);\n\n        this.delegateKeyBindings();\n\n        return result;\n    },\n\n    /**\n     * Undelegate both DOM events and key binding events.\n     *\n     * This overrides the default Backbone.View.undelegateEvents to\n     * automatically call undelegateKeyBindings.\n     */\n    undelegateEvents() {\n        const result = Backbone.View.prototype.undelegateEvents.call(this);\n\n        this.undelegateKeyBindings();\n\n        return result;\n    }\n};\n"]}