{"version":3,"sources":["resourceListItemModel.es6.js"],"names":[],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,CAAC,MAAH,CAAU,gBAAV,GAA6B,OAAO,CAAC,MAAR,CAAe,QAAf,CAAwB,MAAxB,CAA+B;AACxD,EAAA,QAAQ,EAAE,CAAC,CAAC,QAAF,CAAW;AACjB,IAAA,QAAQ,EAAE;AADO,GAAX,EAEP,OAAO,CAAC,MAAR,CAAe,QAAf,CAAwB,SAAxB,CAAkC,QAF3B,CAD8C;;AAKxD;AACA,EAAA,SAAS,EAAE,EAN6C;;AAQxD;AACJ;AACA;AACA;AACA;AACA;AACI,EAAA,UAdwD,wBAc3C;AAAA;;AACT,QAAI,QAAQ,GAAG,KAAK,GAAL,CAAS,UAAT,CAAf;;AAEA,QAAI,QAAJ,EAAc;AACV,WAAK,GAAL,CAAS,CAAC,CAAC,IAAF,CAAO,QAAQ,CAAC,UAAhB,EAA4B,KAAK,SAAjC,CAAT;AACH,KAFD,MAEO;AACH;AACZ;AACA;AACA;AACY,MAAA,QAAQ,GAAG,KAAK,cAAL,CAAoB,CAAC,CAAC,MAAF,CAC3B;AAAE,QAAA,EAAE,EAAE,KAAK,GAAL,CAAS,IAAT;AAAN,OAD2B,EAE3B,CAAC,CAAC,IAAF,CAAO,KAAK,UAAZ,EAAwB,KAAK,SAA7B,CAF2B,CAApB,CAAX;AAIA,WAAK,GAAL,CAAS,UAAT,EAAqB,QAArB;AACH;;AAED,SAAK,QAAL,GAAgB,QAAhB;AAEA,IAAA,OAAO,CAAC,MAAR,CAAe,QAAf,CAAwB,SAAxB,CAAkC,UAAlC,CAA6C,KAA7C,CAAmD,IAAnD,EAAyD,SAAzD;AAEA;;AACA,SAAK,QAAL,CAAc,QAAd,EAAwB,SAAxB,EACc;AAAA,wCAAI,IAAJ;AAAI,QAAA,IAAJ;AAAA;;AAAA,aAAa,KAAI,CAAC,OAAL,OAAA,KAAI,GAAS,SAAT,SAAuB,IAAvB,EAAjB;AAAA,KADd;AAEA,SAAK,QAAL,CAAc,QAAd,EAAwB,MAAxB,EACc;AAAA,yCAAI,IAAJ;AAAI,QAAA,IAAJ;AAAA;;AAAA,aAAa,KAAI,CAAC,OAAL,OAAA,KAAI,GAAS,MAAT,SAAoB,IAApB,EAAjB;AAAA,KADd;AAGA;;AACA,SAAK,QAAL,CAAc,QAAd,EAAwB,SAAxB,EAAmC,KAAK,OAAxC;AAEA;AACR;AACA;AACA;;AACQ,SAAK,SAAL,CAAe,OAAf,CACI,UAAA,IAAI;AAAA,aAAI,KAAI,CAAC,QAAL,CAAc,QAAd,mBAAkC,IAAlC,GACc,UAAC,KAAD,EAAQ,KAAR;AAAA,eAAkB,KAAI,CAAC,GAAL,CAAS,IAAT,EAAe,KAAf,CAAlB;AAAA,OADd,CAAJ;AAAA,KADR;AAGH,GAnDuD;;AAqDxD;AACJ;AACA;AACI,EAAA,cAxDwD,4BAwD5B;AACxB,IAAA,OAAO,CAAC,MAAR,CAAe,KAAf,EAAsB,oCAAtB;AACH,GA1DuD;;AA4DxD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACI,EAAA,OA1EwD,qBA0EpC;AAAA,QAAZ,OAAY,uEAAJ,EAAI;AAChB,SAAK,aAAL,CAAmB,KAAK,QAAxB;AACA,SAAK,OAAL,CAAa,SAAb,EAAwB,IAAxB,EAA8B,KAAK,UAAnC,EAA+C,OAA/C;;AAEA,QAAI,CAAC,CAAC,UAAF,CAAa,OAAO,CAAC,OAArB,CAAJ,EAAmC;AAC/B,MAAA,OAAO,CAAC,OAAR,CAAgB,IAAhB,EAAsB,IAAtB,EAA4B,OAA5B;AACH;AACJ;AAjFuD,CAA/B,CAA7B","file":"resourceListItemModel.js","sourcesContent":["/**\n * A list item representing a resource in the API.\n *\n * This item will be backed by a resource model, which will be used for\n * all synchronization with the API. It will work as a proxy for requests\n * and events, and synchronize attributes between the resource and the list\n * item. This allows callers to work directly with the list item instead of\n * digging down into the resource.\n */\nRB.Config.ResourceListItem = Djblets.Config.ListItem.extend({\n    defaults: _.defaults({\n        resource: null\n    }, Djblets.Config.ListItem.prototype.defaults),\n\n    /** A list of attributes synced between the ListItem and the Resource. */\n    syncAttrs: [],\n\n    /**\n     * Initialize the list item.\n     *\n     * This will begin listening for events on the resource, updating\n     * the state of the icon based on changes.\n     */\n    initialize() {\n        let resource = this.get('resource');\n\n        if (resource) {\n            this.set(_.pick(resource.attributes, this.syncAttrs));\n        } else {\n            /*\n             * Create a resource using the attributes provided to this list\n             * item.\n             */\n            resource = this.createResource(_.extend(\n                { id: this.get('id') },\n                _.pick(this.attributes, this.syncAttrs)));\n\n            this.set('resource', resource);\n        }\n\n        this.resource = resource;\n\n        Djblets.Config.ListItem.prototype.initialize.apply(this, arguments);\n\n        /* Forward on a couple events we want the caller to see. */\n        this.listenTo(resource, 'request',\n                      (...args) => this.trigger('request', ...args));\n        this.listenTo(resource, 'sync',\n                      (...args) => this.trigger('sync', ...args));\n\n        /* Destroy this item when the resource is destroyed. */\n        this.listenTo(resource, 'destroy', this.destroy);\n\n        /*\n         * Listen for each synced attribute change so we can update this\n         * list item.\n         */\n        this.syncAttrs.forEach(\n            attr => this.listenTo(resource, `change:${attr}`,\n                                  (model, value) => this.set(attr, value)));\n    },\n\n    /**\n     * Create the Resource for this list item, with the given attributes.\n     */\n    createResource(/* attrs */) {\n        console.assert(false, 'createResource must be implemented');\n    },\n\n    /**\n     * Destroy the list item.\n     *\n     * This will just emit the 'destroy' signal. It is typically called when\n     * the resource itself is destroyed.\n     *\n     * Args:\n     *     options (object):\n     *         Options for the destroy operation.\n     *\n     * Option Args:\n     *     success (function):\n     *         Optional success callback.\n     */\n    destroy(options={}) {\n        this.stopListening(this.resource);\n        this.trigger('destroy', this, this.collection, options);\n\n        if (_.isFunction(options.success)) {\n            options.success(this, null, options);\n        }\n    }\n});\n"]}